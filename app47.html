<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de GestÃ£o de Conselho Consultivo</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); 
      padding: 15px; 
      transition: background 0.5s;
      font-size: 14px;
    }
    
    .tela { display: none; } 
    .tela.active { display: block; }

    /* CONTADOR DE SETORES E CADEIRAS */
    .grupo-contador {
      text-align: center;
      font-size: 0.95em;
      color: #495057;
      background: rgba(255,255,255,0.7);
      padding: 8px 15px;
      border-radius: 8px;
      margin: 10px 0 15px 0;
      border: 2px dashed #dee2e6;
      font-weight: 600;
    }
    .grupo-contador span {
      margin: 0 12px;
    }  

    /* MENU */
    .menu-btn { 
      position: fixed; top: 15px; left: 15px; z-index: 1000; 
      background: white; border: none; padding: 10px 18px; 
      border-radius: 8px; cursor: pointer; font-size: 1.1em; 
      font-weight: bold; box-shadow: 0 3px 10px rgba(0,0,0,0.3); 
      transition: all 0.3s; 
    }
    .menu-btn:hover { transform: translateY(-2px); }
    
    .menu-dropdown { 
      position: fixed; top: 60px; left: 15px; z-index: 999; 
      background: white; border-radius: 8px; 
      box-shadow: 0 6px 20px rgba(0,0,0,0.3); 
      padding: 8px; display: none; min-width: 200px; 
    }
    .menu-dropdown.active { display: block; }
    .menu-item { 
      padding: 10px 14px; cursor: pointer; border-radius: 6px; 
      transition: all 0.2s; display: flex; align-items: center; 
      gap: 10px; font-size: 0.95em;
    }
    .menu-item:hover { background: #f0f0f0; }
    #menuCancelarEdicao { background: #ff6b6b !important; color: white !important; display: none; }
    #menuCancelarEdicao:hover { background: #fa5252 !important; }
    
    /* INDICADORES */
    .edit-indicator { 
      position: fixed; top: 15px; right: 15px; 
      background: #51cf66; color: white; 
      padding: 8px 16px; border-radius: 8px; 
      font-weight: bold; font-size: 0.9em;
      box-shadow: 0 3px 10px rgba(0,0,0,0.3); 
      display: none; z-index: 1000; 
    }
    .edit-indicator.active { display: block; animation: pulse 2s infinite; }
    
    .btn-cancelar-edicao { 
      position: fixed; top: 60px; right: 15px; 
      background: #ff6b6b; color: white; 
      padding: 10px 20px; border-radius: 8px; 
      font-weight: bold; font-size: 0.9em;
      box-shadow: 0 3px 10px rgba(0,0,0,0.3); 
      display: none; z-index: 1000; cursor: pointer; 
      border: none; transition: all 0.3s; 
    }
    .btn-cancelar-edicao:hover { transform: translateY(-2px); background: #fa5252; }
    .btn-cancelar-edicao.active { display: block; }
    
    .reuniao-indicator { 
      position: fixed; top: 60px; right: 15px; 
      background: #51cf66; color: white; 
      padding: 8px 16px; border-radius: 8px; 
      font-weight: bold; font-size: 0.9em;
      box-shadow: 0 3px 10px rgba(0,0,0,0.3); 
      display: none; z-index: 1000; 
    }
    .reuniao-indicator.active { display: block; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
    
    /* BOTÃ•ES REUNIÃƒO */
    .btn-concluir-reuniao, .btn-abortar-reuniao { 
      position: fixed; bottom: 25px; 
      background: #51cf66; color: white; 
      padding: 12px 30px; border-radius: 10px; 
      font-weight: bold; font-size: 1em;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4); 
      display: none; z-index: 1000; cursor: pointer; 
      border: none; transition: all 0.3s; 
    }
    .btn-concluir-reuniao { left: 50%; transform: translateX(-50%); }
    .btn-abortar-reuniao { 
      left: 50%; transform: translateX(calc(-50% - 170px)); 
      background: #ff6b6b; 
    }
    .btn-concluir-reuniao:hover, .btn-abortar-reuniao:hover { 
      transform: translateX(-50%) translateY(-3px); 
    }
    .btn-abortar-reuniao:hover { 
      transform: translateX(calc(-50% - 170px)) translateY(-3px); 
    }
    .btn-concluir-reuniao.active, .btn-abortar-reuniao.active { 
      display: block; animation: pulse 2s infinite; 
    }
    
    /* MODO EDIÃ‡ÃƒO */
    .edit-mode .editable { 
      border: 2px dashed #667eea !important; 
      cursor: text; min-height: 15px; 
      padding: 2px 4px;
    }
    .edit-mode .editable:hover { background: rgba(102, 126, 234, 0.1); }
    .edit-mode .btn-add-setor, 
    .edit-mode .btn-add-cadeira, 
    .edit-mode .btn-remove, 
    .edit-mode .btn-add-gt, 
    .edit-mode .btn-add-atividade, 
    .edit-mode .btn-edit-atividade, 
    .edit-mode .btn-edit-gt,
    .edit-mode .btn-remover-camara,
    .edit-mode .btn-editar-nome-camara,
    .edit-mode .btn-add-membro { 
      display: inline-block !important; 
    }
    
    .btn-add-setor, .btn-add-cadeira, .btn-remove, 
    .btn-add-gt, .btn-add-atividade, 
    .btn-edit-atividade, .btn-edit-gt, .btn-add-membro { 
      display: none; padding: 5px 10px; 
      background: #667eea; color: white; 
      border: none; border-radius: 5px; 
      cursor: pointer; font-size: 0.8em; 
      margin: 4px; transition: all 0.2s; 
    }
    .btn-remove { background: #ff6b6b; }
    .btn-add-gt, .btn-add-atividade, .btn-add-membro { background: #51cf66; }
    .btn-edit-atividade, .btn-edit-gt { background: #ffa726; }
    /* BOTÃ•ES CÃ‚MARA */
.emoji-option-simples {
  font-size: 2em;
  cursor: pointer;
  text-align: center;
  padding: 10px;
  border-radius: 8px;
  transition: all 0.2s;
  border: 2px solid transparent;
  background: white;
}

.emoji-option-simples:hover {
  background: #e3f2fd;
  transform: scale(1.1);
  border-color: #667eea;
}

.emoji-option-simples.selecionado {
  background: #667eea;
  color: white;
  border-color: #5568d3;
  transform: scale(1.05);
}
    .btn-criar-camara {
      display: none;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white; border: none;
      padding: 12px 24px; border-radius: 8px;
      font-size: 1em; font-weight: bold;
      cursor: pointer; margin: 15px auto;
      box-shadow: 0 3px 12px rgba(102, 126, 234, 0.4);
      transition: all 0.3s;
    }
    .btn-criar-camara:hover { transform: translateY(-2px); }
    .edit-mode .btn-criar-camara { display: block; }
    
    .btn-remover-camara, .btn-editar-nome-camara {
      display: none;
      background: #ff6b6b; color: white;
      border: none; padding: 6px 12px;
      border-radius: 5px; font-size: 0.8em;
      font-weight: bold; cursor: pointer;
      margin-left: 8px; transition: all 0.2s;
    }
    .btn-editar-nome-camara { background: #ffa726; }
    .btn-remover-camara:hover { background: #fa5252; transform: scale(1.05); }
    .btn-editar-nome-camara:hover { background: #ff9800; transform: scale(1.05); }
    
    /* MODAIS */
    .modal { 
      display: none; position: fixed; z-index: 2000; 
      left: 0; top: 0; width: 100%; height: 100%; 
      background-color: rgba(0,0,0,0.7); 
    }
    .modal.active { 
      display: flex; align-items: center; 
      justify-content: center; 
    }
    .modal-content { 
      background: white; padding: 25px; 
      border-radius: 12px; max-width: 650px; 
      width: 90%; max-height: 85vh; overflow-y: auto; 
    }
    .modal-header { 
      font-size: 1.4em; font-weight: bold; 
      margin-bottom: 18px; color: #2c3e50; 
    }
    .modal-input, .modal-select, .modal-textarea { 
      width: 100%; padding: 10px; margin-bottom: 12px; 
      border: 2px solid #ddd; border-radius: 8px; 
      font-size: 0.95em; 
    }
    .modal-textarea { min-height: 80px; resize: vertical; }
    .modal-btn { 
      padding: 10px 20px; border: none; 
      border-radius: 8px; cursor: pointer; 
      font-size: 0.95em; font-weight: bold; 
      margin-right: 8px; transition: all 0.3s; 
    }
    .modal-btn-primary { background: #667eea; color: white; }
    .modal-btn-primary:hover { background: #5568d3; }
    .modal-btn-secondary { background: #e0e0e0; color: #333; }
    .modal-btn-secondary:hover { background: #d0d0d0; }
    .modal-label { 
      font-weight: bold; margin-bottom: 4px; 
      display: block; color: #495057; font-size: 0.9em;
    }
    
    /* PALETA DE CORES */
    .color-picker-grid { 
      display: grid; grid-template-columns: repeat(4, 1fr); 
      gap: 8px; margin: 15px 0; 
    }
    .color-option { 
      width: 55px; height: 55px; border-radius: 8px; 
      cursor: pointer; border: 3px solid transparent; 
      transition: all 0.2s; 
    }
    .color-option:hover { transform: scale(1.1); border-color: #2c3e50; }
    
    /* GALERIA DE EMOJIS */
    .emoji-grid { 
      display: grid; grid-template-columns: repeat(8, 1fr); 
      gap: 8px; margin: 15px 0; max-height: 250px; 
      overflow-y: auto; 
    }
    .emoji-option { 
      font-size: 2.2em; cursor: pointer; 
      text-align: center; padding: 6px; 
      border-radius: 8px; transition: all 0.2s; 
    }
    .emoji-option:hover { background: #f0f0f0; transform: scale(1.2); }
    
    /* HEADER COMPACTO */
    .header { text-align: center; color: white; margin: 35px 0 15px; }
    .header h1 { 
      font-size: 2em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); 
      margin-bottom: 8px; 
    }
    .header p { font-size: 1em; margin-bottom: 4px; }
    .reuniao-info { 
      font-size: 0.95em; color: #fff; 
      background: rgba(255,255,255,0.2); 
      padding: 8px 16px; border-radius: 8px; 
      display: inline-block; margin-top: 8px; 
    }
    .reuniao-info span { font-weight: bold; }
    .edit-mode .reuniao-info .editable-inline { 
      border-bottom: 2px dashed #fff; 
      cursor: text; padding: 2px 5px; 
    }
    
    .main-content { max-width: 1600px; margin: 0 auto; }
    .container { display: flex; gap: 15px; margin-bottom: 15px; }
    
    /* SISTEMA DE COLLAPSE/ACORDEÃƒO */
    .presidencia-container {
      max-width: 700px; 
      margin: 0 auto 20px;
    }
    
    .presidencia-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 12px;
      padding: 15px 20px;
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.35);
      border: 3px solid #ffffff;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    
    .presidencia-header:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
    }
    
    .presidencia-titulo {
      color: white;
      font-size: 1.3em;
      font-weight: bold;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .presidencia-seta {
      color: white;
      font-size: 1.5em;
      transition: transform 0.3s;
    }
    
    .presidencia-header.active .presidencia-seta {
      transform: rotate(180deg);
    }
    
    .presidencia-conteudo {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease-out;
      background: white;
      border-radius: 0 0 12px 12px;
      margin-top: -10px;
      padding-top: 10px;
    }
    
    .presidencia-conteudo.active {
      max-height: 500px;
      padding: 15px;
      border: 3px solid #667eea;
      border-top: none;
    }
    
    /* Grupos colapsÃ¡veis */
    .grupo { 
      flex: 1; background: white; 
      border-radius: 10px; padding: 18px; 
      box-shadow: 0 6px 20px rgba(0,0,0,0.2); 
      max-height: none;
    }
    
    .grupo-header {
      cursor: pointer;
      transition: all 0.3s;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    
    .grupo-header:hover {
      background: rgba(102, 126, 234, 0.1);
    }
    
    .titulo-grupo { 
      font-size: 1.6em; font-weight: bold; 
      padding: 12px; border-radius: 8px; 
      color: white; text-shadow: 1px 1px 2px rgba(0,0,0,0.3); 
      flex: 1;
    }
    
    .grupo:first-child .titulo-grupo { 
      background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%); 
    }
    .grupo:last-child .titulo-grupo { 
      background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); 
    }
    
    .grupo-seta {
      font-size: 1.5em;
      transition: transform 0.3s;
      color: #667eea;
      margin-right: 10px;
    }
    
    .grupo-header.active .grupo-seta {
      transform: rotate(180deg);
    }
    
    .grupo-conteudo {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-out;
    }
    
    .grupo-conteudo.active {
      max-height: 10000px;
    }
    
    /* Setores colapsÃ¡veis */
    .setor { 
      margin-bottom: 25px;
      border-left: 3px solid #667eea; 
      padding-left: 12px; 
      position: relative; 
    }
    
    .setor-header-wrapper {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
      transition: all 0.3s;
      padding: 8px;
      border-radius: 8px;
      margin-bottom: 8px;
    }
    
    .setor-header-wrapper:hover {
      background: rgba(102, 126, 234, 0.1);
    }
    
    .setor-seta {
      font-size: 1.2em;
      transition: transform 0.3s;
      color: #667eea;
      min-width: 20px;
    }
    
    .setor-header-wrapper.active .setor-seta {
      transform: rotate(180deg);
    }
    
    .titulo-setor { 
      font-size: 1em; font-weight: bold; 
      color: #2c3e50; 
      display: flex; align-items: center; 
      gap: 10px; flex-wrap: wrap; 
      flex: 1;
    }
    
    .contador-cadeiras { 
      background: #667eea; color: white; 
      padding: 3px 10px; border-radius: 15px; 
      font-size: 0.7em; 
    }
    
    .setor-conteudo {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-out;
    }
    
    .setor-conteudo.active {
      max-height: 5000px;
      margin-top: 10px;
    }
    
    /* AnimaÃ§Ãµes suaves */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .presidencia-conteudo.active,
    .grupo-conteudo.active,
    .setor-conteudo.active {
      animation: fadeIn 0.3s;
    }
    
    /* CADEIRAS COMPACTAS */
    .cadeira { 
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); 
      border-radius: 10px; padding: 12px; 
      margin-bottom: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.1); 
      border: 2px solid #dee2e6; 
    }
    /* LAYOUT LADO A LADO - TITULAR E SUPLENTE */
    .cadeira-membros-container {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .cadeira-membros-container .membro-linha {
      flex: 1;
      min-width: 280px;
    }

    @media (max-width: 768px) {
      .cadeira-membros-container {
        flex-direction: column;
      }
      .cadeira-membros-container .membro-linha {
        min-width: 100%;
      }
    }
    
    .cadeira.presidencia { 
      border: 3px solid #667eea; 
      background: linear-gradient(135deg, #e8eaf6 0%, #c5cae9 100%); 
    }
    .cadeira-header { 
      display: flex; align-items: center; 
      gap: 10px; margin-bottom: 12px; 
      padding-bottom: 10px; border-bottom: 2px dashed #dee2e6; 
    }
    .icone-cadeira { font-size: 2em; }
    .numero-cadeira { font-size: 1em; font-weight: bold; color: #495057; }
    
    /* MEMBROS COMPACTOS */
    .membro-linha { 
      display: flex; flex-direction: column; 
      gap: 6px; padding: 10px; margin-bottom: 6px; 
      border-radius: 8px; transition: all 0.2s; 
      cursor: move; 
    }
    .membro-linha.titular { border-left: 3px solid #1976d2; }
    .membro-linha.suplente { border-left: 3px solid #f57c00; }
    
    /* CORES DOS ESTADOS - TODOS OS ESTADOS DO BRASIL */
    .membro-linha[data-estado="AC"] { background: linear-gradient(135deg, #FFE0E0 0%, #FFCDD2 100%); }
    .membro-linha[data-estado="AL"] { background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%); }
    .membro-linha[data-estado="AP"] { background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); }
    .membro-linha[data-estado="AM"] { background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C9 100%); }
    .membro-linha[data-estado="BA"] { background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); }
    .membro-linha[data-estado="CE"] { background: linear-gradient(135deg, #E0F2F1 0%, #B2DFDB 100%); }
    .membro-linha[data-estado="DF"] { background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); }
    .membro-linha[data-estado="ES"] { background: linear-gradient(135deg, #E8EAF6 0%, #C5CAE9 100%); }
    .membro-linha[data-estado="GO"] { background: linear-gradient(135deg, #FCE4EC 0%, #F8BBD0 100%); }
    .membro-linha[data-estado="MA"] { background: linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%); }
    .membro-linha[data-estado="MT"] { background: linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%); }
    .membro-linha[data-estado="MS"] { background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); }
    .membro-linha[data-estado="MG"] { background: linear-gradient(135deg, #F1F8E9 0%, #DCEDC8 100%); }
    .membro-linha[data-estado="PA"] { background: linear-gradient(135deg, #FFFDE7 0%, #FFF9C4 100%); }
    .membro-linha[data-estado="PB"] { background: linear-gradient(135deg, #E1F5FE 0%, #B3E5FC 100%); }
    .membro-linha[data-estado="PR"] { background: linear-gradient(135deg, #F9FBE7 0%, #F0F4C3 100%); }
    .membro-linha[data-estado="PE"] { background: linear-gradient(135deg, #EDE7F6 0%, #D1C4E9 100%); }
    .membro-linha[data-estado="PI"] { background: linear-gradient(135deg, #E0F2F1 0%, #B2DFDB 100%); }
    .membro-linha[data-estado="RJ"] { background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%); }
    .membro-linha[data-estado="RN"] { background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); }
    .membro-linha[data-estado="RS"] { background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); }
    .membro-linha[data-estado="RO"] { background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); }
    .membro-linha[data-estado="RR"] { background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C9 100%); }
    .membro-linha[data-estado="SC"] { background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%); }
    .membro-linha[data-estado="SP"] { background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); }
    .membro-linha[data-estado="SE"] { background: linear-gradient(135deg, #FCE4EC 0%, #F8BBD0 100%); }
    .membro-linha[data-estado="TO"] { background: linear-gradient(135deg, #E8EAF6 0%, #C5CAE9 100%); }
    
    .membro-linha.vazio { 
      background: #f5f5f5; border-left: 3px solid #ccc; 
      opacity: 0.6; 
    }
    .membro-linha.dragging { opacity: 0.5; }
    .membro-linha-top { display: flex; align-items: center; gap: 10px; }
    
    /* AVATAR COMPACTO */
    .avatar-container { display: flex; align-items: center; gap: 6px; }
    .bonequinho, .logo-instituicao { 
      font-size: 2.5em; min-width: 42px; 
      width: 42px; height: 42px; text-align: center; 
      cursor: pointer; position: relative; 
      overflow: hidden; border-radius: 50%; 
      display: flex; align-items: center; 
      justify-content: center; border: 2px solid #dee2e6; 
      transition: all 0.2s; background: white; 
    }
    .bonequinho:hover, .logo-instituicao:hover { 
      transform: scale(1.1); border-color: #667eea; 
    }
    .bonequinho img, .logo-instituicao img { 
      width: 100%; height: 100%; 
      object-fit: cover; border-radius: 50%; 
    }
    
    .etiqueta-cargo { 
      background: #495057; color: white; 
      padding: 3px 8px; border-radius: 5px; 
      font-size: 0.7em; font-weight: bold; 
      text-transform: uppercase; min-width: 70px; 
      text-align: center; 
    }
    .etiqueta-cargo.titular { background: #1976d2; }
    .etiqueta-cargo.suplente { background: #f57c00; }
    
    .info-membro { flex: 1; }
    .nome-membro { 
      font-weight: bold; font-size: 0.95em; 
      color: #212529; margin-bottom: 3px; 
    }
    .entidade-membro { 
      font-size: 0.8em; color: #6c757d; 
      font-style: italic; margin-bottom: 2px; 
    }
    .municipio-membro { font-size: 0.75em; color: #868e96; }
    
    .btn-ver-curriculo { 
      background: #667eea; color: white; 
      border: none; padding: 3px 8px; 
      border-radius: 4px; cursor: pointer; 
      font-size: 0.7em; margin-top: 4px; 
      display: inline-block; 
    }
    .btn-ver-curriculo::after { content: 'ğŸ“„ Ver CurrÃ­culo'; }
    .edit-mode .btn-ver-curriculo::after { content: 'ğŸ“„ Ver/Editar'; }
    
    /* PRESENÃ‡AS COMPACTAS */
    .presenca-container { 
      display: flex; gap: 5px; margin-top: 6px; 
      align-items: center; flex-wrap: wrap; 
    }
    .presenca-label { 
      font-size: 0.7em; color: #6c757d; 
      font-weight: bold; margin-right: 4px; 
    }
    .bolinha-presenca { 
      width: 18px; height: 18px; border-radius: 50%; 
      border: 2px solid #dee2e6; background: white; 
      cursor: pointer; transition: all 0.2s; 
      position: relative; 
    }
    .edit-mode .bolinha-presenca:hover { 
      transform: scale(1.3); border-color: #667eea; 
    }
    .bolinha-presenca.verde { background: #51cf66; border-color: #37b24d; }
    .bolinha-presenca.amarelo { background: #ffd43b; border-color: #fab005; }
    .bolinha-presenca.vermelho { background: #ff6b6b; border-color: #fa5252; }
    
    /* CÃ‚MARAS COMPACTAS */
    .camaras-container { 
      background: white; border-radius: 10px; 
      padding: 20px; box-shadow: 0 6px 20px rgba(0,0,0,0.2); 
    }
    .camaras-titulo { 
      font-size: 1.6em; font-weight: bold; 
      text-align: center; margin-bottom: 18px; 
      color: #2c3e50; padding: 10px; 
      background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%); 
      border-radius: 8px; 
    }
    .camaras-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
      gap: 12px; 
    }
    .camara { 
      background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%); 
      border-radius: 10px; padding: 16px; 
      min-height: 180px; transition: all 0.3s; 
    }
    .camara.drag-over { 
      background: linear-gradient(135deg, #55efc4 0%, #00b894 100%); 
      transform: scale(1.02); 
      box-shadow: 0 0 25px rgba(0, 184, 148, 0.6); 
    }
    .camara-header { 
      display: flex; justify-content: space-between; 
      align-items: center; margin-bottom: 12px; 
      padding-bottom: 10px; 
      border-bottom: 2px solid rgba(255,255,255,0.3); 
    }
    .camara-nome { 
      font-size: 1.15em; font-weight: bold; 
      color: white; flex: 1;
    }
    .camara-contador { 
      background: rgba(255,255,255,0.9); 
      color: #6c5ce7; font-weight: bold; 
      padding: 5px 10px; border-radius: 15px; 
      font-size: 0.75em;
    }
    .camara-membros { min-height: 50px; margin-bottom: 12px; }
    .camara-membro { 
      background: rgba(255,255,255,0.95); 
      border-radius: 8px; padding: 8px 10px; 
      margin-bottom: 6px; display: flex; 
      align-items: center; gap: 8px; 
      box-shadow: 0 2px 4px rgba(0,0,0,0.1); 
    }
    .camara-membro .bonequinho { font-size: 2em; }
    .camara-membro .nome-membro { 
      flex: 1; font-size: 0.85em; 
      font-weight: bold; color: #2c3e50; 
    }
    
    /* ATIVIDADES COMPACTAS - AZUL CLARO PARA CÃ‚MARAS */
    .camara-atividades { margin-bottom: 12px; }
    .atividade-card { 
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); 
      border-radius: 8px; padding: 10px; 
      margin-bottom: 8px; border-left: 3px solid #2196f3; 
      box-shadow: 0 2px 5px rgba(0,0,0,0.1); 
    }
    .atividade-card[data-concluida="true"] { 
      opacity: 0.8; border-left-color: #1976d2; 
    }
    .atividade-card[data-concluida="false"] { 
      border-left-color: #ffd43b; 
    }
    .atividade-titulo { 
      font-weight: bold; color: #2c3e50; 
      margin-bottom: 4px; font-size: 0.85em; 
    }
    .atividade-info { 
      font-size: 0.75em; color: #495057; 
      margin-bottom: 4px; 
    }
    .atividade-resultado { 
      background: white; padding: 6px; 
      border-radius: 4px; font-size: 0.75em; 
      color: #2c3e50; margin-top: 6px; 
      border-left: 3px solid #667eea; 
    }
    .atividade-status { 
      margin-top: 6px; padding: 4px 8px; 
      border-radius: 5px; font-size: 0.7em; 
      font-weight: bold; display: inline-block; 
    }
    .atividade-status.concluida { background: #2ecc71; color: white; }
    .atividade-status.nao-concluida { background: #ffd43b; color: #333; }
    
    /* GTs COMPACTOS - VERDE PARA ATIVIDADES DE GT */
    .camara-gts { margin-top: 12px; }
    .gt-card { 
      background: rgba(255,255,255,0.95); 
      border-radius: 8px; padding: 10px; 
      margin-bottom: 8px; border-left: 3px solid #667eea; 
    }
    .gt-titulo { 
      font-weight: bold; color: #2c3e50; 
      margin-bottom: 4px; font-size: 0.9em;
    }
    .gt-responsavel { 
      font-size: 0.8em; color: #6c757d; 
      margin-bottom: 4px; 
    }
    .gt-objetivo { 
      font-size: 0.75em; color: #495057; 
      font-style: italic; margin-bottom: 6px; 
    }
    .gt-componentes { 
      font-size: 0.75em; color: #6c757d; 
      margin-bottom: 8px; display: none; 
    }
    .gt-componentes.show { display: block; }
    .btn-ver-componentes { 
      background: #e9ecef; color: #495057; 
      border: none; padding: 3px 8px; 
      border-radius: 4px; cursor: pointer; 
      font-size: 0.75em; margin-bottom: 6px; 
    }
    .gt-resultado { 
      font-size: 0.75em; color: #495057; 
      margin-top: 6px; padding: 6px; 
      background: #f8f9fa; border-radius: 4px; 
      border-left: 3px solid #51cf66; 
    }
    .gt-atividades-internas { 
      margin-top: 8px; padding-top: 8px; 
      border-top: 1px dashed #dee2e6; 
    }
    
    /* Atividades de GT - VERDE */
    .gt-atividades-internas .atividade-card { 
      background: linear-gradient(135deg, #d3f9d8 0%, #b2f2bb 100%); 
      border-left: 3px solid #51cf66; 
    }
    
    /* TELA DE PRESENÃ‡A */
    .tela-presenca {
      background: white;
      border-radius: 10px;
      padding: 20px;
      max-width: 900px;
      margin: 20px auto;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }
    
    .lista-presenca {
      max-height: 70vh;
      overflow-y: auto;
      margin: 20px 0;
    }
    
    .item-lista-presenca {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 15px;
      border-bottom: 1px solid #e9ecef;
      transition: background 0.2s;
    }
    
    .item-lista-presenca:hover {
      background: #f8f9fa;
    }
    
    .info-membro-presenca {
      display: flex;
      align-items: center;
      gap: 15px;
      flex: 1;
    }
    
    .bolinha-grande {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      border: 3px solid #dee2e6;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .bolinha-grande:hover {
      transform: scale(1.2);
    }
    
    .bolinha-grande.verde { background: #51cf66; border-color: #37b24d; }
    .bolinha-grande.amarelo { background: #ffd43b; border-color: #fab005; }
    .bolinha-grande.vermelho { background: #ff6b6b; border-color: #fa5252; }
    
    .botoes-reuniao-fixo {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 15px;
      z-index: 1000;
    }
    
    .btn-reuniao-fixo {
      padding: 15px 30px;
      border: none;
      border-radius: 10px;
      font-weight: bold;
      font-size: 1em;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
    }
    
    .btn-finalizar-reuniao {
      background: #51cf66;
      color: white;
    }
    
    .btn-abortar-reuniao-fixo {
      background: #ff6b6b;
      color: white;
    }
    
    .btn-reuniao-fixo:hover {
      transform: translateY(-3px);
    }
    
    /* ANÃLISES */
    .analises-container { 
      background: white; border-radius: 10px; 
      padding: 25px; max-width: 1400px; 
      margin: 70px auto 20px; 
      box-shadow: 0 6px 20px rgba(0,0,0,0.2); 
    }
    .analises-menu { 
      display: flex; gap: 12px; 
      margin-bottom: 25px; flex-wrap: wrap; 
    }
    .analise-btn { 
      padding: 10px 20px; background: #667eea; 
      color: white; border: none; 
      border-radius: 8px; cursor: pointer; 
      font-size: 0.95em; font-weight: bold; 
      transition: all 0.3s; 
    }
    .analise-btn:hover { background: #5568d3; }
    .analise-btn.active { background: #2c3e50; }
    .analise-content { display: none; }
    .analise-content.active { display: block; }
    
    /* COMPOSIÃ‡ÃƒO */
    .composicao-container { 
      display: flex; flex-direction: column; 
      gap: 25px; 
    }
    .composicao-grupo { 
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); 
      border-radius: 10px; padding: 18px; 
      box-shadow: 0 3px 10px rgba(0,0,0,0.1); 
    }
    .composicao-grupo-titulo { 
      font-size: 1.6em; font-weight: bold; 
      color: #2c3e50; margin-bottom: 18px; 
      padding-bottom: 8px; border-bottom: 3px solid #667eea; 
    }
    .composicao-setor { margin-bottom: 25px; }
    .composicao-setor-titulo { 
      font-size: 1.2em; font-weight: bold; 
      color: #495057; margin-bottom: 12px; 
      display: flex; align-items: center; gap: 10px; 
    }
    .composicao-cadeiras-info { 
      background: #667eea; color: white; 
      padding: 4px 12px; border-radius: 15px; 
      font-size: 0.75em; 
    }
    .composicao-cadeiras-container { 
      display: flex; flex-wrap: wrap; gap: 20px; 
    }
    .composicao-cadeira-bloco { 
      display: flex; align-items: center; 
      gap: 12px; padding: 15px; 
      background: #f8f9fa; border-radius: 10px; 
      border: 2px solid #dee2e6; 
    }
    .composicao-icone-cadeira { 
      font-size: 3em; min-width: 60px; 
      text-align: center; 
    }
    .composicao-membros-cadeira { 
      display: flex; gap: 12px; 
    }
    .composicao-card { 
      background: white; 
      border-radius: 8px; 
      padding: 12px; 
      text-align: center; 
      border: 2px solid #dee2e6; 
      transition: all 0.3s; 
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      min-width: 140px;
      max-width: 140px;
    }
    
    /* CORES DOS ESTADOS PARA COMPOSIÃ‡ÃƒO */
    .composicao-card[data-estado="AC"] { border-color: #FFCDD2; background: linear-gradient(135deg, #FFE0E0 0%, #FFCDD2 100%); }
    .composicao-card[data-estado="AL"] { border-color: #FFF59D; background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%); }
    .composicao-card[data-estado="AP"] { border-color: #BBDEFB; background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); }
    .composicao-card[data-estado="AM"] { border-color: #C8E6C9; background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C9 100%); }
    .composicao-card[data-estado="BA"] { border-color: #E1BEE7; background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); }
    .composicao-card[data-estado="CE"] { border-color: #B2DFDB; background: linear-gradient(135deg, #E0F2F1 0%, #B2DFDB 100%); }
    .composicao-card[data-estado="DF"] { border-color: #FFE0B2; background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); }
    .composicao-card[data-estado="ES"] { border-color: #C5CAE9; background: linear-gradient(135deg, #E8EAF6 0%, #C5CAE9 100%); }
    .composicao-card[data-estado="GO"] { border-color: #F8BBD0; background: linear-gradient(135deg, #FCE4EC 0%, #F8BBD0 100%); }
    .composicao-card[data-estado="MA"] { border-color: #B2EBF2; background: linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%); }
    .composicao-card[data-estado="MT"] { border-color: #FFECB3; background: linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%); }
    .composicao-card[data-estado="MS"] { border-color: #C8E6C9; background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%); }
    .composicao-card[data-estado="MG"] { border-color: #DCEDC8; background: linear-gradient(135deg, #F1F8E9 0%, #DCEDC8 100%); }
    .composicao-card[data-estado="PA"] { border-color: #FFF9C4; background: linear-gradient(135deg, #FFFDE7 0%, #FFF9C4 100%); }
    .composicao-card[data-estado="PB"] { border-color: #B3E5FC; background: linear-gradient(135deg, #E1F5FE 0%, #B3E5FC 100%); }
    .composicao-card[data-estado="PR"] { border-color: #F0F4C3; background: linear-gradient(135deg, #F9FBE7 0%, #F0F4C3 100%); }
    .composicao-card[data-estado="PE"] { border-color: #D1C4E9; background: linear-gradient(135deg, #EDE7F6 0%, #D1C4E9 100%); }
    .composicao-card[data-estado="PI"] { border-color: #B2DFDB; background: linear-gradient(135deg, #E0F2F1 0%, #B2DFDB 100%); }
    .composicao-card[data-estado="RJ"] { border-color: #FFCDD2; background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%); }
    .composicao-card[data-estado="RN"] { border-color: #BBDEFB; background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); }
    .composicao-card[data-estado="RS"] { border-color: #E1BEE7; background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%); }
    .composicao-card[data-estado="RO"] { border-color: #FFE0B2; background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); }
    .composicao-card[data-estado="RR"] { border-color: #C8E6C9; background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C9 100%); }
    .composicao-card[data-estado="SC"] { border-color: #FFF59D; background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%); }
    .composicao-card[data-estado="SP"] { border-color: #BBDEFB; background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%); }
    .composicao-card[data-estado="SE"] { border-color: #F8BBD0; background: linear-gradient(135deg, #FCE4EC 0%, #F8BBD0 100%); }
    .composicao-card[data-estado="TO"] { border-color: #C5CAE9; background: linear-gradient(135deg, #E8EAF6 0%, #C5CAE9 100%); }
    
    .composicao-card:hover { 
      transform: translateY(-3px); 
      box-shadow: 0 4px 10px rgba(0,0,0,0.15); 
    }
    .composicao-boneco { font-size: 2.5em; margin-bottom: 6px; }
    .composicao-entidade { 
      font-weight: bold; font-size: 0.75em; 
      color: #2c3e50; margin-bottom: 3px; 
      line-height: 1.3; 
    }
    .composicao-cargo { 
      font-size: 0.65em; color: white; 
      padding: 2px 6px; border-radius: 8px; 
      margin-top: 4px; display: inline-block; 
    }
    .composicao-cargo.titular { background: #1976d2; }
    .composicao-cargo.suplente { background: #f57c00; }
    
    .mensagem-vazio {
      text-align: center; padding: 18px; 
      color: #6c757d; font-style: italic; 
      background: #f8f9fa; border-radius: 8px; 
    }
    
    .mensagem-vazio-docs {
      text-align: center; padding: 25px; 
      color: #6c757d; font-style: italic; 
      background: #f8f9fa; border-radius: 8px;
      font-size: 1.1em;
    }
    
    @media (max-width: 1200px) { 
      .container { flex-direction: column; } 
      .grupo { max-height: none; } 
    }
  </style>
</head>
<body>

  <!-- MENU -->
  <button class="menu-btn" onclick="toggleMenu()">â˜° MENU</button>
  <div class="menu-dropdown" id="menuDropdown">
    <div class="menu-item" onclick="irParaTela('principal')"><span>ğŸ </span><span>Principal</span></div>
    <div class="menu-item" onclick="solicitarSenha()"><span>ğŸ”’</span><span>Editar</span></div>
    <div class="menu-item" id="menuCancelarEdicao" onclick="finalizarEdicao()"><span>ğŸ’¾</span><span>Finalizar EdiÃ§Ã£o</span></div>
    <div class="menu-item" onclick="abrirPaletaCores()"><span>ğŸ¨</span><span>Paleta de Cores</span></div>
    <div class="menu-item" onclick="ativarModoReuniao()"><span>ğŸ“‹</span><span>Modo ReuniÃ£o</span></div>
    <div class="menu-item" onclick="irParaTela('analises')"><span>ğŸ“Š</span><span>AnÃ¡lises</span></div>
    <div class="menu-item" onclick="irParaTela('documentos')"><span>ğŸ“</span><span>Documentos</span></div>
    <div class="menu-item" onclick="salvarJSON()"><span>ğŸ’¾</span><span>Salvar JSON</span></div>
    <div class="menu-item" onclick="salvarHTML()"><span>ğŸŒ</span><span>Salvar HTML</span></div>
    <div class="menu-item" onclick="document.getElementById('inputCarregarJSON').click()"><span>ğŸ“‚</span><span>Abrir JSON</span></div>
    <div class="menu-item" onclick="carregarJSONExemplo()"><span>ğŸ“¥</span><span>Carregar Dados Exemplo</span></div>
    <div class="menu-item" onclick="limparConselho()"><span>ğŸ§¹</span><span>Limpar Conselho</span></div>
  </div>
  
  <input type="file" id="inputCarregarJSON" accept=".json" style="display:none;" onchange="carregarJSON(this)">
  
  <!-- INDICADORES -->
  <div class="edit-indicator" id="editIndicator">ğŸ”“ MODO EDIÃ‡ÃƒO ATIVO</div>
  <button class="btn-cancelar-edicao" id="btnCancelarEdicao" onclick="cancelarEdicaoRapido()">âŒ CANCELAR EDIÃ‡ÃƒO</button>
  <div class="reuniao-indicator" id="reuniaoIndicator">ğŸ“‹ MODO REUNIÃƒO</div>

  <!-- MODAIS -->
  
  <!-- Modal Senha -->
  <div class="modal" id="modalSenha">
    <div class="modal-content">
      <div class="modal-header">ğŸ”’ AutenticaÃ§Ã£o NecessÃ¡ria</div>
      <label class="modal-label">Digite a senha de administrador:</label>
      <input type="password" class="modal-input" id="inputSenha">
      <div>
        <button class="modal-btn modal-btn-primary" onclick="verificarSenha()">Entrar</button>
        <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalSenha')">Cancelar</button>
      </div>
    </div>
  </div>
  
  <!-- Modal Finalizar EdiÃ§Ã£o -->
  <div class="modal" id="modalFinalizarEdicao">
    <div class="modal-content">
      <div class="modal-header">ğŸ’¾ Finalizar EdiÃ§Ã£o</div>
      <p style="margin-bottom:18px;">Deseja salvar as alteraÃ§Ãµes antes de finalizar a ediÃ§Ã£o?</p>
      <button class="modal-btn modal-btn-primary" onclick="salvarEFinalizarEdicao()">âœ… SALVAR E FINALIZAR</button>
      <button class="modal-btn modal-btn-secondary" onclick="finalizarSemSalvar()">âŒ FINALIZAR SEM SALVAR</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalFinalizarEdicao')">â†©ï¸ CONTINUAR EDITANDO</button>
    </div>
  </div>
  
  <!-- Modal ReuniÃ£o -->
  <div class="modal" id="modalReuniao">
    <div class="modal-content">
      <div class="modal-header">ğŸ“‹ Cadastrar ReuniÃ£o</div>
      <label class="modal-label">Data da ReuniÃ£o:</label>
      <div style="display: flex; gap: 10px; align-items: center;">
        <input type="date" class="modal-input" id="inputDataReuniao" style="flex: 1;">
        <button class="modal-btn modal-btn-secondary" onclick="document.getElementById('inputDataReuniao').showPicker()">ğŸ“…</button>
      </div>
      <label class="modal-label">Local da ReuniÃ£o:</label>
      <input type="text" class="modal-input" id="inputLocalReuniao" placeholder="ParnaÃ­ba/PI">
      <p style="margin-top:12px;color:#6c757d;font-size:0.85em;">
        ğŸŸ¢ Verde = Presente | ğŸŸ¡ Amarelo = Justificou | ğŸ”´ Vermelho = Faltou
      </p>
      <button class="modal-btn modal-btn-primary" onclick="iniciarReuniao()">âœ… Iniciar Lista de PresenÃ§a</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalReuniao')">âŒ Cancelar</button>
    </div>
  </div>
  
  <!-- Modal Editar Bolinha -->
  <div class="modal" id="modalEditarBolinha">
    <div class="modal-content">
      <div class="modal-header">âœï¸ Editar PresenÃ§a</div>
      <label class="modal-label">Data da ReuniÃ£o:</label>
      <input type="date" class="modal-input" id="inputEditarDataReuniao">
      <label class="modal-label">Local da ReuniÃ£o:</label>
      <input type="text" class="modal-input" id="inputEditarLocalReuniao" placeholder="ParnaÃ­ba/PI">
      <label class="modal-label">Status:</label>
      <div style="display: flex; gap: 10px; margin-bottom: 15px;">
        <div class="bolinha-grande verde" onclick="selecionarStatusBolinha('verde')" id="btnStatusVerde"></div>
        <div class="bolinha-grande amarelo" onclick="selecionarStatusBolinha('amarelo')" id="btnStatusAmarelo"></div>
        <div class="bolinha-grande vermelho" onclick="selecionarStatusBolinha('vermelho')" id="btnStatusVermelho"></div>
      </div>
      <button class="modal-btn modal-btn-primary" onclick="salvarEdicaoBolinha()">ğŸ’¾ SALVAR</button>
      <button class="modal-btn" style="background: #ff6b6b; color: white;" onclick="excluirBolinha()">ğŸ—‘ï¸ EXCLUIR</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalEditarBolinha')">CANCELAR</button>
    </div>
  </div>
  
  <!-- Modal Paleta de Cores -->
  <div class="modal" id="modalPaletaCores">
    <div class="modal-content">
      <div class="modal-header">ğŸ¨ Escolha a Cor de Fundo</div>
      <div class="color-picker-grid">
        <div class="color-option" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);" onclick="mudarCorFundo('linear-gradient(135deg, #667eea 0%, #764ba2 100%)')"></div>
        <div class="color-option" style="background: linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%);" onclick="mudarCorFundo('linear-gradient(135deg, #2193b0 0%, #6dd5ed 100%)')"></div>
        <div class="color-option" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);" onclick="mudarCorFundo('linear-gradient(135deg, #f093fb 0%, #f5576c 100%)')"></div>
        <div class="color-option" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);" onclick="mudarCorFundo('linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)')"></div>
        <div class="color-option" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);" onclick="mudarCorFundo('linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)')"></div>
        <div class="color-option" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);" onclick="mudarCorFundo('linear-gradient(135deg, #fa709a 0%, #fee140 100%)')"></div>
        <div class="color-option" style="background: linear-gradient(135deg, #30cfd0 0%, #330867 100%);" onclick="mudarCorFundo('linear-gradient(135deg, #30cfd0 0%, #330867 100%)')"></div>
        <div class="color-option" style="background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);" onclick="mudarCorFundo('linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)')"></div>
      </div>
      <button class="modal-btn modal-btn-primary" onclick="fecharModal('modalPaletaCores')">âœ… OK</button>
    </div>
  </div>
  
  <!-- Modal Escolher Emoji -->
  <div class="modal" id="modalEscolherEmoji">
    <div class="modal-content">
      <div class="modal-header">ğŸ­ Escolher <span id="tipoEmojiTitulo">Pessoa</span></div>
      
      <!-- SeÃ§Ã£o de Emojis para CÃ¢maras -->
      <div style="margin: 15px 0; padding: 10px; background: #f8f9fa; border-radius: 8px;">
        <div style="font-weight: bold; color: #495057; margin-bottom: 8px; text-align: center;">ğŸ›ï¸ Emojis para CÃ¢maras</div>
        <div class="emoji-grid">
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ›ï¸')">ğŸ›ï¸</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸŒ¿')">ğŸŒ¿</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸŒŠ')">ğŸŒŠ</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ ')">ğŸ </div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸŒ')">ğŸŒ</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ“š')">ğŸ“š</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ”¬')">ğŸ”¬</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ’¼')">ğŸ’¼</div>
          <div class="emoji-option" onclick="selecionarEmoji('âš–ï¸')">âš–ï¸</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ­')">ğŸ­</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸŒ¾')">ğŸŒ¾</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ£')">ğŸ£</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸš¤')">ğŸš¤</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ–ï¸')">ğŸ–ï¸</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ—ºï¸')">ğŸ—ºï¸</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ“Š')">ğŸ“Š</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ”')">ğŸ”</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ’¡')">ğŸ’¡</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸ¤')">ğŸ¤</div>
          <div class="emoji-option" onclick="selecionarEmoji('ğŸŒŸ')">ğŸŒŸ</div>
        </div>
      </div>

      <!-- Emojis de Pessoas (existente) -->
      <div class="emoji-grid">
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ»')">ğŸ‘¨ğŸ»</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ¼')">ğŸ‘¨ğŸ¼</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ½')">ğŸ‘¨ğŸ½</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ¾')">ğŸ‘¨ğŸ¾</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ¿')">ğŸ‘¨ğŸ¿</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©')">ğŸ‘©</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ»')">ğŸ‘©ğŸ»</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ½')">ğŸ‘©ğŸ½</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ¾')">ğŸ‘©ğŸ¾</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ¿')">ğŸ‘©ğŸ¿</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨â€ğŸ¦°')">ğŸ‘¨â€ğŸ¦°</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ»â€ğŸ¦°')">ğŸ‘¨ğŸ»â€ğŸ¦°</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ½â€ğŸ¦°')">ğŸ‘¨ğŸ½â€ğŸ¦°</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©â€ğŸ¦°')">ğŸ‘©â€ğŸ¦°</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ»â€ğŸ¦°')">ğŸ‘©ğŸ»â€ğŸ¦°</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ¾â€ğŸ¦°')">ğŸ‘©ğŸ¾â€ğŸ¦°</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨â€ğŸ¦±')">ğŸ‘¨â€ğŸ¦±</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ¼â€ğŸ¦±')">ğŸ‘¨ğŸ¼â€ğŸ¦±</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ¿â€ğŸ¦±')">ğŸ‘¨ğŸ¿â€ğŸ¦±</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©â€ğŸ¦±')">ğŸ‘©â€ğŸ¦±</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ¼â€ğŸ¦±')">ğŸ‘©ğŸ¼â€ğŸ¦±</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ½â€ğŸ¦±')">ğŸ‘©ğŸ½â€ğŸ¦±</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨â€ğŸ¦³')">ğŸ‘¨â€ğŸ¦³</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ¼â€ğŸ¦³')">ğŸ‘¨ğŸ¼â€ğŸ¦³</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ¾â€ğŸ¦³')">ğŸ‘¨ğŸ¾â€ğŸ¦³</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©â€ğŸ¦³')">ğŸ‘©â€ğŸ¦³</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ»â€ğŸ¦³')">ğŸ‘©ğŸ»â€ğŸ¦³</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ¿â€ğŸ¦³')">ğŸ‘©ğŸ¿â€ğŸ¦³</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨â€ğŸ¦²')">ğŸ‘¨â€ğŸ¦²</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘¨ğŸ½â€ğŸ¦²')">ğŸ‘¨ğŸ½â€ğŸ¦²</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©â€ğŸ¦²')">ğŸ‘©â€ğŸ¦²</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ‘©ğŸ¾â€ğŸ¦²')">ğŸ‘©ğŸ¾â€ğŸ¦²</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ§‘')">ğŸ§‘</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ§‘ğŸ»')">ğŸ§‘ğŸ»</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ§‘ğŸ½')">ğŸ§‘ğŸ½</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ§‘ğŸ¿')">ğŸ§‘ğŸ¿</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ¢')">ğŸ¢</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸ«')">ğŸ«</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸŒ³')">ğŸŒ³</div>
        <div class="emoji-option" onclick="selecionarEmoji('ğŸŸ')">ğŸŸ</div>
        <div class="emoji-option" onclick="selecionarEmoji('â“')">â“</div>
      </div>
      
      <hr style="margin: 15px 0;">
      <label class="modal-label">ğŸ“· Ou envie uma foto/logo:</label>
      <input type="file" id="inputFotoEmoji" accept="image/*" style="margin-bottom: 12px;">
      <button class="modal-btn modal-btn-primary" onclick="uploadFotoEmoji()">ğŸ“· Usar Foto</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalEscolherEmoji')">Cancelar</button>
    </div>
  </div>
  
  <!-- Modal Ver/Editar CurrÃ­culo -->
  <div class="modal" id="modalVerEditarCurriculo">
    <div class="modal-content">
      <div class="modal-header" id="tituloModalCurriculo">ğŸ“„ CurrÃ­culo</div>
      <textarea class="modal-textarea" id="curriculoConteudo" style="min-height:130px;" readonly></textarea>
      <button class="modal-btn modal-btn-primary" id="btnSalvarCurriculo" onclick="salvarCurriculo()" style="display: none;">ğŸ’¾ Salvar</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalVerEditarCurriculo')">Fechar</button>
    </div>
  </div>
  
  <!-- Modal Adicionar Membro -->
  <div class="modal" id="modalAdicionarMembro">
    <div class="modal-content">
      <div class="modal-header">ğŸ‘¤ Adicionar Membro</div>
      <label class="modal-label">Nome Completo:</label>
      <input type="text" class="modal-input" id="inputNomeMembro" placeholder="Ex: JoÃ£o da Silva">
      <label class="modal-label">Entidade/InstituiÃ§Ã£o:</label>
      <input type="text" class="modal-input" id="inputEntidadeMembro" placeholder="Ex: Secretaria de Meio Ambiente">
      <label class="modal-label">MunicÃ­pio/UF:</label>
      <input type="text" class="modal-input" id="inputMunicipioMembro" placeholder="Ex: ParnaÃ­ba/PI">
      <label class="modal-label">Estado:</label>
      <select class="modal-select" id="inputEstadoMembro">
        <option value="">Selecione...</option>
        <option value="AC">Acre (AC)</option>
        <option value="AL">Alagoas (AL)</option>
        <option value="AP">AmapÃ¡ (AP)</option>
        <option value="AM">Amazonas (AM)</option>
        <option value="BA">Bahia (BA)</option>
        <option value="CE">CearÃ¡ (CE)</option>
        <option value="DF">Distrito Federal (DF)</option>
        <option value="ES">EspÃ­rito Santo (ES)</option>
        <option value="GO">GoiÃ¡s (GO)</option>
        <option value="MA">MaranhÃ£o (MA)</option>
        <option value="MT">Mato Grosso (MT)</option>
        <option value="MS">Mato Grosso do Sul (MS)</option>
        <option value="MG">Minas Gerais (MG)</option>
        <option value="PA">ParÃ¡ (PA)</option>
        <option value="PB">ParaÃ­ba (PB)</option>
        <option value="PR">ParanÃ¡ (PR)</option>
        <option value="PE">Pernambuco (PE)</option>
        <option value="PI">PiauÃ­ (PI)</option>
        <option value="RJ">Rio de Janeiro (RJ)</option>
        <option value="RN">Rio Grande do Norte (RN)</option>
        <option value="RS">Rio Grande do Sul (RS)</option>
        <option value="RO">RondÃ´nia (RO)</option>
        <option value="RR">Roraima (RR)</option>
        <option value="SC">Santa Catarina (SC)</option>
        <option value="SP">SÃ£o Paulo (SP)</option>
        <option value="SE">Sergipe (SE)</option>
        <option value="TO">Tocantins (TO)</option>
      </select>
      <label class="modal-label">Telefone:</label>
      <input type="text" class="modal-input" id="inputTelefoneMembro" placeholder="00 - 00000-0000">
      <label class="modal-label">E-mail:</label>
      <input type="email" class="modal-input" id="inputEmailMembro" placeholder="exemplo@email.com">
      <label class="modal-label">Mini CurrÃ­culo:</label>
      <textarea class="modal-textarea" id="inputCurriculoMembro" placeholder="FormaÃ§Ã£o, experiÃªncias, atuaÃ§Ã£o..."></textarea>
      <label class="modal-label">ğŸ“… Data da Posse:</label>
      <input type="date" class="modal-input" id="inputDataPosseMembro">
      <label class="modal-label">â³ Data do TÃ©rmino do Mandato:</label>
      <input type="date" class="modal-input" id="inputDataMandatoMembro">
      <label class="modal-label">Tipo:</label>
      <select class="modal-select" id="inputTipoMembro">
        <option value="titular">Titular</option>
        <option value="suplente">Suplente</option>
      </select>
      <button class="modal-btn modal-btn-primary" onclick="confirmarAdicionarMembro()">âœ… Adicionar</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalAdicionarMembro')">Cancelar</button>
    </div>
  </div>
  
  <!-- Modal Adicionar Atividade -->
  <div class="modal" id="modalAdicionarAtividade">
    <div class="modal-content">
      <div class="modal-header" id="headerAtividade">âœï¸ Adicionar Atividade</div>
      <label class="modal-label">Objetivo:</label>
      <textarea class="modal-textarea" id="inputObjetivoAtiv"></textarea>
      <label class="modal-label">ResponsÃ¡vel:</label>
      <input type="text" class="modal-input" id="inputResponsavelAtiv">
      <label class="modal-label">Prazo:</label>
      <input type="date" class="modal-input" id="inputPrazoAtiv">
      <label class="modal-label">Resultado:</label>
      <textarea class="modal-textarea" id="inputResultadoAtiv"></textarea>
      <button class="modal-btn modal-btn-primary" onclick="confirmarAdicionarAtividade()">âœ… Salvar</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalAdicionarAtividade')">Cancelar</button>
    </div>
  </div>
  
  <!-- Modal Status Atividade -->
  <div class="modal" id="modalStatusAtividade">
    <div class="modal-content">
      <div class="modal-header">ğŸ“‹ Status da Atividade</div>
      <p style="margin-bottom:18px;font-size:1em;">VocÃª preencheu o campo "Resultado". Qual o status desta atividade?</p>
      <button class="modal-btn modal-btn-primary" onclick="marcarStatusAtividade(true)" style="background:#2ecc71;">âœ… Tarefa ConcluÃ­da</button>
      <button class="modal-btn modal-btn-secondary" onclick="marcarStatusAtividade(false)" style="background:#ffd43b;color:#333;">âŒ Tarefa NÃ£o ConcluÃ­da</button>
    </div>
  </div>
  
  <!-- Modal Criar GT -->
  <div class="modal" id="modalCriarGT">
    <div class="modal-content">
      <div class="modal-header">ğŸ“‹ Criar/Editar Grupo de Trabalho</div>
      <label class="modal-label">TÃ­tulo:</label>
      <input type="text" class="modal-input" id="inputTituloGT">
      <label class="modal-label">Objetivo:</label>
      <textarea class="modal-textarea" id="inputObjetivoGT"></textarea>
      <label class="modal-label">ResponsÃ¡vel:</label>
      <input type="text" class="modal-input" id="inputResponsavelGT">
      <label class="modal-label">Componentes:</label>
      <textarea class="modal-textarea" id="inputComponentesGT"></textarea>
      <label class="modal-label">Resultado:</label>
      <textarea class="modal-textarea" id="inputResultadoGT"></textarea>
      <button class="modal-btn modal-btn-primary" onclick="confirmarCriarGT()">âœ… Salvar GT</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalCriarGT')">Cancelar</button>
    </div>
  </div>

  <!-- Modal Criar CÃ¢mara TemÃ¡tica -->
  <!-- Modal Criar CÃ¢mara TemÃ¡tica - VERSÃƒO SIMPLIFICADA -->
<div class="modal" id="modalCriarCamara">
  <div class="modal-content">
    <div class="modal-header">ğŸ›ï¸ Criar CÃ¢mara TemÃ¡tica</div>
    
    <label class="modal-label">Nome da CÃ¢mara:</label>
    <input type="text" class="modal-input" id="inputNomeCamara" placeholder="Ex: EducaÃ§Ã£o Ambiental">
    
    <label class="modal-label">Escolha um Emoji:</label>
    <div class="emoji-grid-simples" style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin: 15px 0;">
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸ”¬')" title="Pesquisa">ğŸ”¬</div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸ›¡ï¸')" title="ProteÃ§Ã£o">ğŸ›¡ï¸</div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸ‘¥')" title="Uso PÃºblico">ğŸ‘¥</div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸŒ¿')" title="GestÃ£o Socioambiental">ğŸŒ¿</div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('âš ï¸')" title="Impactos Ambientais">âš ï¸</div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸ ')" title="Comunidades">ğŸ </div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸ£')" title="Pesca">ğŸ£</div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸ’§')" title="Recursos HÃ­dricos">ğŸ’§</div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸ ')" title="Biodiversidade">ğŸ </div>
      <div class="emoji-option-simples" onclick="selecionarEmojiCamara('ğŸ“Š')" title="Monitoramento">ğŸ“Š</div>
    </div>
    
    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 8px;">
      <span>Emoji selecionado:</span>
      <span id="emojiSelecionadoPreview" style="font-size: 1.5em;">ğŸ”¬</span>
      <input type="hidden" id="inputEmojiCamara" value="ğŸ”¬">
    </div>
    
    <p style="margin-top:8px;color:#6c757d;font-size:0.8em;">
      ğŸ’¡ O identificador (slug) serÃ¡ gerado automaticamente a partir do nome
    </p>
    
    <div style="display: flex; gap: 10px; margin-top: 20px;">
      <button class="modal-btn modal-btn-primary" onclick="confirmarCriarCamara()" style="flex: 1;">âœ… Criar CÃ¢mara</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalCriarCamara')" style="flex: 1;">âŒ Cancelar</button>
    </div>
  </div>
</div>

  <!-- Modal Editar Nome CÃ¢mara -->
  <div class="modal" id="modalEditarNomeCamara">
    <div class="modal-content">
      <div class="modal-header">âœï¸ Editar Nome da CÃ¢mara</div>
      <label class="modal-label">Novo Nome:</label>
      <input type="text" class="modal-input" id="inputNovoNomeCamara" placeholder="Ex: ğŸ”¬ Pesquisa e Monitoramento">
      <p style="margin-top:8px;color:#6c757d;font-size:0.8em;">ğŸ’¡ VocÃª pode incluir emoji no nome</p>
      <button class="modal-btn modal-btn-primary" onclick="confirmarEditarNomeCamara()">âœ… Salvar</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalEditarNomeCamara')">Cancelar</button>
    </div>
  </div>

  
  <!-- Modal Criar/Editar Pasta -->
  <div class="modal" id="modalCriarPasta">
    <div class="modal-content">
      <div class="modal-header" id="tituloCriarPasta">ğŸ“‚ Nova Pasta</div>
      <input type="text" class="modal-input" id="inputNomePasta" placeholder="Nome da pasta">
      <button class="modal-btn modal-btn-primary" onclick="confirmarCriarPasta()">âœ… Salvar</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalCriarPasta')">Cancelar</button>
    </div>
  </div>

  <!-- Modal Adicionar Documento -->
  <div class="modal" id="modalAdicionarDocumento">
    <div class="modal-content">
      <div class="modal-header" id="tituloAdicionarDoc">ğŸ“„ Novo Documento</div>
      <input type="text" class="modal-input" id="inputNomeDocumento" placeholder="Nome do documento">
      <input type="text" class="modal-input" id="inputLinkDocumento" placeholder="https://exemplo.com/documento.pdf">
      <p style="margin-top:8px;color:#6c757d;font-size:0.8em;">ğŸ’¡ Cole a URL completa do documento</p>
      <button class="modal-btn modal-btn-primary" onclick="confirmarAdicionarDocumento()">âœ… Salvar</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalAdicionarDocumento')">Cancelar</button>
    </div>
  </div>

  <!-- Modal Escolher Tipo de Item -->
  <div class="modal" id="modalEscolherTipoItem">
    <div class="modal-content">
      <div class="modal-header">â• Adicionar Item</div>
      <p style="margin-bottom:18px;">Escolha o que deseja adicionar:</p>
      <button class="modal-btn modal-btn-primary" onclick="escolherTipoItem('pasta')" style="width:100%;margin-bottom:10px;">ï¿½ï¿½ Nova Subpasta</button>
      <button class="modal-btn modal-btn-primary" onclick="escolherTipoItem('documento')" style="width:100%;margin-bottom:10px;">ğŸ“„ Novo Documento</button>
      <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalEscolherTipoItem')">Cancelar</button>
    </div>
  </div>


  <!-- TELA PRINCIPAL -->
  <div class="tela active" id="telaPrincipal"> 
    <div class="main-content">
      <div class="header">
        <h1 class="editable" contenteditable="false">Sistema de GestÃ£o de Conselho Consultivo</h1>
        <p>GestÃ£o Completa de Membros e Atividades</p>
        <div class="reuniao-info">
          <span>PrÃ³xima ReuniÃ£o:</span> 
          <span class="editable-inline" id="dataProximaReuniao" contenteditable="false">--/--/----</span> | 
          <span>Local:</span> 
          <span class="editable-inline" id="localProximaReuniao" contenteditable="false">---</span>
        </div>
      </div>
      
      <!-- PRESIDÃŠNCIA -->
      <div class="presidencia-container">
        <div class="presidencia-header" onclick="togglePresidencia()">
          <div class="presidencia-titulo">
            <span>ğŸ›ï¸</span>
            <span>PRESIDÃŠNCIA DO CONSELHO</span>
          </div>
          <div class="presidencia-seta">â–¼</div>
        </div>
        
        <div class="presidencia-conteudo">
          <div class="cadeira presidencia" style="background: white; border-radius: 8px;">
            <div class="cadeira-header">
              <span class="icone-cadeira">ğŸª‘</span>
              <span class="numero-cadeira">Presidente</span>
            </div>
            <div class="cadeira-membros-container" id="presidenciaContainer">
              <!-- Presidente serÃ¡ adicionado via JSON -->
            </div>
            <button class="btn-add-membro" onclick="abrirModalAdicionarMembroPresidencia()">â• Adicionar Presidente</button>
          </div>
        </div>
      </div>

      <div class="container">
        
        <!-- PODER PÃšBLICO -->
        <div class="grupo" id="poder-publico">
          <div class="grupo-header" onclick="toggleGrupo(this)">
            <div class="titulo-grupo">âš–ï¸ PODER PÃšBLICO</div>
            <div class="grupo-seta">â–¼</div>
          </div>
          
          <div class="grupo-conteudo">
            <div class="grupo-contador">
              <span>ğŸ“‚ Setores: <strong class="contador-setores">0</strong></span>
              <span>ğŸª‘ Cadeiras: <strong class="contador-cadeiras-total">0</strong></span>
            </div>
            <button class="btn-add-setor" onclick="adicionarSetor('poder-publico')">â• Setor</button>
          </div>
        </div>

        <!-- SOCIEDADE CIVIL -->
        <div class="grupo" id="sociedade-civil">
          <div class="grupo-header" onclick="toggleGrupo(this)">
            <div class="titulo-grupo">ğŸ¤ SOCIEDADE CIVIL</div>
            <div class="grupo-seta">â–¼</div>
          </div>
          
          <div class="grupo-conteudo">
            <div class="grupo-contador">
              <span>ğŸ“‚ Setores: <strong class="contador-setores">0</strong></span>
              <span>ğŸª‘ Cadeiras: <strong class="contador-cadeiras-total">0</strong></span>
            </div>
            <button class="btn-add-setor" onclick="adicionarSetor('sociedade-civil')">â• Setor</button>
          </div>
        </div>
        
      </div>
      
      <!-- CÃ‚MARAS TEMÃTICAS -->
      <div class="camaras-container">
        <div class="camaras-titulo">ğŸ›ï¸ CÃ‚MARAS TEMÃTICAS</div>
        <button class="btn-criar-camara" onclick="abrirModalCriarCamara()">â• Criar Nova CÃ¢mara TemÃ¡tica</button>
        <div class="camaras-grid" id="camarasGrid">
          <!-- CÃ¢maras serÃ£o adicionadas via JSON ou manualmente -->
        </div>
      </div>
    </div>
  </div>

  <!-- TELA PRESENÃ‡A -->
  <div class="tela" id="telaPresenca">
    <div class="tela-presenca">
      <div class="header">
        <h1>ğŸ“‹ Lista de PresenÃ§a</h1>
        <div class="reuniao-info">
          <span>ReuniÃ£o:</span> 
          <span id="dataReuniaoAtual">--/--/----</span> | 
          <span>Local:</span> 
          <span id="localReuniaoAtual">---</span>
        </div>
      </div>
      
      <div class="lista-presenca" id="listaPresenca">
        <!-- Lista de membros serÃ¡ preenchida via JavaScript -->
      </div>
      
      <div class="botoes-reuniao-fixo">
        <button class="btn-reuniao-fixo btn-finalizar-reuniao" onclick="finalizarReuniao()">âœ… Finalizar ReuniÃ£o</button>
        <button class="btn-reuniao-fixo btn-abortar-reuniao-fixo" onclick="abortarReuniao()">âŒ Abortar ReuniÃ£o</button>
        <button class="btn-reuniao-fixo" style="background: #667eea;" onclick="imprimirListaPresenca()">ğŸ–¨ï¸ Imprimir Lista</button>
      </div>
    </div>
  </div>

  <!-- TELA ANÃLISES -->
  <div class="tela" id="telaAnalises">
    <div class="analises-container">
      <h1 style="text-align:center;color:#2c3e50;margin-bottom:25px;font-size:1.8em;">ğŸ“Š AnÃ¡lises do Conselho</h1>
      <div class="analises-menu">
        <button class="analise-btn" onclick="mostrarAnalise('presenca')">ğŸ“ˆ PresenÃ§a</button>
        <button class="analise-btn active" onclick="mostrarAnalise('composicao')">ğŸ‘¥ ComposiÃ§Ã£o</button>
        <button class="analise-btn" onclick="mostrarAnalise('estados')">ğŸ—ºï¸ Estados</button>
        <button class="analise-btn" onclick="mostrarAnalise('atividades')">âœ… Atividades</button>
        <button class="analise-btn" style="background: #2ecc71;" onclick="gerarRelatorioAnalises()">ğŸ“„ Gerar RelatÃ³rio</button>
      </div>
      
      <div class="analise-content" id="analisePresenca">
        <h2 style="margin-bottom:18px;font-size:1.4em;">Ranking de Assiduidade</h2>
        <div id="rankingContainer">
          <p class="mensagem-vazio">Nenhum registro de presenÃ§a encontrado</p>
        </div>
      </div>
      
      <div class="analise-content active" id="analiseComposicao">
        <div id="composicaoContainer">
          <p class="mensagem-vazio">Nenhum conselheiro cadastrado</p>
        </div>
      </div>
      
      <div class="analise-content" id="analiseEstados">
        <div id="estadosContainer">
          <p class="mensagem-vazio">Nenhum conselheiro cadastrado</p>
        </div>
      </div>
      
      <div class="analise-content" id="analiseAtividades">
        <div id="atividadesContainer">
          <p class="mensagem-vazio">Nenhuma atividade cadastrada</p>
        </div>
      </div>
    </div>
  </div>

  <div class="tela" id="telaDocumentos">
    <div class="documentos-container">
      <div class="documentos-header">
        <div class="documentos-titulo">ğŸ“ DOCUMENTOS</div>
        <p style="color: #6c757d; font-size: 0.95em;">GestÃ£o de Documentos e LegislaÃ§Ã£o</p>
      </div>

      <button class="btn-criar-pasta-raiz" onclick="abrirModalCriarPasta()">â• Criar Nova Pasta</button>

      <div class="documentos-lista" id="documentosLista">
        <div class="mensagem-vazio-docs">
          ğŸ“­ Nenhum documento cadastrado
        </div>
      </div>
    </div>
  </div>

  <script>
    // ============================================
    // VARIÃVEIS GLOBAIS
    // ============================================
    let modoEdicao = false;
    let modoReuniao = false;
    let elementoEmojiAtual = null;
    let tipoEmojiAtual = '';
    let elementoAtividadeAtual = null;
    let isAtividadeGT = false;
    let elementoGTAtual = null;
    let atividadeEmEdicao = null;
    let camaraEdicaoNomeAtual = null;
    let cadeiraAtualAdicionarMembro = null;
    let membroAtualEditando = null;
    let reuniaoAtual = null;
    let bolinhaEditando = null;
    let emojiContext = null;

    // ============================================
    // SISTEMA DE COLLAPSE/ACORDEÃƒO
    // ============================================
    
        // Document Management Globals
    let documentosData = { estrutura: [] };
    let pastaParenteAtual = null;
    let itemEditandoAtual = null;
    let tipoItemEditando = null;
    let pastaAtualEdicao = null;
    let itemAtualEdicao = null;

function togglePresidencia() {
      const header = document.querySelector('.presidencia-header');
      const conteudo = document.querySelector('.presidencia-conteudo');
      
      header.classList.toggle('active');
      conteudo.classList.toggle('active');
    }
    
    function toggleGrupo(elemento) {
      const header = elemento;
      const grupo = header.closest('.grupo');
      const conteudo = grupo.querySelector('.grupo-conteudo');
      
      header.classList.toggle('active');
      conteudo.classList.toggle('active');
    }
    
    function toggleSetor(elemento) {
      const wrapper = elemento.closest('.setor-header-wrapper');
      const setor = wrapper.closest('.setor');
      const conteudo = setor.querySelector('.setor-conteudo');
      
      wrapper.classList.toggle('active');
      conteudo.classList.toggle('active');
    }
    
    function expandirTudo() {
      document.querySelectorAll('.presidencia-header, .grupo-header, .setor-header-wrapper').forEach(el => {
        el.classList.add('active');
      });
      document.querySelectorAll('.presidencia-conteudo, .grupo-conteudo, .setor-conteudo').forEach(el => {
        el.classList.add('active');
      });
    }
    
    function colapsarTudo() {
      document.querySelectorAll('.presidencia-header, .grupo-header, .setor-header-wrapper').forEach(el => {
        el.classList.remove('active');
      });
      document.querySelectorAll('.presidencia-conteudo, .grupo-conteudo, .setor-conteudo').forEach(el => {
        el.classList.remove('active');
      });
    }

    // ============================================
    // GERAR SLUG AUTOMÃTICO PARA CÃ‚MARAS
    // ============================================
    function gerarSlug(nome) {
        return nome
            .toLowerCase()
            .normalize('NFD').replace(/[\u0300-\u036f]/g, '')
            .replace(/[^a-z0-9\s-]/g, '')
            .replace(/\s+/g, '-')
            .replace(/-+/g, '-')
            .trim();
    }

    function gerarSlugUnico(nomeBase) {
        let slug = gerarSlug(nomeBase);
        let slugOriginal = slug;
        let contador = 1;
        
        while (document.querySelector(`.camara[data-camara="${slug}"]`)) {
            slug = `${slugOriginal}-${contador}`;
            contador++;
        }
        
        return slug;
    }

    // ============================================
    // SELETOR DE EMOJI PARA CÃ‚MARAS
    // ============================================
    // ============================================
// SELETOR DE EMOJI SIMPLIFICADO PARA CÃ‚MARAS
// ============================================
function selecionarEmojiCamara(emoji) {
    document.getElementById('inputEmojiCamara').value = emoji;
    document.getElementById('emojiSelecionadoPreview').textContent = emoji;
    
    // Remover seleÃ§Ã£o anterior
    document.querySelectorAll('.emoji-option-simples').forEach(el => {
        el.classList.remove('selecionado');
    });
    
    // Adicionar seleÃ§Ã£o atual
    event.target.classList.add('selecionado');
}

function abrirModalCriarCamara() {
    if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
    }
    
    // Resetar o modal
    document.getElementById('inputNomeCamara').value = '';
    document.getElementById('inputEmojiCamara').value = 'ğŸ”¬';
    document.getElementById('emojiSelecionadoPreview').textContent = 'ğŸ”¬';
    
    // Resetar seleÃ§Ã£o de emojis
    document.querySelectorAll('.emoji-option-simples').forEach(el => {
        el.classList.remove('selecionado');
    });
    
    // Selecionar o primeiro emoji por padrÃ£o
    document.querySelector('.emoji-option-simples').classList.add('selecionado');
    
    document.getElementById('modalCriarCamara').classList.add('active');
}

function confirmarCriarCamara() {
    const nome = document.getElementById('inputNomeCamara').value;
    const emoji = document.getElementById('inputEmojiCamara').value || 'ğŸ”¬';
    
    if(!nome) {
        alert('âš ï¸ Preencha o nome da cÃ¢mara!');
        return;
    }
    
    const slug = gerarSlugUnico(nome);
    
    const grid = document.getElementById('camarasGrid');
    const novaCamara = document.createElement('div');
    novaCamara.className = 'camara';
    novaCamara.dataset.camara = slug;
    novaCamara.innerHTML = `
        <div class="camara-header">
            <div class="camara-nome">${emoji} ${nome}</div>
            <div class="camara-contador">0 membros</div>
            <button class="btn-editar-nome-camara" onclick="editarNomeCamara(this)">âœï¸</button>
            <button class="btn-remover-camara" onclick="removerCamara(this)">ğŸ—‘ï¸</button>
        </div>
        <div class="camara-membros"></div>
        <div class="camara-atividades"></div>
        <div class="camara-gts"></div>
        <button class="btn-add-atividade" onclick="abrirModalAdicionarAtividade(this, false)">âœ… Atividade</button>
        <button class="btn-add-gt" onclick="abrirModalCriarGT(this)">ğŸ“‹ GT</button>
    `;
    
    grid.appendChild(novaCamara);
    configurarDragAndDrop();
    
    fecharModal('modalCriarCamara');
    alert(`âœ… CÃ¢mara "${nome}" criada!\n\nğŸ”— Slug gerado: ${slug}`);
    
    // Limpar campos
    document.getElementById('inputNomeCamara').value = '';

    }

    // ============================================
    // ATUALIZAR CONTADORES
    // ============================================
    function atualizarContadoresGrupo(grupoId) {
      const grupo = document.getElementById(grupoId);
      if(!grupo) return;
      
      const numSetores = grupo.querySelectorAll('.setor').length;
      const numCadeiras = grupo.querySelectorAll('.cadeira').length;
      
      const contadorSetores = grupo.querySelector('.contador-setores');
      const contadorCadeiras = grupo.querySelector('.contador-cadeiras-total');
      
      if(contadorSetores) contadorSetores.textContent = numSetores;
      if(contadorCadeiras) contadorCadeiras.textContent = numCadeiras;
    }

    function atualizarContadorCadeiras(setor) {
      const numCadeiras = setor.querySelectorAll('.cadeira').length;
      const contador = setor.querySelector('.contador-cadeiras');
      if(contador) {
        contador.textContent = `${numCadeiras} cadeira${numCadeiras !== 1 ? 's' : ''}`;
      }
      
      const grupoId = setor.closest('.grupo')?.id;
      if(grupoId) {
        atualizarContadoresGrupo(grupoId);
      }
    }

    function atualizarContadorCamara(camara) {
      const numMembros = camara.querySelectorAll('.camara-membro').length;
      const contador = camara.querySelector('.camara-contador');
      if(contador) {
        contador.textContent = `${numMembros} membro${numMembros !== 1 ? 's' : ''}`;
      }
    }

    // ============================================
    // MENU
    // ============================================
    function toggleMenu() {
      document.getElementById('menuDropdown').classList.toggle('active');
    }

    function irParaTela(tela) {
      document.querySelectorAll('.tela').forEach(t => t.classList.remove('active'));
      if(tela === 'principal') {
        document.getElementById('telaPrincipal').classList.add('active');
      } else if(tela === 'presenca') {
        document.getElementById('telaPresenca').classList.add('active');
      } else if(tela === 'analises') {
        document.getElementById('telaAnalises').classList.add('active');
        gerarAnalises();
      } else if(tela === 'documentos') {
        document.getElementById('telaDocumentos').classList.add('active');
        renderizarDocumentos();
      
      }
      toggleMenu();
    }

    // ============================================
    // MODO EDIÃ‡ÃƒO
    // ============================================
    function solicitarSenha() {
      toggleMenu();
      document.getElementById('modalSenha').classList.add('active');
      document.getElementById('inputSenha').value = '';
      document.getElementById('inputSenha').focus();
    }

    function verificarSenha() {
      const senha = document.getElementById('inputSenha').value;
      if(senha === '123') {
        fecharModal('modalSenha');
        ativarModoEdicao();
      } else {
        alert('âŒ Senha incorreta!');
      }
    }

    function ativarModoEdicao() {
      modoEdicao = true;
      document.body.classList.add('edit-mode');
      document.getElementById('editIndicator').classList.add('active');
      document.getElementById('btnCancelarEdicao').classList.add('active');
      document.getElementById('menuCancelarEdicao').style.display = 'block';
      
      document.querySelectorAll('.editable').forEach(el => {
        el.contentEditable = 'true';
      });
      document.querySelectorAll('.editable-inline').forEach(el => {
        el.contentEditable = 'true';
      });

      document.querySelectorAll('.bolinha-presenca').forEach(bolinha => {
        bolinha.onclick = function() { editarBolinhaPresenca(this); };
      });

      colapsarTudo();

      alert('ğŸ”“ Modo de ediÃ§Ã£o ativado!\n\nAgora vocÃª pode:\nâ€¢ Editar textos\nâ€¢ Adicionar/remover setores e cadeiras\nâ€¢ Criar cÃ¢maras temÃ¡ticas\nâ€¢ Arrastar membros\nâ€¢ Editar currÃ­culos\nâ€¢ Editar presenÃ§as (clique nas bolinhas)');
    }

    function finalizarEdicao() {
      toggleMenu();
      document.getElementById('modalFinalizarEdicao').classList.add('active');
    }

    function salvarEFinalizarEdicao() {
      salvarJSON();
      finalizarModoEdicao();
    }

    function finalizarSemSalvar() {
      if(confirm('âš ï¸ Finalizar sem salvar?\n\nTodas as alteraÃ§Ãµes serÃ£o perdidas!')) {
        finalizarModoEdicao();
      }
    }

    function finalizarModoEdicao() {
      modoEdicao = false;
      document.body.classList.remove('edit-mode');
      document.getElementById('editIndicator').classList.remove('active');
      document.getElementById('btnCancelarEdicao').classList.remove('active');
      document.getElementById('menuCancelarEdicao').style.display = 'none';
      
      document.querySelectorAll('.editable').forEach(el => {
        el.contentEditable = 'false';
      });
      document.querySelectorAll('.editable-inline').forEach(el => {
        el.contentEditable = 'false';
      });

      document.querySelectorAll('.bolinha-presenca').forEach(bolinha => {
        bolinha.onclick = null;
      });

      fecharModal('modalFinalizarEdicao');
      alert('âœ… Modo de ediÃ§Ã£o finalizado!');
    }

    function cancelarEdicaoRapido() {
      if(confirm('â“ Cancelar ediÃ§Ã£o?\n\nTodas as alteraÃ§Ãµes serÃ£o perdidas!')) {
        location.reload();
      }
    }

    // ============================================
    // MODO REUNIÃƒO
    // ============================================

    function ativarModoReuniao() {
      toggleMenu();
      const hoje = new Date().toISOString().split('T')[0];
      document.getElementById('inputDataReuniao').value = hoje;
      document.getElementById('modalReuniao').classList.add('active');
    }

    function iniciarReuniao() {
    const data = document.getElementById('inputDataReuniao').value;
    const local = document.getElementById('inputLocalReuniao').value;
    
    if(!data || !local) {
        alert('âš ï¸ Preencha data e local da reuniÃ£o!');
        return;
    }
    
    const dataObj = new Date(data);
    const dataFormatada = dataObj.toLocaleDateString('pt-BR');
    
    reuniaoAtual = {
        data: data,
        dataFormatada: dataFormatada,
        local: local,
        timestamp: new Date().getTime()
    };
    
    document.querySelectorAll('.tela').forEach(t => t.classList.remove('active'));
    document.getElementById('telaPresenca').classList.add('active');
    
    document.getElementById('dataReuniaoAtual').textContent = dataFormatada;
    document.getElementById('localReuniaoAtual').textContent = local;
    
    carregarListaPresenca();
    
    fecharModal('modalReuniao');
    
    // ADICIONAR ESTA LINHA NO FINAL DA FUNÃ‡ÃƒO:
    atualizarContadorQuorum();
    localStorage.removeItem('presencasReuniao'); // Limpar presenÃ§as anteriores
    atualizarContadorQuorum();
}

    // SUBSTITUIR ESTA FUNÃ‡ÃƒO COMPLETAMENTE:
function carregarListaPresenca() {
    const container = document.getElementById('listaPresenca');
    container.innerHTML = '';
    
    const cadeiras = new Map(); // Usar Map para agrupar por cadeira
    
    function coletarCadeiras(seletor, grupo) {
        document.querySelectorAll(seletor).forEach(cadeira => {
            const numeroCadeira = cadeira.querySelector('.numero-cadeira')?.textContent || '';
            const setorEl = cadeira.closest('.setor');
            const nomeSetor = setorEl?.querySelector('.titulo-setor .editable')?.textContent || '';
            
            // ID Ãºnico para cada cadeira
            const cadeiraId = `cadeira-${grupo}-${nomeSetor.replace(/\s+/g, '-')}-${numeroCadeira.replace(/\s+/g, '-')}`;
            
            // Coletar todos os membros desta cadeira (titular e suplente)
            const membrosCadeira = [];
            cadeira.querySelectorAll('.membro-linha:not(.vazio)').forEach(membro => {
                const nome = membro.querySelector('.nome-membro')?.textContent || '';
                const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
                const telefone = membro.dataset.telefone || '';
                const boneco = membro.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
                const tipo = membro.classList.contains('titular') ? 'Titular' : 'Suplente';
                
                if(nome && nome.trim() !== '' && nome !== 'VAGA' && nome !== '-') {
                    membrosCadeira.push({
                        nome, entidade, telefone, boneco, tipo,
                        elemento: membro,
                        setorNome: nomeSetor
                    });
                }
            });
            
            if (membrosCadeira.length > 0) {
                cadeiras.set(cadeiraId, {
                    id: cadeiraId,
                    grupo: grupo,
                    nomeSetor: nomeSetor,
                    numeroCadeira: numeroCadeira,
                    membros: membrosCadeira
                });
            }
        });
    }
    
    // Coletar da presidÃªncia (tratar como uma cadeira especial)
    const presidenciaContainer = document.getElementById('presidenciaContainer');
    if (presidenciaContainer) {
        const membrosPresidencia = [];
        presidenciaContainer.querySelectorAll('.membro-linha:not(.vazio)').forEach(membro => {
            const nome = membro.querySelector('.nome-membro')?.textContent || '';
            const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
            const telefone = membro.dataset.telefone || '';
            const boneco = membro.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
            const tipo = 'Presidente';
            
            if(nome && nome.trim() !== '' && nome !== 'VAGA' && nome !== '-') {
                membrosPresidencia.push({
                    nome, entidade, telefone, boneco, tipo,
                    elemento: membro
                });
            }
        });
        
        if (membrosPresidencia.length > 0) {
            cadeiras.set('presidencia', {
                id: 'presidencia',
                grupo: 'PRESIDÃŠNCIA',
                nomeSetor: 'PRESIDÃŠNCIA',
                numeroCadeira: 'PRESIDÃŠNCIA',
                membros: membrosPresidencia
            });
        }
    }
    
    // Coletar do poder pÃºblico e sociedade civil
    coletarCadeiras('#poder-publico .cadeira', 'PODER-PUBLICO');
    coletarCadeiras('#sociedade-civil .cadeira', 'SOCIEDADE-CIVIL');
    
    let ultimoGrupo = '';
    let ultimoSetor = '';
    
    // Ordenar as cadeiras: PresidÃªncia -> Poder PÃºblico -> Sociedade Civil
    const cadeirasOrdenadas = Array.from(cadeiras.values()).sort((a, b) => {
        const ordemGrupos = { 'PRESIDÃŠNCIA': 0, 'PODER-PUBLICO': 1, 'SOCIEDADE-CIVIL': 2 };
        return ordemGrupos[a.grupo] - ordemGrupos[b.grupo];
    });
    
    cadeirasOrdenadas.forEach(cadeira => {
        // CabeÃ§alho do grupo se mudou
        if (cadeira.grupo !== ultimoGrupo) {
            const headerGrupo = document.createElement('div');
            headerGrupo.className = 'grupo-header-lista';
            headerGrupo.style.cssText = `
                background: #667eea; 
                color: white; 
                padding: 12px 15px; 
                margin: 10px 0 5px 0; 
                border-radius: 8px; 
                font-weight: bold; 
                font-size: 1.1em;
            `;
            
            let nomeGrupo = '';
            switch(cadeira.grupo) {
                case 'PRESIDÃŠNCIA': nomeGrupo = 'PRESIDÃŠNCIA'; break;
                case 'PODER-PUBLICO': nomeGrupo = 'PODER PÃšBLICO'; break;
                case 'SOCIEDADE-CIVIL': nomeGrupo = 'SOCIEDADE CIVIL'; break;
                default: nomeGrupo = cadeira.grupo;
            }
            
            headerGrupo.textContent = nomeGrupo;
            container.appendChild(headerGrupo);
            ultimoGrupo = cadeira.grupo;
            ultimoSetor = ''; // Resetar setor ao mudar de grupo
        }
        
        // CabeÃ§alho do setor se mudou (exceto para PresidÃªncia)
        if (cadeira.grupo !== 'PRESIDÃŠNCIA' && cadeira.nomeSetor !== ultimoSetor) {
            const headerSetor = document.createElement('div');
            headerSetor.className = 'setor-header-lista';
            headerSetor.style.cssText = `
                background: #51cf66; 
                color: white; 
                padding: 8px 15px; 
                margin: 8px 0 5px 0; 
                border-radius: 6px; 
                font-weight: bold; 
                font-size: 0.95em;
                border-left: 4px solid #37b24d;
            `;
            
            headerSetor.textContent = `ğŸ“‚ ${cadeira.nomeSetor}`;
            container.appendChild(headerSetor);
            ultimoSetor = cadeira.nomeSetor;
        }
        
        // Para cada membro na cadeira (pode ter titular e suplente)
        cadeira.membros.forEach(membro => {
            const item = document.createElement('div');
            item.className = 'item-lista-presenca';
            
            let descricaoCadeira = '';
            if (cadeira.grupo === 'PRESIDÃŠNCIA') {
                descricaoCadeira = 'PRESIDÃŠNCIA';
            } else {
                descricaoCadeira = `${cadeira.nomeSetor} - ${cadeira.numeroCadeira}`;
            }
            
            item.innerHTML = `
                <div class="info-membro-presenca">
                    <div style="font-size: 2em;">${membro.boneco}</div>
                    <div style="flex: 1;">
                        <div style="font-weight: bold; font-size: 1em;">${membro.nome}</div>
                        <div style="font-size: 0.85em; color: #6c757d;">${membro.entidade}</div>
                        <div style="font-size: 0.8em; color: #495057; margin-top: 3px;">
                            <strong>Cadeira:</strong> ${descricaoCadeira}
                        </div>
                        <div style="font-size: 0.75em; color: #868e96; background: ${membro.tipo === 'Titular' ? '#1976d2' : membro.tipo === 'Suplente' ? '#f57c00' : '#667eea'}; color: white; padding: 2px 6px; border-radius: 10px; display: inline-block; margin-top: 3px;">${membro.tipo}</div>
                    </div>
                </div>
                <div class="bolinha-grande" onclick="marcarPresenca(this, '${cadeira.id}')" data-membro="${membro.nome}" data-cadeira="${cadeira.id}"></div>
            `;
            container.appendChild(item);
        });
    });
          
    // INICIALIZAR CONTADOR DE QUÃ“RUM
    atualizarContadorQuorum();
}
// Nova funÃ§Ã£o para marcar presenÃ§a com controle de quÃ³rum
// SUBSTITUIR ESTA FUNÃ‡ÃƒO COMPLETAMENTE:
function marcarPresenca(bolinha, cadeiraId) {
    // Alternar entre os estados da bolinha
    if(!bolinha.classList.contains('verde') && !bolinha.classList.contains('amarelo') && !bolinha.classList.contains('vermelho')) {
        bolinha.classList.add('verde');
    } else if(bolinha.classList.contains('verde')) {
        bolinha.classList.remove('verde');
        bolinha.classList.add('amarelo');
    } else if(bolinha.classList.contains('amarelo')) {
        bolinha.classList.remove('amarelo');
        bolinha.classList.add('vermelho');
    } else {
        bolinha.classList.remove('vermelho');
    }
    
    // Atualizar localStorage com controle por cadeira
    atualizarPresencaCadeiraLocalStorage(cadeiraId, bolinha);
    
    // Atualizar contador de quÃ³rum
    atualizarContadorQuorum();
}

// FUNÃ‡ÃƒO CORRIGIDA para atualizarPresencaCadeiraLocalStorage
function atualizarPresencaCadeiraLocalStorage(cadeiraId, bolinha) {
    let presencas = JSON.parse(localStorage.getItem('presencasReuniao') || '{}');
    
    // Encontrar todos os membros desta mesma cadeira
    const membrosDaCadeira = document.querySelectorAll(`.bolinha-grande[data-cadeira="${cadeiraId}"]`);
    
    // Verificar se pelo menos um membro da cadeira estÃ¡ presente (VERDE)
    let cadeiraPresente = false;
    membrosDaCadeira.forEach(membroBolinha => {
        if(membroBolinha.classList.contains('verde')) { // SÃ“ CONTA VERDE COMO PRESENÃ‡A
            cadeiraPresente = true;
        }
    });
    
    if (cadeiraPresente) {
        presencas[cadeiraId] = true;
    } else {
        delete presencas[cadeiraId];
    }
    
    localStorage.setItem('presencasReuniao', JSON.stringify(presencas));
}

// FUNÃ‡ÃƒO CORRIGIDA para marcarPresenca
function marcarPresenca(bolinha, cadeiraId) {
    // Alternar entre os estados da bolinha
    if(!bolinha.classList.contains('verde') && !bolinha.classList.contains('amarelo') && !bolinha.classList.contains('vermelho')) {
        bolinha.classList.add('verde');
    } else if(bolinha.classList.contains('verde')) {
        bolinha.classList.remove('verde');
        bolinha.classList.add('amarelo');
    } else if(bolinha.classList.contains('amarelo')) {
        bolinha.classList.remove('amarelo');
        bolinha.classList.add('vermelho');
    } else {
        bolinha.classList.remove('vermelho');
    }
    
    // Atualizar localStorage com controle por cadeira
    atualizarPresencaCadeiraLocalStorage(cadeiraId, bolinha);
    
    // Atualizar contador de quÃ³rum
    atualizarContadorQuorum();
}
// FunÃ§Ã£o para atualizar o contador de quÃ³rum
function atualizarContadorQuorum() {
    const presencas = JSON.parse(localStorage.getItem('presencasReuniao') || '{}');
    const cadeirasPresentes = Object.keys(presencas).length;
    const totalCadeiras = calcularTotalCadeiras();
    const quorum = cadeirasPresentes >= Math.ceil(totalCadeiras / 2);
    
    console.log(`DEBUG - Presentes: ${cadeirasPresentes}, Total: ${totalCadeiras}, QuÃ³rum: ${quorum}`);
    
    // Atualizar indicador na tela
    let indicadorQuorum = document.getElementById('indicadorQuorum');
    if (!indicadorQuorum) {
        indicadorQuorum = criarIndicadorQuorum();
    }
    
    indicadorQuorum.innerHTML = `
        <strong>QUÃ“RUM:</strong> ${cadeirasPresentes} de ${totalCadeiras} cadeiras presentes | 
        <span style="color: ${quorum ? '#51cf66' : '#ff6b6b'}; font-weight: bold;">
            ${quorum ? 'âœ… QUÃ“RUM ATINGIDO' : 'âŒ QUÃ“RUM NÃƒO ATINGIDO'}
        </span>
        <button onclick="limparPresencas()" style="margin-left: 10px; padding: 2px 8px; background: #ff6b6b; color: white; border: none; border-radius: 4px; font-size: 0.8em;">Limpar</button>
    `;
}
function limparPresencas() {
    if (confirm('Limpar todas as presenÃ§as marcadas?')) {
        localStorage.removeItem('presencasReuniao');
        
        // Limpar visualmente todas as bolinhas
        document.querySelectorAll('#listaPresenca .bolinha-grande').forEach(bolinha => {
            bolinha.classList.remove('verde', 'amarelo', 'vermelho');
        });
        
        atualizarContadorQuorum();
        alert('PresenÃ§as limpas!');
    }
}

// Criar indicador de quÃ³rum
function criarIndicadorQuorum() {
  const indicador = document.createElement('div');
  indicador.id = 'indicadorQuorum';
  indicador.style.cssText = `
    position: fixed;
    top: 15px;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 10px 20px;
    border-radius: 8px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.3);
    z-index: 1000;
    font-weight: bold;
    border: 2px solid #667eea;
  `;
  document.getElementById('telaPresenca').appendChild(indicador);
  return indicador;
}

    function finalizarReuniao() {
    if(confirm('âœ… Finalizar lista de presenÃ§a?\n\nAs presenÃ§as serÃ£o salvas permanentemente.')) {
        const presencas = JSON.parse(localStorage.getItem('presencasReuniao') || '{}');
        const cadeirasPresentes = Object.keys(presencas).length;
        const totalCadeiras = calcularTotalCadeiras();
        const quorum = cadeirasPresentes >= Math.ceil(totalCadeiras / 2);
        
        // Coletar todas as presenÃ§as marcadas na tela
        const presencasDetalhadas = [];
        
        document.querySelectorAll('#listaPresenca .bolinha-grande').forEach(bolinha => {
            const nomeMembro = bolinha.dataset.membro;
            const cadeiraId = bolinha.dataset.cadeira;
            let status = '';
            
            if(bolinha.classList.contains('verde')) status = 'presente';
            else if(bolinha.classList.contains('amarelo')) status = 'justificado';
            else if(bolinha.classList.contains('vermelho')) status = 'faltou';
            
            if(status && nomeMembro) {
                presencasDetalhadas.push({
                    nome: nomeMembro,
                    status: status,
                    cadeiraId: cadeiraId,
                    data: reuniaoAtual.data,
                    dataFormatada: reuniaoAtual.dataFormatada,
                    local: reuniaoAtual.local,
                    timestamp: reuniaoAtual.timestamp
                });
            }
        });
        
        // Salvar presenÃ§as nos membros correspondentes
        presencasDetalhadas.forEach(presenca => {
            const membro = encontrarMembroPorNome(presenca.nome);
            if(membro) {
                adicionarBolinhaPresenca(membro, presenca);
            }
        });
        
        // Exibir resumo da reuniÃ£o
        let mensagemResumo = `ğŸ“Š RESUMO DA REUNIÃƒO:\n\n`;
        mensagemResumo += `ğŸ“ ${reuniaoAtual.dataFormatada} - ${reuniaoAtual.local}\n`;
        mensagemResumo += `ğŸ‘¥ ${cadeirasPresentes} de ${totalCadeiras} cadeiras presentes\n`;
        mensagemResumo += `ğŸ“‹ ${presencasDetalhadas.length} registros de presenÃ§a\n`;
        mensagemResumo += `âš–ï¸ QUÃ“RUM: ${quorum ? 'âœ… ATINGIDO' : 'âŒ NÃƒO ATINGIDO'}\n\n`;
        
        // Contar por status
        const presentes = presencasDetalhadas.filter(p => p.status === 'presente').length;
        const justificados = presencasDetalhadas.filter(p => p.status === 'justificado').length;
        const faltas = presencasDetalhadas.filter(p => p.status === 'faltou').length;
        
        mensagemResumo += `ğŸŸ¢ Presentes: ${presentes}\n`;
        mensagemResumo += `ğŸŸ¡ Justificados: ${justificados}\n`;
        mensagemResumo += `ğŸ”´ Faltas: ${faltas}`;
        
        // LIMPAR PRESENÃ‡AS TEMPORÃRIAS
        localStorage.removeItem('presencasReuniao');
        
        // Voltar para tela principal
        document.querySelectorAll('.tela').forEach(t => t.classList.remove('active'));
        document.getElementById('telaPrincipal').classList.add('active');
        
        reuniaoAtual = null;
        
        // Mostrar resumo
        alert(mensagemResumo);
        
        // Atualizar anÃ¡lises se estiver na tela de anÃ¡lises
        if(document.getElementById('telaAnalises').classList.contains('active')) {
            gerarAnalises();
        }
    }
}

// FunÃ§Ã£o auxiliar para encontrar membro pelo nome (jÃ¡ existe, mas vou incluir para garantir)
function encontrarMembroPorNome(nome) {
    let membroEncontrado = null;
    
    // Buscar na presidÃªncia
    document.querySelectorAll('#presidenciaContainer .membro-linha:not(.vazio)').forEach(membro => {
        const nomeMembro = membro.querySelector('.nome-membro')?.textContent || '';
        if(nomeMembro === nome) {
            membroEncontrado = membro;
        }
    });
    
    // Buscar no poder pÃºblico
    if (!membroEncontrado) {
        document.querySelectorAll('#poder-publico .membro-linha:not(.vazio)').forEach(membro => {
            const nomeMembro = membro.querySelector('.nome-membro')?.textContent || '';
            if(nomeMembro === nome) {
                membroEncontrado = membro;
            }
        });
    }
    
    // Buscar na sociedade civil
    if (!membroEncontrado) {
        document.querySelectorAll('#sociedade-civil .membro-linha:not(.vazio)').forEach(membro => {
            const nomeMembro = membro.querySelector('.nome-membro')?.textContent || '';
            if(nomeMembro === nome) {
                membroEncontrado = membro;
            }
        });
    }
    
    return membroEncontrado;
}

// FunÃ§Ã£o para adicionar bolinha de presenÃ§a (jÃ¡ existe, mas vou incluir para garantir)
function adicionarBolinhaPresenca(membro, presenca) {
    const container = membro.querySelector('.presenca-container');
    if (!container) return;
    
    // Verificar se jÃ¡ existe uma bolinha para esta data
    const bolinhasExistentes = container.querySelectorAll('.bolinha-presenca');
    let bolinhaExistente = null;
    
    bolinhasExistentes.forEach(bolinha => {
        if (bolinha.dataset.data === presenca.data) {
            bolinhaExistente = bolinha;
        }
    });
    
    if (bolinhaExistente) {
        // Atualizar bolinha existente
        bolinhaExistente.className = `bolinha-presenca ${presenca.status === 'presente' ? 'verde' : presenca.status === 'justificado' ? 'amarelo' : 'vermelho'}`;
        bolinhaExistente.dataset.data = presenca.data;
        bolinhaExistente.dataset.dataFormatada = presenca.dataFormatada;
        bolinhaExistente.dataset.local = presenca.local;
        bolinhaExistente.dataset.timestamp = presenca.timestamp;
        bolinhaExistente.dataset.status = presenca.status;
        bolinhaExistente.title = `${presenca.dataFormatada} - ${presenca.local}`;
    } else {
        // Criar nova bolinha
        const bolinha = document.createElement('div');
        bolinha.className = `bolinha-presenca ${presenca.status === 'presente' ? 'verde' : presenca.status === 'justificado' ? 'amarelo' : 'vermelho'}`;
        bolinha.dataset.data = presenca.data;
        bolinha.dataset.dataFormatada = presenca.dataFormatada;
        bolinha.dataset.local = presenca.local;
        bolinha.dataset.timestamp = presenca.timestamp;
        bolinha.dataset.status = presenca.status;
        bolinha.title = `${presenca.dataFormatada} - ${presenca.local}`;
        
        if(modoEdicao) {
            bolinha.onclick = function() { editarBolinhaPresenca(this); };
        }
        
        container.appendChild(bolinha);
    }
    
    // Manter apenas as 5 mais recentes
    const bolinhas = container.querySelectorAll('.bolinha-presenca');
    if(bolinhas.length > 5) {
        const bolinhasArray = Array.from(bolinhas);
        bolinhasArray.sort((a, b) => parseInt(b.dataset.timestamp) - parseInt(a.dataset.timestamp));
        
        for(let i = 5; i < bolinhasArray.length; i++) {
            bolinhasArray[i].remove();
        }
    }
}
    function encontrarMembroPorNome(nome) {
      let membroEncontrado = null;
      document.querySelectorAll('.membro-linha:not(.vazio)').forEach(membro => {
        const nomeMembro = membro.querySelector('.nome-membro')?.textContent || '';
        if(nomeMembro === nome) {
          membroEncontrado = membro;
        }
      });
      return membroEncontrado;
    }

    function adicionarBolinhaPresenca(membro, presenca) {
      const container = membro.querySelector('.presenca-container');
      
      const bolinha = document.createElement('div');
      bolinha.className = `bolinha-presenca ${presenca.status === 'presente' ? 'verde' : presenca.status === 'justificado' ? 'amarelo' : 'vermelho'}`;
      bolinha.dataset.data = presenca.data;
      bolinha.dataset.dataFormatada = presenca.dataFormatada;
      bolinha.dataset.local = presenca.local;
      bolinha.dataset.timestamp = presenca.timestamp;
      bolinha.dataset.status = presenca.status;
      bolinha.title = `${presenca.dataFormatada} - ${presenca.local}`;
      
      if(modoEdicao) {
        bolinha.onclick = function() { editarBolinhaPresenca(this); };
      }
      
      container.appendChild(bolinha);
      
      const bolinhas = container.querySelectorAll('.bolinha-presenca');
      if(bolinhas.length > 5) {
        const bolinhasArray = Array.from(bolinhas);
        bolinhasArray.sort((a, b) => parseInt(b.dataset.timestamp) - parseInt(a.dataset.timestamp));
        
        for(let i = 5; i < bolinhasArray.length; i++) {
          bolinhasArray[i].remove();
        }
      }
    }

    function abortarReuniao() {
    if(confirm('âŒ Abortar esta reuniÃ£o?\n\nâš ï¸ ATENÃ‡ÃƒO: Todos os registros de presenÃ§a serÃ£o perdidos!\n\nEsta aÃ§Ã£o nÃ£o pode ser desfeita.')) {
        
        // Coletar estatÃ­sticas antes de limpar (para o alerta final)
        const presencas = JSON.parse(localStorage.getItem('presencasReuniao') || '{}');
        const cadeirasPresentes = Object.keys(presencas).length;
        const totalCadeiras = calcularTotalCadeiras();
        
        let presencasDetalhadas = 0;
        document.querySelectorAll('#listaPresenca .bolinha-grande').forEach(bolinha => {
            if(bolinha.classList.contains('verde') || bolinha.classList.contains('amarelo') || bolinha.classList.contains('vermelho')) {
                presencasDetalhadas++;
            }
        });
        
        // 1. LIMPAR PRESENÃ‡AS TEMPORÃRIAS DO LOCALSTORAGE
        localStorage.removeItem('presencasReuniao');
        
        // 2. LIMPAR VISUALMENTE TODAS AS BOLINHAS NA TELA
        document.querySelectorAll('#listaPresenca .bolinha-grande').forEach(bolinha => {
            bolinha.classList.remove('verde', 'amarelo', 'vermelho');
        });
        
        // 3. REMOVER INDICADOR DE QUÃ“RUM SE EXISTIR
        const indicadorQuorum = document.getElementById('indicadorQuorum');
        if (indicadorQuorum) {
            indicadorQuorum.remove();
        }
        
        // 4. VOLTAR PARA TELA PRINCIPAL
        document.querySelectorAll('.tela').forEach(t => t.classList.remove('active'));
        document.getElementById('telaPrincipal').classList.add('active');
        
        // 5. LIMPAR VARIÃVEL DA REUNIÃƒO ATUAL
        reuniaoAtual = null;
        
        // 6. MOSTRAR CONFIRMAÃ‡ÃƒO COM ESTATÃSTICAS
        let mensagemAborto = `âœ… REUNIÃƒO ABORTADA\n\n`;
        mensagemAborto += `ğŸ“Š Dados descartados:\n`;
        mensagemAborto += `â€¢ ${cadeirasPresentes} cadeiras com presenÃ§a registrada\n`;
        mensagemAborto += `â€¢ ${presencasDetalhadas} registros de presenÃ§a individuais\n`;
        mensagemAborto += `â€¢ Controle de quÃ³rum reiniciado\n\n`;
        mensagemAborto += `ğŸ’¡ Dica: Use "Modo ReuniÃ£o" no menu para iniciar uma nova reuniÃ£o.`;
        
        alert(mensagemAborto);
        
        // 7. ATUALIZAR CONTADORES SE NECESSÃRIO
        if(document.getElementById('telaAnalises').classList.contains('active')) {
            gerarAnalises();
        }
        
        // 8. FECHAR MENU SE ESTIVER ABERTO
        const menuDropdown = document.getElementById('menuDropdown');
        if (menuDropdown && menuDropdown.classList.contains('active')) {
            menuDropdown.classList.remove('active');
        }
        
        console.log('ReuniÃ£o abortada - todos os dados de presenÃ§a foram descartados');
    } else {
        // UsuÃ¡rio cancelou o aborto
        console.log('Aborto da reuniÃ£o cancelado pelo usuÃ¡rio');
    }
}

// FunÃ§Ã£o auxiliar para garantir que o aborto seja completo
function abortarReuniaoForcado() {
    // VersÃ£o sem confirmaÃ§Ã£o - para casos de emergÃªncia
    console.warn('Aborto forÃ§ado da reuniÃ£o iniciado');
    
    // Limpar tudo
    localStorage.removeItem('presencasReuniao');
    
    document.querySelectorAll('#listaPresenca .bolinha-grande').forEach(bolinha => {
        bolinha.classList.remove('verde', 'amarelo', 'vermelho');
    });
    
    const indicadorQuorum = document.getElementById('indicadorQuorum');
    if (indicadorQuorum) indicadorQuorum.remove();
    
    document.querySelectorAll('.tela').forEach(t => t.classList.remove('active'));
    document.getElementById('telaPrincipal').classList.add('active');
    
    reuniaoAtual = null;
    
    alert('âœ… ReuniÃ£o abortada forÃ§adamente!\n\nTodos os dados temporÃ¡rios foram limpos.');
}

    // ============================================
    // EDIÃ‡ÃƒO DE BOLINHAS NO MODO EDIÃ‡ÃƒO
    // ============================================

    function editarBolinhaPresenca(bolinha) {
      if(!modoEdicao) return;
      
      bolinhaEditando = bolinha;
      
      document.getElementById('inputEditarDataReuniao').value = bolinha.dataset.data;
      document.getElementById('inputEditarLocalReuniao').value = bolinha.dataset.local;
      
      document.getElementById('btnStatusVerde').classList.remove('selecionado');
      document.getElementById('btnStatusAmarelo').classList.remove('selecionado');
      document.getElementById('btnStatusVermelho').classList.remove('selecionado');
      
      const statusAtual = bolinha.dataset.status;
      if(statusAtual === 'presente') {
        document.getElementById('btnStatusVerde').classList.add('selecionado');
      } else if(statusAtual === 'justificado') {
        document.getElementById('btnStatusAmarelo').classList.add('selecionado');
      } else if(statusAtual === 'faltou') {
        document.getElementById('btnStatusVermelho').classList.add('selecionado');
      }
      
      document.getElementById('modalEditarBolinha').classList.add('active');
    }

    function selecionarStatusBolinha(status) {
      document.getElementById('btnStatusVerde').classList.remove('selecionado');
      document.getElementById('btnStatusAmarelo').classList.remove('selecionado');
      document.getElementById('btnStatusVermelho').classList.remove('selecionado');
      
      document.getElementById(`btnStatus${status.charAt(0).toUpperCase() + status.slice(1)}`).classList.add('selecionado');
    }

    function salvarEdicaoBolinha() {
      if(!bolinhaEditando) return;
      
      const novaData = document.getElementById('inputEditarDataReuniao').value;
      const novoLocal = document.getElementById('inputEditarLocalReuniao').value;
      
      if(!novaData || !novoLocal) {
        alert('âš ï¸ Preencha data e local!');
        return;
      }
      
      let novoStatus = '';
      if(document.getElementById('btnStatusVerde').classList.contains('selecionado')) {
        novoStatus = 'presente';
      } else if(document.getElementById('btnStatusAmarelo').classList.contains('selecionado')) {
        novoStatus = 'justificado';
      } else if(document.getElementById('btnStatusVermelho').classList.contains('selecionado')) {
        novoStatus = 'faltou';
      }
      
      if(!novoStatus) {
        alert('âš ï¸ Selecione um status!');
        return;
      }
      
      const dataObj = new Date(novaData);
      const dataFormatada = dataObj.toLocaleDateString('pt-BR');
      
      bolinhaEditando.dataset.data = novaData;
      bolinhaEditando.dataset.dataFormatada = dataFormatada;
      bolinhaEditando.dataset.local = novoLocal;
      bolinhaEditando.dataset.status = novoStatus;
      bolinhaEditando.title = `${dataFormatada} - ${novoLocal}`;
      
      bolinhaEditando.className = 'bolinha-presenca';
      bolinhaEditando.classList.add(novoStatus === 'presente' ? 'verde' : novoStatus === 'justificado' ? 'amarelo' : 'vermelho');
      
      fecharModal('modalEditarBolinha');
      bolinhaEditando = null;
      alert('âœ… PresenÃ§a atualizada!');
    }

    function excluirBolinha() {
      if(!bolinhaEditando) return;
      
      if(confirm('ğŸ—‘ï¸ Excluir este registro de presenÃ§a?')) {
        bolinhaEditando.remove();
        fecharModal('modalEditarBolinha');
        bolinhaEditando = null;
        alert('âœ… PresenÃ§a excluÃ­da!');
      }
    }

    // ============================================
    // MODAL
    // ============================================
    function abrirModal(idModal) {
      document.getElementById(idModal).classList.add('active');
    }

    function fecharModal(idModal) {
      document.getElementById(idModal).classList.remove('active');
    }

    document.addEventListener('click', (e) => {
      if(e.target.classList.contains('modal')) {
        e.target.classList.remove('active');
      }
    });

    // ============================================
    // SETORES E CADEIRAS
    // ============================================
    function adicionarSetor(grupoId) {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }

      const nomeSetor = prompt('ğŸ“ Digite o nome do novo setor:');
      if(!nomeSetor) return;

      const grupo = document.getElementById(grupoId);
      const setor = document.createElement('div');
      setor.className = 'setor';
      setor.innerHTML = `
        <div class="setor-header-wrapper" onclick="toggleSetor(this)">
          <div class="setor-seta">â–¼</div>
          <div class="titulo-setor">
            <span class="editable" contenteditable="true">${nomeSetor}</span>
            <span class="contador-cadeiras">0 cadeiras</span>
            <button class="btn-remove" onclick="event.stopPropagation(); removerSetor(this)">ğŸ—‘ï¸</button>
          </div>
        </div>
        <div class="setor-conteudo active">
          <button class="btn-add-cadeira" onclick="adicionarCadeira(this)">â• Cadeira</button>
        </div>
      `;
      
      const btnAddSetor = grupo.querySelector('.btn-add-setor');
      const conteudoGrupo = grupo.querySelector('.grupo-conteudo');
      conteudoGrupo.insertBefore(setor, btnAddSetor);
      
      alert(`âœ… Setor "${nomeSetor}" criado!`);
      atualizarContadoresGrupo(grupoId);
    }

    function removerSetor(btn) {
      if(!modoEdicao) return;
      
      if(confirm('â“ Remover este setor e todas as suas cadeiras?')) {
        const setor = btn.closest('.setor');
        const grupoId = setor.closest('.grupo').id;
        setor.remove();
        alert('âœ… Setor removido!');
        atualizarContadoresGrupo(grupoId);
      }
    }

    function adicionarCadeira(btn) {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }
      
      const setor = btn.closest('.setor');
      if(!setor) {
        alert('âŒ Erro: setor nÃ£o encontrado!');
        return;
      }
      
      const cadeiraExistentes = setor.querySelectorAll('.cadeira');
      const numCadeiraAtual = cadeiraExistentes.length + 1;
      
      const numeroCadeira = prompt(
        `ğŸ“ Digite o nÃºmero/nome da nova cadeira:\n\n` +
        `Cadeiras existentes: ${cadeiraExistentes.length}`,
        `Cadeira ${numCadeiraAtual}`
      );
      
      if(!numeroCadeira) return;
      
      const cadeira = document.createElement('div');
      cadeira.className = 'cadeira';
      cadeira.innerHTML = `
        <div class="cadeira-header">
          <span class="icone-cadeira">ğŸª‘</span>
          <span class="numero-cadeira">${numeroCadeira}</span>
          <button class="btn-remove" onclick="removerCadeira(this)">ğŸ—‘ï¸</button>
        </div>
        <div class="cadeira-membros-container"></div>
        <button class="btn-add-membro" onclick="abrirModalAdicionarMembro(this)">â• Adicionar Membro</button>
      `;
      
      const btnAddCadeiraSetor = setor.querySelector('.btn-add-cadeira');
      const setorConteudo = setor.querySelector('.setor-conteudo');
      setorConteudo.insertBefore(cadeira, btnAddCadeiraSetor);
      
      atualizarContadorCadeiras(setor);
      
      alert(`âœ… "${numeroCadeira}" criada!\n\nğŸ‘¥ Agora adicione membros.`);
    }

    function removerCadeira(btn) {
      if(!modoEdicao) return;
      
      if(confirm('â“ Remover esta cadeira?')) {
        const setor = btn.closest('.setor');
        btn.closest('.cadeira').remove();
        atualizarContadorCadeiras(setor);
        alert('âœ… Cadeira removida!');
      }
    }

    // ============================================
    // ADICIONAR MEMBRO
    // ============================================
    function abrirModalAdicionarMembroPresidencia() {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }
      cadeiraAtualAdicionarMembro = document.getElementById('presidenciaContainer');
      membroAtualEditando = null;
      limparCamposModalMembro();
      document.getElementById('modalAdicionarMembro').classList.add('active');
    }

    function abrirModalAdicionarMembro(btn) {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }
      
      const cadeira = btn.closest('.cadeira');
      cadeiraAtualAdicionarMembro = cadeira.querySelector('.cadeira-membros-container');
      membroAtualEditando = null;
      limparCamposModalMembro();
      document.getElementById('modalAdicionarMembro').classList.add('active');
    }

    function limparCamposModalMembro() {
      document.getElementById('inputNomeMembro').value = '';
      document.getElementById('inputEntidadeMembro').value = '';
      document.getElementById('inputMunicipioMembro').value = '';
      document.getElementById('inputEstadoMembro').value = '';
      document.getElementById('inputTelefoneMembro').value = '';
      document.getElementById('inputEmailMembro').value = '';
      document.getElementById('inputCurriculoMembro').value = '';
      document.getElementById('inputDataPosseMembro').value = '';
      document.getElementById('inputDataMandatoMembro').value = '';
      document.getElementById('inputTipoMembro').value = 'titular';
    }

    function confirmarAdicionarMembro() {
      const nome = document.getElementById('inputNomeMembro').value;
      const entidade = document.getElementById('inputEntidadeMembro').value;
      const municipio = document.getElementById('inputMunicipioMembro').value;
      const estado = document.getElementById('inputEstadoMembro').value;
      const telefone = document.getElementById('inputTelefoneMembro').value;
      const email = document.getElementById('inputEmailMembro').value;
      const curriculo = document.getElementById('inputCurriculoMembro').value;
      const dataPosse = document.getElementById('inputDataPosseMembro').value;
      const dataMandato = document.getElementById('inputDataMandatoMembro').value;
      const tipo = document.getElementById('inputTipoMembro').value;

      if(!nome || !estado) {
        alert('âš ï¸ Preencha pelo menos o nome e o estado!');
        return;
      }

      if(membroAtualEditando) {
        membroAtualEditando.querySelector('.nome-membro').textContent = nome;
        membroAtualEditando.querySelector('.entidade-membro').textContent = entidade || '-';
        membroAtualEditando.querySelector('.municipio-membro').textContent = `ğŸ“ ${municipio || '-'}`;
        membroAtualEditando.dataset.estado = estado;
        membroAtualEditando.dataset.telefone = telefone;
        membroAtualEditando.dataset.email = email;
        membroAtualEditando.dataset.curriculo = curriculo;
        membroAtualEditando.dataset.dataPosse = dataPosse;
        membroAtualEditando.dataset.dataMandato = dataMandato;
        
        membroAtualEditando.className = `membro-linha ${tipo}`;
        membroAtualEditando.querySelector('.etiqueta-cargo').className = `etiqueta-cargo ${tipo}`;
        membroAtualEditando.querySelector('.etiqueta-cargo').textContent = tipo === 'titular' ? 'Titular' : 'Suplente';
        
        fecharModal('modalAdicionarMembro');
        membroAtualEditando = null;
        alert(`âœ… Membro "${nome}" atualizado com sucesso!`);
        return;
      }

      const membro = document.createElement('div');
      membro.className = `membro-linha ${tipo}`;
      membro.draggable = true;
      membro.dataset.id = `membro-${Date.now()}`;
      membro.dataset.estado = estado;
      membro.dataset.curriculo = curriculo;
      membro.dataset.telefone = telefone;
      membro.dataset.email = email;
      membro.dataset.dataPosse = dataPosse;
      membro.dataset.dataMandato = dataMandato;

      membro.innerHTML = `
        <div class="membro-linha-top" onclick="editarMembroCompleto(this)">
          <div class="avatar-container">
            <span class="bonequinho" onclick="event.stopPropagation(); abrirEscolherEmoji(this, 'pessoa')">ğŸ‘¤</span>
            <span class="logo-instituicao" onclick="event.stopPropagation(); abrirEscolherEmoji(this, 'logo')">ğŸ›ï¸</span>
          </div>
          <span class="etiqueta-cargo ${tipo}">${tipo === 'titular' ? 'Titular' : 'Suplente'}</span>
          <div class="info-membro">
            <div class="nome-membro">${nome}</div>
            <div class="entidade-membro">${entidade || '-'}</div>
            <div class="municipio-membro">ğŸ“ ${municipio || '-'}</div>
            <button class="btn-ver-curriculo" onclick="event.stopPropagation(); verEditarCurriculo(this)"></button>
          </div>
        </div>
        <div class="presenca-container">
          <span class="presenca-label">PresenÃ§as:</span>
        </div>
        <button class="btn-remove" onclick="removerMembro(this)" style="margin-top:5px;">ğŸ—‘ï¸ Remover</button>
      `;

      if(cadeiraAtualAdicionarMembro) {
        cadeiraAtualAdicionarMembro.appendChild(membro);
      }

      configurarDragAndDrop();
      fecharModal('modalAdicionarMembro');
      alert(`âœ… ${tipo} "${nome}" adicionado com sucesso!`);
    }

    function removerMembro(btn) {
      if(!modoEdicao) return;
      
      if(confirm('â“ Remover este membro?')) {
        btn.closest('.membro-linha').remove();
        alert('âœ… Membro removido!');
      }
    }

    function editarMembroCompleto(elementoClicado) {
      if(!modoEdicao) return;
      
      const membroLinha = elementoClicado.closest('.membro-linha');
      
      document.getElementById('inputNomeMembro').value = membroLinha.querySelector('.nome-membro')?.textContent || '';
      document.getElementById('inputEntidadeMembro').value = membroLinha.querySelector('.entidade-membro')?.textContent.replace('-', '').trim() || '';
      document.getElementById('inputMunicipioMembro').value = membroLinha.querySelector('.municipio-membro')?.textContent.replace('ğŸ“', '').trim() || '';
      document.getElementById('inputEstadoMembro').value = membroLinha.dataset.estado || '';
      document.getElementById('inputTelefoneMembro').value = membroLinha.dataset.telefone || '';
      document.getElementById('inputEmailMembro').value = membroLinha.dataset.email || '';
      document.getElementById('inputCurriculoMembro').value = membroLinha.dataset.curriculo || '';
      document.getElementById('inputDataPosseMembro').value = membroLinha.dataset.dataPosse || '';
      document.getElementById('inputDataMandatoMembro').value = membroLinha.dataset.dataMandato || '';
      document.getElementById('inputTipoMembro').value = membroLinha.classList.contains('titular') ? 'titular' : 'suplente';
      
      membroAtualEditando = membroLinha;
      
      document.getElementById('modalAdicionarMembro').classList.add('active');
    }

    // ============================================
    // EMOJI E FOTO
    // ============================================
    function abrirEscolherEmoji(elemento, tipo) {
      if(!modoEdicao) {
        mostrarFichaMembro(elemento);
        return;
      }
      
      elementoEmojiAtual = elemento;
      tipoEmojiAtual = tipo;
      
      document.getElementById('tipoEmojiTitulo').textContent = tipo === 'pessoa' ? 'Pessoa' : 'Logo/InstituiÃ§Ã£o';
      document.getElementById('modalEscolherEmoji').classList.add('active');
    }

    function selecionarEmoji(emoji) {
      if (emojiContext === 'camara') {
          document.getElementById('inputEmojiCamara').value = emoji;
          atualizarPreviewEmoji();
          fecharModal('modalEscolherEmoji');
          emojiContext = null;
      } else {
          if (elementoEmojiAtual) {
              elementoEmojiAtual.textContent = emoji;
              fecharModal('modalEscolherEmoji');
          }
      }
    }

    function uploadFotoEmoji() {
      const input = document.getElementById('inputFotoEmoji');
      const file = input.files[0];
      
      if(!file) {
        alert('âš ï¸ Selecione uma imagem primeiro!');
        return;
      }
      
      const reader = new FileReader();
      reader.onload = function(e) {
        if(elementoEmojiAtual) {
          elementoEmojiAtual.innerHTML = `<img src="${e.target.result}" alt="foto">`;
          fecharModal('modalEscolherEmoji');
        }
      };
      reader.readAsDataURL(file);
    }

    // ============================================
    // CURRÃCULO
    // ============================================
    function verEditarCurriculo(btn) {
      const membroLinha = btn.closest('.membro-linha');
      const curriculo = membroLinha.dataset.curriculo || '';
      const nome = membroLinha.querySelector('.nome-membro')?.textContent || 'Membro';
      
      document.getElementById('tituloModalCurriculo').textContent = `ğŸ“„ CurrÃ­culo - ${nome}`;
      document.getElementById('curriculoConteudo').value = curriculo;
      
      if(modoEdicao) {
        document.getElementById('curriculoConteudo').readOnly = false;
        document.getElementById('btnSalvarCurriculo').style.display = 'inline-block';
        document.getElementById('btnSalvarCurriculo').onclick = function() {
          salvarCurriculo(membroLinha);
        };
      } else {
        document.getElementById('curriculoConteudo').readOnly = true;
        document.getElementById('btnSalvarCurriculo').style.display = 'none';
      }
      
      document.getElementById('modalVerEditarCurriculo').classList.add('active');
    }

    function salvarCurriculo(membroLinha) {
      const novoConteudo = document.getElementById('curriculoConteudo').value;
      membroLinha.dataset.curriculo = novoConteudo;
      fecharModal('modalVerEditarCurriculo');
      alert('âœ… CurrÃ­culo salvo com sucesso!');
    }

    // ============================================
    // FICHA DO MEMBRO
    // ============================================
    function mostrarFichaMembro(elementoBoneco) {
      const membroLinha = elementoBoneco.closest('.membro-linha');
      
      const nome = membroLinha.querySelector('.nome-membro')?.textContent || 'NÃ£o informado';
      const entidade = membroLinha.querySelector('.entidade-membro')?.textContent || 'NÃ£o informado';
      const municipio = membroLinha.querySelector('.municipio-membro')?.textContent.replace('ğŸ“ ', '') || 'NÃ£o informado';
      const boneco = membroLinha.querySelector('.bonequinho')?.innerHTML || 'ğŸ‘¤';
      const tipo = membroLinha.classList.contains('titular') ? 'Titular' : 'Suplente';
      const estado = membroLinha.dataset.estado || 'NÃ£o informado';
      const telefone = membroLinha.dataset.telefone || 'NÃ£o informado';
      const email = membroLinha.dataset.email || 'NÃ£o informado';
      const curriculo = membroLinha.dataset.curriculo || 'NÃ£o informado';
      
      const dataPosse = membroLinha.dataset.dataPosse || '';
      const dataMandato = membroLinha.dataset.dataMandato || '';
      
      const dataPosseFormatada = dataPosse ? new Date(dataPosse).toLocaleDateString('pt-BR') : 'NÃ£o informada';
      const dataMandatoFormatada = dataMandato ? new Date(dataMandato).toLocaleDateString('pt-BR') : 'NÃ£o informada';
      
      let diasRestantes = 'NÃ£o informado';
      if (dataMandato) {
        const hoje = new Date();
        const termino = new Date(dataMandato);
        const diffTime = termino - hoje;
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        diasRestantes = diffDays > 0 ? `${diffDays} dias` : 'Expirado';
      }

      const bolinhas = membroLinha.querySelectorAll('.bolinha-presenca');
      let presencas = 0, justificadas = 0, faltas = 0;
      
      bolinhas.forEach(b => {
        if(b.classList.contains('verde')) presencas++;
        else if(b.classList.contains('amarelo')) justificadas++;
        else if(b.classList.contains('vermelho')) faltas++;
      });
      
      const fichaHTML = `
        <div class="modal-content" style="max-width: 500px;">
          <div class="modal-header">ğŸ‘¤ Ficha do Conselheiro</div>
          
          <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 10px;">
            <div style="font-size: 4em;">${boneco}</div>
            <div style="flex: 1;">
              <div style="font-size: 1.4em; font-weight: bold; color: #2c3e50;">${nome}</div>
              <div style="font-size: 1em; color: #495057;">${entidade}</div>
              <div style="display: inline-block; background: ${tipo === 'Titular' ? '#1976d2' : '#f57c00'}; color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.8em; margin-top: 5px;">
                ${tipo}
              </div>
            </div>
          </div>
          
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
            <div style="padding: 12px; background: white; border-radius: 8px; border-left: 4px solid #667eea;">
              <div style="font-size: 0.8em; color: #6c757d; margin-bottom: 4px;">ğŸ“ LocalizaÃ§Ã£o</div>
              <div style="font-weight: bold; color: #2c3e50;">${municipio}</div>
              <div style="font-size: 0.8em; color: #495057;">${estado}</div>
            </div>
            
            <div style="padding: 12px; background: white; border-radius: 8px; border-left: 4px solid #51cf66;">
              <div style="font-size: 0.8em; color: #6c757d; margin-bottom: 4px;">ğŸ“Š PresenÃ§as</div>
              <div style="display: flex; gap: 8px; font-size: 0.9em;">
                <span>ğŸŸ¢ ${presencas}</span>
                <span>ğŸŸ¡ ${justificadas}</span>
                <span>ğŸ”´ ${faltas}</span>
              </div>
            </div>
          </div>
          
          <div style="margin-bottom: 20px;">
            <div style="font-weight: bold; color: #495057; margin-bottom: 8px;">ğŸ“… Mandato</div>
            <div style="background: white; padding: 12px; border-radius: 8px;">
              <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                <div>
                  <div style="font-size: 0.8em; color: #6c757d;">Data da Posse</div>
                  <div style="font-weight: bold; color: #2c3e50;">${dataPosseFormatada}</div>
                </div>
                <div>
                  <div style="font-size: 0.8em; color: #6c757d;">TÃ©rmino do Mandato</div>
                  <div style="font-weight: bold; color: #2c3e50;">${dataMandatoFormatada}</div>
                </div>
              </div>
              ${dataMandato ? `
                <div style="margin-top: 10px; padding: 8px; background: ${diasRestantes.includes('Expirado') ? '#ff6b6b' : '#51cf66'}; color: white; border-radius: 5px; text-align: center; font-size: 0.9em;">
                  â³ ${diasRestantes.includes('Expirado') ? 'Mandato Expirado' : `${diasRestantes} restantes`}
                </div>
              ` : ''}
            </div>
          </div>
          
          <div style="margin-bottom: 20px;">
            <div style="font-weight: bold; color: #495057; margin-bottom: 8px;">ğŸ“ Contato</div>
            <div style="background: white; padding: 12px; border-radius: 8px;">
              <div style="margin-bottom: 6px;"><strong>Telefone:</strong> ${telefone}</div>
              <div><strong>E-mail:</strong> ${email}</div>
            </div>
          </div>
          
          <div style="margin-bottom: 20px;">
            <div style="font-weight: bold; color: #495057; margin-bottom: 8px;">ğŸ“„ CurrÃ­culo</div>
            <div style="background: white; padding: 12px; border-radius: 8px; max-height: 150px; overflow-y: auto;">
              ${curriculo || '<em style="color: #6c757d;">Nenhum currÃ­culo cadastrado</em>'}
            </div>
          </div>
          
          <div style="display: flex; gap: 10px;">
            <button class="modal-btn modal-btn-primary" onclick="verEditarCurriculoCompleto(this)" style="flex: 1;">ğŸ“„ Ver CurrÃ­culo Completo</button>
            <button class="modal-btn modal-btn-secondary" onclick="fecharModal('modalFichaMembro')" style="flex: 1;">âœ… Fechar</button>
          </div>
        </div>
      `;
      
      let modalFicha = document.getElementById('modalFichaMembro');
      if (!modalFicha) {
        modalFicha = document.createElement('div');
        modalFicha.id = 'modalFichaMembro';
        modalFicha.className = 'modal';
        modalFicha.onclick = function(e) {
          if (e.target === modalFicha) fecharModal('modalFichaMembro');
        };
        document.body.appendChild(modalFicha);
      }
      
      modalFicha.innerHTML = fichaHTML;
      
      const botaoCurriculo = modalFicha.querySelector('.modal-btn-primary');
      botaoCurriculo.membroRef = membroLinha;
      
      modalFicha.classList.add('active');
    }

    function verEditarCurriculoCompleto(botao) {
      const membroLinha = botao.membroRef;
      fecharModal('modalFichaMembro');
      verEditarCurriculo(membroLinha.querySelector('.btn-ver-curriculo'));
    }

    // ============================================
    // DRAG AND DROP
    // ============================================
    function configurarDragAndDrop() {
      const membros = document.querySelectorAll('.membro-linha[draggable="true"]');
      const camaras = document.querySelectorAll('.camara');
      
      membros.forEach(membro => {
        membro.addEventListener('dragstart', handleDragStart);
        membro.addEventListener('dragend', handleDragEnd);
      });
      
      camaras.forEach(camara => {
        camara.addEventListener('dragover', handleDragOver);
        camara.addEventListener('drop', handleDrop);
        camara.addEventListener('dragleave', handleDragLeave);
      });
    }

    let membroArrastado = null;

    function handleDragStart(e) {
      if(!modoEdicao) {
        e.preventDefault();
        return;
      }
      membroArrastado = this;
      this.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    }

    function handleDragEnd(e) {
      this.classList.remove('dragging');
    }

    function handleDragOver(e) {
      if(!modoEdicao) return;
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      this.classList.add('drag-over');
    }

    function handleDragLeave(e) {
      this.classList.remove('drag-over');
    }

    function handleDrop(e) {
      if(!modoEdicao) return;
      e.preventDefault();
      this.classList.remove('drag-over');
      
      if(!membroArrastado) return;
      
      const nomeMembro = membroArrastado.querySelector('.nome-membro')?.textContent || 'Membro';
      const boneco = membroArrastado.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
      const nomeCamara = this.querySelector('.camara-nome')?.textContent || 'CÃ¢mara';
      
      if(confirm(`â• Adicionar "${nomeMembro}" Ã  cÃ¢mara "${nomeCamara}"?`)) {
        const camaraMembros = this.querySelector('.camara-membros');
        
        const jaExiste = Array.from(camaraMembros.querySelectorAll('.camara-membro')).some(m => 
          m.querySelector('.nome-membro')?.textContent === nomeMembro
        );
        
        if(jaExiste) {
          alert('âš ï¸ Este membro jÃ¡ estÃ¡ nesta cÃ¢mara!');
          return;
        }
        
        const membroCamara = document.createElement('div');
        membroCamara.className = 'camara-membro';
        membroCamara.innerHTML = `
          <span class="bonequinho">${boneco}</span>
          <div class="nome-membro">${nomeMembro}</div>
          <button class="btn-remove" onclick="removerMembroCamara(this)">ğŸ—‘ï¸</button>
        `;
        
        camaraMembros.appendChild(membroCamara);
        atualizarContadorCamara(this);
        
        alert(`âœ… "${nomeMembro}" adicionado Ã  cÃ¢mara "${nomeCamara}"!`);
      }
    }

    function removerMembroCamara(btn) {
      if(!modoEdicao) return;
      
      if(confirm('â“ Remover este membro da cÃ¢mara?')) {
        const camara = btn.closest('.camara');
        btn.closest('.camara-membro').remove();
        atualizarContadorCamara(camara);
      }
    }

    // ============================================
    // CÃ‚MARAS TEMÃTICAS
    // ============================================
    function abrirModalCriarCamara() {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }
      
      document.getElementById('inputNomeCamara').value = '';
      document.getElementById('inputEmojiCamara').value = '';
      document.getElementById('previewEmojiCamara').style.display = 'none';
      
      document.getElementById('modalCriarCamara').classList.add('active');
    }

    function confirmarCriarCamara() {
      const nome = document.getElementById('inputNomeCamara').value;
      const emoji = document.getElementById('inputEmojiCamara').value || 'ğŸ›ï¸';
      
      if(!nome) {
        alert('âš ï¸ Preencha o nome da cÃ¢mara!');
        return;
      }
      
      const slug = gerarSlugUnico(nome);
      
      const grid = document.getElementById('camarasGrid');
      const novaCamara = document.createElement('div');
      novaCamara.className = 'camara';
      novaCamara.dataset.camara = slug;
      novaCamara.innerHTML = `
        <div class="camara-header">
          <div class="camara-nome">${emoji} ${nome}</div>
          <div class="camara-contador">0 membros</div>
          <button class="btn-editar-nome-camara" onclick="editarNomeCamara(this)">âœï¸</button>
          <button class="btn-remover-camara" onclick="removerCamara(this)">ğŸ—‘ï¸</button>
        </div>
        <div class="camara-membros"></div>
        <div class="camara-atividades"></div>
        <div class="camara-gts"></div>
        <button class="btn-add-atividade" onclick="abrirModalAdicionarAtividade(this, false)">âœ… Atividade</button>
        <button class="btn-add-gt" onclick="abrirModalCriarGT(this)">ğŸ“‹ GT</button>
      `;
      
      grid.appendChild(novaCamara);
      configurarDragAndDrop();
      
      fecharModal('modalCriarCamara');
      alert(`âœ… CÃ¢mara "${nome}" criada!\n\nğŸ”— Slug gerado: ${slug}`);
      
      document.getElementById('inputNomeCamara').value = '';
      document.getElementById('inputEmojiCamara').value = '';
      document.getElementById('previewEmojiCamara').style.display = 'none';
    }

    function editarNomeCamara(btn) {
      if(!modoEdicao) return;
      
      const camara = btn.closest('.camara');
      const nomeAtual = camara.querySelector('.camara-nome').textContent;
      
      camaraEdicaoNomeAtual = camara;
      document.getElementById('inputNovoNomeCamara').value = nomeAtual;
      document.getElementById('modalEditarNomeCamara').classList.add('active');
    }

    function confirmarEditarNomeCamara() {
      const novoNome = document.getElementById('inputNovoNomeCamara').value;
      
      if(!novoNome) {
        alert('âš ï¸ Digite um nome!');
        return;
      }
      
      if(camaraEdicaoNomeAtual) {
        camaraEdicaoNomeAtual.querySelector('.camara-nome').textContent = novoNome;
        fecharModal('modalEditarNomeCamara');
        alert('âœ… Nome da cÃ¢mara atualizado!');
      }
    }

    function removerCamara(btn) {
      if(!modoEdicao) return;
      
      if(confirm('â“ Remover esta cÃ¢mara?\n\nTodos os membros, atividades e GTs serÃ£o perdidos!')) {
        btn.closest('.camara').remove();
        alert('âœ… CÃ¢mara removida!');
      }
    }

    // ============================================
    // ATIVIDADES
    // ============================================
    function abrirModalAdicionarAtividade(btn, isGT) {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }
      
      elementoAtividadeAtual = btn;
      isAtividadeGT = isGT;
      atividadeEmEdicao = null;
      
      document.getElementById('headerAtividade').textContent = isGT ? 'âœ… Adicionar Atividade ao GT' : 'âœ… Adicionar Atividade';
      document.getElementById('inputObjetivoAtiv').value = '';
      document.getElementById('inputResponsavelAtiv').value = '';
      document.getElementById('inputPrazoAtiv').value = '';
      document.getElementById('inputResultadoAtiv').value = '';
      
      document.getElementById('modalAdicionarAtividade').classList.add('active');
    }

    function editarAtividade(btn) {
      if(!modoEdicao) return;
      
      const atividade = btn.closest('.atividade-card');
      atividadeEmEdicao = atividade;
      
      const objetivo = atividade.querySelector('.atividade-titulo')?.textContent || '';
      const responsavel = atividade.querySelector('.atividade-info')?.textContent.replace('ğŸ‘¤ ', '').split(' | ')[0] || '';
      const prazo = atividade.dataset.prazo || '';
      const resultado = atividade.querySelector('.atividade-resultado')?.textContent.replace('ğŸ“Œ ', '') || '';
      
      document.getElementById('headerAtividade').textContent = 'âœï¸ Editar Atividade';
      document.getElementById('inputObjetivoAtiv').value = objetivo;
      document.getElementById('inputResponsavelAtiv').value = responsavel;
      document.getElementById('inputPrazoAtiv').value = prazo;
      document.getElementById('inputResultadoAtiv').value = resultado;
      
      elementoAtividadeAtual = btn;
      isAtividadeGT = atividade.closest('.gt-atividades-internas') !== null;
      
      document.getElementById('modalAdicionarAtividade').classList.add('active');
    }

    function confirmarAdicionarAtividade() {
      const objetivo = document.getElementById('inputObjetivoAtiv').value;
      const responsavel = document.getElementById('inputResponsavelAtiv').value;
      const prazo = document.getElementById('inputPrazoAtiv').value;
      const resultado = document.getElementById('inputResultadoAtiv').value;
      
      if(!objetivo || !responsavel || !prazo) {
        alert('âš ï¸ Preencha objetivo, responsÃ¡vel e prazo!');
        return;
      }
      
      fecharModal('modalAdicionarAtividade');
      
      if(resultado) {
        document.getElementById('modalStatusAtividade').classList.add('active');
      } else {
        finalizarAdicionarAtividade(false);
      }
    }

    function marcarStatusAtividade(concluida) {
      fecharModal('modalStatusAtividade');
      finalizarAdicionarAtividade(concluida);
    }

    function finalizarAdicionarAtividade(concluida) {
      const objetivo = document.getElementById('inputObjetivoAtiv').value;
      const responsavel = document.getElementById('inputResponsavelAtiv').value;
      const prazo = document.getElementById('inputPrazoAtiv').value;
      const resultado = document.getElementById('inputResultadoAtiv').value;
      
      const dataFormatada = new Date(prazo).toLocaleDateString('pt-BR');
      
      if(atividadeEmEdicao) {
        atividadeEmEdicao.querySelector('.atividade-titulo').textContent = objetivo;
        atividadeEmEdicao.querySelector('.atividade-info').textContent = `ğŸ‘¤ ${responsavel} | ğŸ“… ${dataFormatada}`;
        atividadeEmEdicao.dataset.prazo = prazo;
        atividadeEmEdicao.dataset.concluida = resultado ? concluida : 'false';
        
        const resultadoEl = atividadeEmEdicao.querySelector('.atividade-resultado');
        if(resultado) {
          if(resultadoEl) {
            resultadoEl.textContent = `ğŸ“Œ ${resultado}`;
          } else {
            const novoResultado = document.createElement('div');
            novoResultado.className = 'atividade-resultado';
            novoResultado.textContent = `ğŸ“Œ ${resultado}`;
            atividadeEmEdicao.querySelector('.atividade-info').after(novoResultado);
          }
          
          const statusEl = atividadeEmEdicao.querySelector('.atividade-status');
          if(statusEl) {
            statusEl.className = `atividade-status ${concluida ? 'concluida' : 'nao-concluida'}`;
            statusEl.textContent = concluida ? 'âœ… CONCLUÃDA' : 'â³ NÃƒO CONCLUÃDA';
          }
        }
        
        alert('âœ… Atividade atualizada!');
      } else {
        const atividade = document.createElement('div');
        atividade.className = 'atividade-card';
        atividade.dataset.prazo = prazo;
        atividade.dataset.concluida = resultado ? concluida : 'false';
        
        atividade.innerHTML = `
          <div class="atividade-titulo">${objetivo}</div>
          <div class="atividade-info">ğŸ‘¤ ${responsavel} | ğŸ“… ${dataFormatada}</div>
          ${resultado ? `<div class="atividade-resultado">ğŸ“Œ ${resultado}</div>` : ''}
          ${resultado ? `<div class="atividade-status ${concluida ? 'concluida' : 'nao-concluida'}">${concluida ? 'âœ… CONCLUÃDA' : 'â³ NÃƒO CONCLUÃDA'}</div>` : ''}
          <button class="btn-edit-atividade" onclick="editarAtividade(this)">âœï¸</button>
          <button class="btn-remove" onclick="removerAtividade(this)">ğŸ—‘ï¸</button>
        `;
        
        if(isAtividadeGT) {
          const gt = elementoAtividadeAtual.closest('.gt-card');
          let container = gt.querySelector('.gt-atividades-internas');
          if(!container) {
            container = document.createElement('div');
            container.className = 'gt-atividades-internas';
            gt.querySelector('.gt-objetivo').after(container);
          }
          container.appendChild(atividade);
        } else {
          const camara = elementoAtividadeAtual.closest('.camara');
          const container = camara.querySelector('.camara-atividades');
          container.appendChild(atividade);
        }
        
        alert('âœ… Atividade criada!');
      }
    }

    function removerAtividade(btn) {
      if(!modoEdicao) return;
      
      if(confirm('â“ Remover esta atividade?')) {
        btn.closest('.atividade-card').remove();
        alert('âœ… Atividade removida!');
      }
    }

    // ============================================
    // GRUPOS DE TRABALHO (GT)
    // ============================================
    function abrirModalCriarGT(btn) {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }
      
      elementoGTAtual = btn;
      
      document.getElementById('inputTituloGT').value = '';
      document.getElementById('inputObjetivoGT').value = '';
      document.getElementById('inputResponsavelGT').value = '';
      document.getElementById('inputComponentesGT').value = '';
      document.getElementById('inputResultadoGT').value = '';
      
      document.getElementById('modalCriarGT').classList.add('active');
    }

    function editarGT(btn) {
      if(!modoEdicao) return;
      
      const gt = btn.closest('.gt-card');
      elementoGTAtual = gt;
      
      const titulo = gt.querySelector('.gt-titulo')?.textContent || '';
      const responsavel = gt.querySelector('.gt-responsavel')?.textContent.replace('ğŸ‘¤ ', '') || '';
      const objetivo = gt.querySelector('.gt-objetivo')?.textContent.replace('ğŸ¯ ', '') || '';
      const componentes = gt.querySelector('.gt-componentes')?.textContent.replace('ğŸ‘¥ ', '') || '';
      const resultado = gt.querySelector('.gt-resultado')?.textContent.replace('ğŸ“Œ ', '') || '';
      
      document.getElementById('inputTituloGT').value = titulo;
      document.getElementById('inputObjetivoGT').value = objetivo;
      document.getElementById('inputResponsavelGT').value = responsavel;
      document.getElementById('inputComponentesGT').value = componentes;
      document.getElementById('inputResultadoGT').value = resultado;
      
      document.getElementById('modalCriarGT').classList.add('active');
    }

    function confirmarCriarGT() {
      const titulo = document.getElementById('inputTituloGT').value;
      const objetivo = document.getElementById('inputObjetivoGT').value;
      const responsavel = document.getElementById('inputResponsavelGT').value;
      const componentes = document.getElementById('inputComponentesGT').value;
      const resultado = document.getElementById('inputResultadoGT').value;
      
      if(!titulo || !objetivo || !responsavel) {
        alert('âš ï¸ Preencha tÃ­tulo, objetivo e responsÃ¡vel!');
        return;
      }
      
      if(elementoGTAtual && elementoGTAtual.classList && elementoGTAtual.classList.contains('gt-card')) {
        elementoGTAtual.querySelector('.gt-titulo').textContent = titulo;
        elementoGTAtual.querySelector('.gt-responsavel').textContent = `ğŸ‘¤ ${responsavel}`;
        elementoGTAtual.querySelector('.gt-objetivo').textContent = `ğŸ¯ ${objetivo}`;
        
        const compEl = elementoGTAtual.querySelector('.gt-componentes');
        if(componentes) {
          compEl.textContent = `ğŸ‘¥ ${componentes}`;
        }
        
        const resEl = elementoGTAtual.querySelector('.gt-resultado');
        if(resultado) {
          if(resEl) {
            resEl.textContent = `ğŸ“Œ ${resultado}`;
          } else {
            const novoRes = document.createElement('div');
            novoRes.className = 'gt-resultado';
            novoRes.textContent = `ğŸ“Œ ${resultado}`;
            elementoGTAtual.querySelector('.gt-objetivo').after(novoRes);
          }
        }
        
        alert('âœ… GT atualizado!');
      } else {
        const camara = elementoGTAtual.closest('.camara');
        const container = camara.querySelector('.camara-gts');
        
        const gt = document.createElement('div');
        gt.className = 'gt-card';
        gt.innerHTML = `
          <div class="gt-titulo editable" contenteditable="false">${titulo}</div>
          <div class="gt-responsavel editable" contenteditable="false">ğŸ‘¤ ${responsavel}</div>
          <div class="gt-objetivo editable" contenteditable="false">ğŸ¯ ${objetivo}</div>
          ${componentes ? `<div class="gt-componentes editable" contenteditable="false">ğŸ‘¥ ${componentes}</div>` : ''}
          ${componentes ? `<button class="btn-ver-componentes" onclick="toggleComponentes(this)">ğŸ‘¥ Ver Componentes</button>` : ''}
          ${resultado ? `<div class="gt-resultado">ğŸ“Œ ${resultado}</div>` : ''}
          <div class="gt-atividades-internas"></div>
          <button class="btn-edit-gt" onclick="editarGT(this)">âœï¸ Editar</button>
          <button class="btn-add-atividade" onclick="abrirModalAdicionarAtividade(this, true)">âœ… Atividade GT</button>
          <button class="btn-remove" onclick="removerGT(this)">ğŸ—‘ï¸</button>
        `;
        
        container.appendChild(gt);
        alert('âœ… GT criado!');
      }
      
      fecharModal('modalCriarGT');
    }

    function removerGT(btn) {
      if(!modoEdicao) return;
      
      if(confirm('â“ Remover este GT?')) {
        btn.closest('.gt-card').remove();
        alert('âœ… GT removido!');
      }
    }
// ============================================
// FUNÃ‡ÃƒO PARA ABRIR MODAL DE CRIAÃ‡ÃƒO DE CÃ‚MARA
// ============================================
function abrirModalCriarCamara() {
    if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
    }
    
    // Resetar o modal
    document.getElementById('inputNomeCamara').value = '';
    document.getElementById('inputEmojiCamara').value = 'ğŸ”¬';
    document.getElementById('emojiSelecionadoPreview').textContent = 'ğŸ”¬';
    
    // Resetar seleÃ§Ã£o de emojis
    document.querySelectorAll('.emoji-option-simples').forEach(el => {
        el.classList.remove('selecionado');
    });
    
    // Selecionar o primeiro emoji por padrÃ£o
    const primeiroEmoji = document.querySelector('.emoji-option-simples');
    if (primeiroEmoji) {
        primeiroEmoji.classList.add('selecionado');
    }
    
    document.getElementById('modalCriarCamara').classList.add('active');
}
    function toggleComponentes(btn) {
      const gt = btn.closest('.gt-card');
      const comp = gt.querySelector('.gt-componentes');
      if(comp) {
        comp.classList.toggle('show');
        btn.textContent = comp.classList.contains('show') ? 'ğŸ”¼ Ocultar Componentes' : 'ğŸ‘¥ Ver Componentes';
      }
    }
    
    // ============================================
    // ANÃLISES
    // ============================================
    function mostrarAnalise(tipo) {
      document.querySelectorAll('.analise-content').forEach(c => c.classList.remove('active'));
      document.querySelectorAll('.analise-btn').forEach(b => b.classList.remove('active'));
      
      if(tipo === 'presenca') {
        document.getElementById('analisePresenca').classList.add('active');
        event.target.classList.add('active');
        gerarRankingPresenca();
      } else if(tipo === 'composicao') {
        document.getElementById('analiseComposicao').classList.add('active');
        event.target.classList.add('active');
        gerarComposicao();
      } else if(tipo === 'estados') {
        document.getElementById('analiseEstados').classList.add('active');
        event.target.classList.add('active');
        gerarPorEstado();
      } else if(tipo === 'atividades') {
        document.getElementById('analiseAtividades').classList.add('active');
        event.target.classList.add('active');
        gerarAnaliseAtividades();
      }
    }

    function gerarAnalises() {
      gerarRankingPresenca();
      gerarComposicao();
      gerarPorEstado();
      gerarAnaliseAtividades();
    }

    function gerarRankingPresenca() {
      const membros = [];
      
      document.querySelectorAll('.membro-linha:not(.vazio)').forEach(membro => {
        const nome = membro.querySelector('.nome-membro')?.textContent || '';
        const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
        const boneco = membro.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
        const bolinhas = membro.querySelectorAll('.bolinha-presenca');
        
        let presencas = 0;
        let justificadas = 0;
        let faltas = 0;
        
        bolinhas.forEach(b => {
          if(b.classList.contains('verde')) presencas++;
          else if(b.classList.contains('amarelo')) justificadas++;
          else if(b.classList.contains('vermelho')) faltas++;
        });
        
        const score = (presencas * 10) + (justificadas * 5);
        
        if(nome && nome !== 'VAGA' && nome.trim() !== '' && nome !== '-') {
          membros.push({ nome, entidade, boneco, presencas, justificadas, faltas, score });
        }
      });
      
      membros.sort((a, b) => b.score - a.score);
      
      const container = document.getElementById('rankingContainer');
      container.innerHTML = '';
      
      if(membros.length === 0) {
        container.innerHTML = '<div class="mensagem-vazio">Nenhum registro de presenÃ§a encontrado</div>';
        return;
      }
      
      membros.forEach((m, index) => {
        const item = document.createElement('div');
        item.className = 'ranking-item';
        item.style.cssText = `
          display: flex; align-items: center; gap: 15px; padding: 12px; 
          margin-bottom: 8px; background: #f8f9fa; border-radius: 8px; 
          border-left: 4px solid #51cf66;
        `;
        item.innerHTML = `
          <div style="font-size: 1.5em; font-weight: bold; color: #667eea; min-width: 40px; text-align: center;">${index + 1}Âº</div>
          <div style="font-size: 2em;">${m.boneco}</div>
          <div style="flex: 1;">
            <div style="font-weight: bold; font-size: 1em; color: #2c3e50;">${m.nome}</div>
            <div style="font-size: 0.85em; color: #6c757d; font-style: italic;">${m.entidade}</div>
            <div style="font-size: 0.75em; color: #868e96;">
              ğŸŸ¢ ${m.presencas} | ğŸŸ¡ ${m.justificadas} | ğŸ”´ ${m.faltas}
            </div>
          </div>
          <div style="font-size: 1.2em; font-weight: bold; color: #51cf66; min-width: 80px; text-align: center;">${m.score} pts</div>
        `;
        container.appendChild(item);
      });
    }

    function gerarComposicao() {
      const container = document.getElementById('composicaoContainer');
      container.innerHTML = '';
      
      const grupos = [
        { id: 'poder-publico', titulo: 'âš–ï¸ PODER PÃšBLICO' },
        { id: 'sociedade-civil', titulo: 'ğŸ¤ SOCIEDADE CIVIL' }
      ];
      
      grupos.forEach(grupoInfo => {
        const grupo = document.getElementById(grupoInfo.id);
        if(!grupo) return;
        
        const grupoDiv = document.createElement('div');
        grupoDiv.className = 'composicao-grupo';
        
        const titulo = document.createElement('div');
        titulo.className = 'composicao-grupo-titulo';
        titulo.textContent = grupoInfo.titulo;
        grupoDiv.appendChild(titulo);
        
        const setores = grupo.querySelectorAll('.setor');
        const numSetores = setores.length;
        const numCadeiras = grupo.querySelectorAll('.cadeira').length;
        
        const contadorDiv = document.createElement('div');
        contadorDiv.className = 'grupo-contador';
        contadorDiv.innerHTML = `
          <span>ğŸ“‚ Setores: <strong class="contador-setores">${numSetores}</strong></span>
          <span>ğŸª‘ Cadeiras: <strong class="contador-cadeiras-total">${numCadeiras}</strong></span>
        `;
        grupoDiv.appendChild(contadorDiv);
        
        setores.forEach(setor => {
          const setorDiv = document.createElement('div');
          setorDiv.className = 'composicao-setor';
          
          const tituloSetor = setor.querySelector('.titulo-setor .editable')?.textContent || 'Setor';
          const numCadeirasSetor = setor.querySelectorAll('.cadeira').length;
          
          const tituloSetorDiv = document.createElement('div');
          tituloSetorDiv.className = 'composicao-setor-titulo';
          tituloSetorDiv.innerHTML = `
            ${tituloSetor}
            <span class="composicao-cadeiras-info">${numCadeirasSetor} cadeira${numCadeirasSetor !== 1 ? 's' : ''}</span>
          `;
          setorDiv.appendChild(tituloSetorDiv);
          
          const cadeirasContainer = document.createElement('div');
          cadeirasContainer.className = 'composicao-cadeiras-container';
          
          setor.querySelectorAll('.cadeira').forEach(cadeira => {
            const cadeiraBloco = document.createElement('div');
            cadeiraBloco.className = 'composicao-cadeira-bloco';
            
            const icone = cadeira.querySelector('.icone-cadeira')?.textContent || 'ğŸª‘';
            const iconeDiv = document.createElement('div');
            iconeDiv.className = 'composicao-icone-cadeira';
            iconeDiv.textContent = icone;
            cadeiraBloco.appendChild(iconeDiv);
            
            const membrosDiv = document.createElement('div');
            membrosDiv.className = 'composicao-membros-cadeira';
            
            cadeira.querySelectorAll('.membro-linha').forEach(membro => {
              const nome = membro.querySelector('.nome-membro')?.textContent || '';
              const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
              const boneco = membro.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
              const logo = membro.querySelector('.logo-instituicao')?.textContent || 'ğŸ›ï¸';
              const tipo = membro.classList.contains('titular') ? 'titular' : 'suplente';
              const estado = membro.dataset.estado || '';
              
              const card = document.createElement('div');
              card.className = 'composicao-card';
              card.dataset.estado = estado;
              card.innerHTML = `
                <div class="composicao-boneco">${boneco}</div>
                <div class="composicao-entidade">${nome}</div>
                <div style="font-size: 0.7em; color: #6c757d; margin-bottom: 3px;">${entidade}</div>
                <div class="composicao-cargo ${tipo}">${tipo === 'titular' ? 'Titular' : 'Suplente'}</div>
              `;
              membrosDiv.appendChild(card);
            });
            
            cadeiraBloco.appendChild(membrosDiv);
            cadeirasContainer.appendChild(cadeiraBloco);
          });
          
          setorDiv.appendChild(cadeirasContainer);
          grupoDiv.appendChild(setorDiv);
        });
        
        container.appendChild(grupoDiv);
      });
    }

    function gerarPorEstado() {
      const container = document.getElementById('estadosContainer');
      container.innerHTML = '';
      
      const estados = {
        'AC': { nome: 'ACRE', emoji: 'ğŸŒ³', membros: [] },
        'AL': { nome: 'ALAGOAS', emoji: 'ğŸ–ï¸', membros: [] },
        'AP': { nome: 'AMAPÃ', emoji: 'ğŸŒŠ', membros: [] },
        'AM': { nome: 'AMAZONAS', emoji: 'ğŸŒ´', membros: [] },
        'BA': { nome: 'BAHIA', emoji: 'â˜€ï¸', membros: [] },
        'CE': { nome: 'CEARÃ', emoji: 'ğŸŒµ', membros: [] },
        'DF': { nome: 'DISTRITO FEDERAL', emoji: 'ğŸ›ï¸', membros: [] },
        'ES': { nome: 'ESPÃRITO SANTO', emoji: 'â›°ï¸', membros: [] },
        'GO': { nome: 'GOIÃS', emoji: 'ğŸŒ¾', membros: [] },
        'MA': { nome: 'MARANHÃƒO', emoji: 'ğŸ–ï¸', membros: [] },
        'MT': { nome: 'MATO GROSSO', emoji: 'ğŸ„', membros: [] },
        'MS': { nome: 'MATO GROSSO DO SUL', emoji: 'ğŸŒ³', membros: [] },
        'MG': { nome: 'MINAS GERAIS', emoji: 'â›°ï¸', membros: [] },
        'PA': { nome: 'PARÃ', emoji: 'ğŸŒ´', membros: [] },
        'PB': { nome: 'PARAÃBA', emoji: 'ğŸŒµ', membros: [] },
        'PR': { nome: 'PARANÃ', emoji: 'ğŸŒ²', membros: [] },
        'PE': { nome: 'PERNAMBUCO', emoji: 'ğŸ–ï¸', membros: [] },
        'PI': { nome: 'PIAUÃ', emoji: 'ğŸŒµ', membros: [] },
        'RJ': { nome: 'RIO DE JANEIRO', emoji: 'ğŸ–ï¸', membros: [] },
        'RN': { nome: 'RIO GRANDE DO NORTE', emoji: 'ğŸŒµ', membros: [] },
        'RS': { nome: 'RIO GRANDE DO SUL', emoji: 'ğŸ„', membros: [] },
        'RO': { nome: 'RONDÃ”NIA', emoji: 'ğŸŒ³', membros: [] },
        'RR': { nome: 'RORAIMA', emoji: 'ğŸŒ´', membros: [] },
        'SC': { nome: 'SANTA CATARINA', emoji: 'ğŸ–ï¸', membros: [] },
        'SP': { nome: 'SÃƒO PAULO', emoji: 'ğŸ™ï¸', membros: [] },
        'SE': { nome: 'SERGIPE', emoji: 'ğŸŒµ', membros: [] },
        'TO': { nome: 'TOCANTINS', emoji: 'ğŸŒ´', membros: [] }
      };
      
      document.querySelectorAll('.membro-linha:not(.vazio)').forEach(membro => {
        const nome = membro.querySelector('.nome-membro')?.textContent || '';
        const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
        const municipio = membro.querySelector('.municipio-membro')?.textContent.replace('ğŸ“ ', '') || '';
        const boneco = membro.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
        const estado = membro.dataset.estado || '';
        
        if(nome && nome !== 'VAGA' && nome.trim() !== '' && estado && estados[estado]) {
          estados[estado].membros.push({ nome, entidade, municipio, boneco });
        }
      });
      
      Object.keys(estados).forEach(sigla => {
        const estado = estados[sigla];
        
        if (estado.membros.length === 0) return;
        
        const estadoDiv = document.createElement('div');
        estadoDiv.style.cssText = `
          margin-bottom: 25px; padding: 15px; border-radius: 10px;
        `;
        
        if(sigla === 'AC') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FFE0E0 0%, #FFCDD2 100%);';
        if(sigla === 'AL') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%);';
        if(sigla === 'AP') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);';
        if(sigla === 'AM') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C9 100%);';
        if(sigla === 'BA') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%);';
        if(sigla === 'CE') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E0F2F1 0%, #B2DFDB 100%);';
        if(sigla === 'DF') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);';
        if(sigla === 'ES') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E8EAF6 0%, #C5CAE9 100%);';
        if(sigla === 'GO') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FCE4EC 0%, #F8BBD0 100%);';
        if(sigla === 'MA') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E0F7FA 0%, #B2EBF2 100%);';
        if(sigla === 'MT') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%);';
        if(sigla === 'MS') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);';
        if(sigla === 'MG') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #F1F8E9 0%, #DCEDC8 100%);';
        if(sigla === 'PA') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FFFDE7 0%, #FFF9C4 100%);';
        if(sigla === 'PB') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E1F5FE 0%, #B3E5FC 100%);';
        if(sigla === 'PR') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #F9FBE7 0%, #F0F4C3 100%);';
        if(sigla === 'PE') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #EDE7F6 0%, #D1C4E9 100%);';
        if(sigla === 'PI') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E0F2F1 0%, #B2DFDB 100%);';
        if(sigla === 'RJ') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FFEBEE 0%, #FFCDD2 100%);';
        if(sigla === 'RN') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);';
        if(sigla === 'RS') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 100%);';
        if(sigla === 'RO') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%);';
        if(sigla === 'RR') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E8F5E8 0%, #C8E6C9 100%);';
        if(sigla === 'SC') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FFF9C4 0%, #FFF59D 100%);';
        if(sigla === 'SP') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E3F2FD 0%, #BBDEFB 100%);';
        if(sigla === 'SE') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #FCE4EC 0%, #F8BBD0 100%);';
        if(sigla === 'TO') estadoDiv.style.cssText += 'background: linear-gradient(135deg, #E8EAF6 0%, #C5CAE9 100%);';
        
        const titulo = document.createElement('div');
        titulo.style.cssText = `
          font-size: 1.4em; font-weight: bold; color: #2c3e50; 
          margin-bottom: 12px; padding-bottom: 8px; 
          border-bottom: 2px solid #667eea; display: flex; 
          align-items: center; gap: 8px;
        `;
        titulo.innerHTML = `
          ${estado.emoji} ${estado.nome}
          <span style="background: #667eea; color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.7em;">
            ${estado.membros.length} membro${estado.membros.length !== 1 ? 's' : ''}
          </span>
        `;
        estadoDiv.appendChild(titulo);
        
        const grid = document.createElement('div');
        grid.style.cssText = 'display: grid; grid-template-columns: repeat(auto-fill, minmax(130px, 1fr)); gap: 10px;';
        
        if(estado.membros.length === 0) {
          grid.innerHTML = '<div style="text-align: center; padding: 20px; color: #6c757d; font-style: italic;">Nenhum membro deste estado</div>';
        } else {
          estado.membros.forEach(m => {
            const card = document.createElement('div');
            card.style.cssText = `
              background: white; border: 2px solid #dee2e6; 
              border-radius: 8px; padding: 10px; text-align: center;
            `;
            card.innerHTML = `
              <div style="font-size: 2em; margin-bottom: 5px;">${m.boneco}</div>
              <div style="font-weight: bold; font-size: 0.8em; color: #2c3e50; margin-bottom: 3px;">${m.nome}</div>
              <div style="font-size: 0.7em; color: #6c757d; font-style: italic; margin-bottom: 3px;">${m.entidade}</div>
              <div style="font-size: 0.65em; color: #868e96;">${m.municipio}</div>
            `;
            grid.appendChild(card);
          });
        }
        
        estadoDiv.appendChild(grid);
        container.appendChild(estadoDiv);
      });
    }

    function gerarAnaliseAtividades() {
      const container = document.getElementById('atividadesContainer');
      container.innerHTML = '';
      
      const atividades = [];
      
      document.querySelectorAll('.atividade-card').forEach(ativ => {
        const titulo = ativ.querySelector('.atividade-titulo')?.textContent || '';
        const info = ativ.querySelector('.atividade-info')?.textContent || '';
        const resultado = ativ.querySelector('.atividade-resultado')?.textContent.replace('ğŸ“Œ ', '') || '';
        const concluida = ativ.dataset.concluida === 'true';
        const prazo = ativ.dataset.prazo || '';
        
        const camara = ativ.closest('.camara');
        const nomeCamara = camara ? camara.querySelector('.camara-nome')?.textContent : 'Geral';
        
        atividades.push({ titulo, info, resultado, concluida, prazo, nomeCamara });
      });
      
      if(atividades.length === 0) {
        container.innerHTML = '<div class="mensagem-vazio">Nenhuma atividade cadastrada</div>';
        return;
      }
      
      atividades.forEach(a => {
        const card = document.createElement('div');
        card.style.cssText = `
          background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); 
          border-radius: 8px; padding: 10px; margin-bottom: 8px; 
          border-left: 3px solid #2196f3;
        `;
        card.innerHTML = `
          <div style="font-weight: bold; color: #2c3e50; margin-bottom: 4px; font-size: 0.85em;">${a.titulo}</div>
          <div style="font-size: 0.75em; color: #495057; margin-bottom: 4px;">${a.info} | ğŸ›ï¸ ${a.nomeCamara}</div>
          ${a.resultado ? `<div style="background: white; padding: 6px; border-radius: 4px; font-size: 0.75em; color: #2c3e50; margin-top: 6px; border-left: 3px solid #667eea;">ğŸ“Œ ${a.resultado}</div>` : ''}
          ${a.resultado ? `<div style="margin-top: 6px; padding: 4px 8px; border-radius: 5px; font-size: 0.7em; font-weight: bold; display: inline-block; background: ${a.concluida ? '#2ecc71' : '#ffd43b'}; color: ${a.concluida ? 'white' : '#333'};">${a.concluida ? 'âœ… CONCLUÃDA' : 'â³ NÃƒO CONCLUÃDA'}</div>` : '<div style="margin-top: 6px; padding: 4px 8px; border-radius: 5px; font-size: 0.7em; font-weight: bold; display: inline-block; background: #ffd43b; color: #333;">ğŸ”“ ABERTA</div>'}
        `;
        container.appendChild(card);
      });
    }
    
    // ============================================
    // IMPRIMIR LISTA DE PRESENÃ‡A
    // ============================================
   function imprimirListaPresenca() {
  const membros = [];
  
  // Coletar membros na ordem das cadeiras (Poder PÃºblico -> Sociedade Civil)
  
  // 1. PresidÃªncia
  document.querySelectorAll('#presidenciaContainer .membro-linha:not(.vazio)').forEach(membro => {
    const nome = membro.querySelector('.nome-membro')?.textContent || '';
    const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
    const telefone = membro.dataset.telefone || '';
    const tipo = membro.classList.contains('titular') ? 'Titular' : 'Suplente';
    
    if(nome && nome.trim() !== '' && nome !== 'VAGA' && nome !== '-') {
      membros.push({ 
        nome, 
        entidade, 
        telefone, 
        tipo,
        ordem: '0-presidencia',
        cadeira: 'PRESIDÃŠNCIA'
      });
    }
  });
  
  // 2. Poder PÃºblico
  document.querySelectorAll('#poder-publico .membro-linha:not(.vazio)').forEach(membro => {
    const nome = membro.querySelector('.nome-membro')?.textContent || '';
    const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
    const telefone = membro.dataset.telefone || '';
    const tipo = membro.classList.contains('titular') ? 'Titular' : 'Suplente';
    const cadeira = membro.closest('.cadeira')?.querySelector('.numero-cadeira')?.textContent || '';
    const setor = membro.closest('.setor')?.querySelector('.titulo-setor .editable')?.textContent || '';
    
    if(nome && nome.trim() !== '' && nome !== 'VAGA' && nome !== '-') {
      membros.push({ 
        nome, 
        entidade, 
        telefone, 
        tipo,
        ordem: `1-poder-publico-${setor}-${cadeira}`,
        cadeira: `${setor} - ${cadeira}`
      });
    }
  });
  
  // 3. Sociedade Civil
  document.querySelectorAll('#sociedade-civil .membro-linha:not(.vazio)').forEach(membro => {
    const nome = membro.querySelector('.nome-membro')?.textContent || '';
    const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
    const telefone = membro.dataset.telefone || '';
    const tipo = membro.classList.contains('titular') ? 'Titular' : 'Suplente';
    const cadeira = membro.closest('.cadeira')?.querySelector('.numero-cadeira')?.textContent || '';
    const setor = membro.closest('.setor')?.querySelector('.titulo-setor .editable')?.textContent || '';
    
    if(nome && nome.trim() !== '' && nome !== 'VAGA' && nome !== '-') {
      membros.push({ 
        nome, 
        entidade, 
        telefone, 
        tipo,
        ordem: `2-sociedade-civil-${setor}-${cadeira}`,
        cadeira: `${setor} - ${cadeira}`
      });
    }
  });
  
  // Ordenar pela ordem definida
  membros.sort((a, b) => a.ordem.localeCompare(b.ordem));
  
  const dataReuniao = document.getElementById('dataReuniaoAtual').textContent;
  const localReuniao = document.getElementById('localReuniaoAtual').textContent;
  
  // Calcular totais para o quÃ³rum
  const totalCadeiras = calcularTotalCadeiras();
  const totalMembros = membros.length;
  
  const conteudoHTML = `
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Lista de PresenÃ§a</title>
      <style>
        body { 
          font-family: Arial, sans-serif; 
          margin: 0; 
          padding: 20px; 
          line-height: 1.4;
        }
        .container { max-width: 100%; }
        .header { 
          text-align: center; 
          margin-bottom: 20px; 
          border-bottom: 2px solid #333;
          padding-bottom: 15px;
        }
        .header h1 { 
          margin-bottom: 5px; 
          color: #2c3e50;
          font-size: 24px;
        }
        .quorum-info {
          background: #f8f9fa;
          padding: 10px;
          border-radius: 5px;
          margin-bottom: 15px;
          text-align: center;
          border-left: 4px solid #667eea;
        }
        .header .info { 
          margin-bottom: 10px; 
          font-size: 16px;
          color: #555;
        }
        table { 
          width: 100%; 
          border-collapse: collapse; 
          margin-bottom: 20px; 
          font-size: 14px;
          border: 1px solid #000;
        }
        th, td { 
          border: 1px solid #000; 
          padding: 10px 8px; 
          text-align: left; 
          vertical-align: top;
        }
        th { 
          background-color: #f2f2f2 !important; 
          font-weight: bold;
          text-align: center;
        }
        .numero-col { width: 5%; text-align: center; }
        .cadeira-col { width: 20%; }
        .nome-col { width: 25%; }
        .tipo-col { width: 10%; text-align: center; }
        .instituicao-col { width: 20%; }
        .assinatura-col { width: 20%; }
        .linha-assinatura {
          height: 25px;
          border-bottom: 2px solid #000 !important;
          margin-top: 10px;
          display: block;
        }
        .nome-assinatura {
          text-align: center;
          font-size: 11px;
          color: #000 !important;
          margin-top: 3px;
          font-weight: bold;
        }
        .data-local {
          margin-top: 30px;
          text-align: center;
          font-size: 12px;
          color: #000;
        }
        .grupo-header {
          background: #e9ecef !important;
          font-weight: bold;
          font-size: 1.1em;
        }
        
        /* ESTILOS ESPECÃFICOS PARA IMPRESSÃƒO */
        @media print {
          body { 
            margin: 0; 
            padding: 15px; 
            font-size: 12px;
            -webkit-print-color-adjust: exact !important;
            color-adjust: exact !important;
          }
          .header { 
            margin-bottom: 15px; 
            border-bottom: 2px solid #000 !important;
          }
          .quorum-info {
            background: #f8f9fa !important;
            -webkit-print-color-adjust: exact !important;
          }
          table { 
            border: 1px solid #000 !important;
            font-size: 11px;
          }
          th, td { 
            border: 1px solid #000 !important; 
            padding: 8px 6px;
          }
          th { 
            background-color: #f2f2f2 !important; 
            -webkit-print-color-adjust: exact !important;
          }
          .grupo-header {
            background: #e9ecef !important;
            -webkit-print-color-adjust: exact !important;
          }
          .linha-assinatura {
            border-bottom: 2px solid #000 !important;
            height: 20px;
            -webkit-print-color-adjust: exact !important;
          }
          .nome-assinatura {
            color: #000 !important;
            -webkit-print-color-adjust: exact !important;
          }
        }
      </style>
    </head>
    <body>
      <div class="container">
        <div class="header">
          <h1>LISTA DE PRESENÃ‡A</h1>
          <div class="info">
            <strong>Conselho Consultivo do Delta do ParnaÃ­ba</strong><br>
            <strong>Data:</strong> ${dataReuniao} | <strong>Local:</strong> ${localReuniao}
          </div>
          <div class="quorum-info">
            <strong>CONTROLE DE QUÃ“RUM:</strong> ${totalMembros} presentes de ${totalCadeiras} cadeiras | 
            <strong>QUÃ“RUM:</strong> <span id="statusQuorum">CALCULANDO...</span>
          </div>
        </div>
        
        <table>
          <thead>
            <tr>
              <th class="numero-col">#</th>
              <th class="cadeira-col">Cadeira/Setor</th>
              <th class="nome-col">Nome do Conselheiro</th>
              <th class="tipo-col">Tipo</th>
              <th class="instituicao-col">InstituiÃ§Ã£o/Entidade</th>
              <th class="assinatura-col">Assinatura</th>
            </tr>
          </thead>
          <tbody>
            ${membros.map((membro, index) => {
              let grupoHeader = '';
              // Adicionar cabeÃ§alho de grupo quando mudar
              if (index === 0) {
                grupoHeader = `<tr class="grupo-header"><td colspan="6">PRESIDÃŠNCIA</td></tr>`;
              } else if (membro.ordem.startsWith('1-poder-publico') && !membros[index-1].ordem.startsWith('1-poder-publico')) {
                grupoHeader = `<tr class="grupo-header"><td colspan="6">PODER PÃšBLICO</td></tr>`;
              } else if (membro.ordem.startsWith('2-sociedade-civil') && !membros[index-1].ordem.startsWith('2-sociedade-civil')) {
                grupoHeader = `<tr class="grupo-header"><td colspan="6">SOCIEDADE CIVIL</td></tr>`;
              }
              
              return `
                ${grupoHeader}
                <tr>
                  <td class="numero-col">${index + 1}</td>
                  <td class="cadeira-col">${membro.cadeira}</td>
                  <td class="nome-col"><strong>${membro.nome}</strong></td>
                  <td class="tipo-col">${membro.tipo}</td>
                  <td class="instituicao-col">${membro.entidade}</td>
                  <td class="assinatura-col">
                    <div class="linha-assinatura"></div>
                    <div class="nome-assinatura">${membro.nome.split(' ')[0]} ${membro.nome.split(' ').pop()}</div>
                  </td>
                </tr>
              `;
            }).join('')}
          </tbody>
        </table>
        
        <div class="data-local">
          ParnaÃ­ba, ${dataReuniao}
        </div>
      </div>
    
  

</body>
    </html>
  `;
  
  const janelaImpressao = window.open('', '_blank');
  janelaImpressao.document.write(conteudoHTML);
  janelaImpressao.document.close();
  
  setTimeout(() => {
    janelaImpressao.print();
    setTimeout(() => {
      janelaImpressao.close();
    }, 500);
  }, 1000);
}

// FunÃ§Ã£o para calcular total de cadeiras
function calcularTotalCadeiras() {
    let total = 0;
    
    // PresidÃªncia conta como 1 cadeira (se tiver membro)
    if (document.querySelectorAll('#presidenciaContainer .membro-linha:not(.vazio)').length > 0) {
        total += 1;
    }
    
    // Poder PÃºblico - cada .cadeira Ã© uma cadeira
    total += document.querySelectorAll('#poder-publico .cadeira').length;
    
    // Sociedade Civil - cada .cadeira Ã© uma cadeira
    total += document.querySelectorAll('#sociedade-civil .cadeira').length;
    
    return total;
}
    // ============================================
    // GERAR RELATÃ“RIO DE ANÃLISES
    // ============================================
    function gerarRelatorioAnalises() {
  const opcoes = [
    { id: 'presenca', nome: 'ğŸ“ˆ Ranking de PresenÃ§a' },
    { id: 'composicao', nome: 'ğŸ‘¥ ComposiÃ§Ã£o do Conselho' },
    { id: 'estados', nome: 'ğŸ—ºï¸ DistribuiÃ§Ã£o por Estados' },
    { id: 'atividades', nome: 'âœ… Atividades Realizadas' },
    { id: 'todos', nome: 'âœ… Selecionar Todos' }
  ];
  
  let modalHTML = `
    <div class="modal active" id="modalRelatorioAnalises">
      <div class="modal-content">
        <div class="modal-header">ğŸ“„ Gerar RelatÃ³rio de AnÃ¡lises</div>
        <p style="margin-bottom: 15px;">Selecione quais anÃ¡lises deseja incluir no relatÃ³rio:</p>
        <div style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
  `;
  
  opcoes.forEach(opcao => {
    const isTodos = opcao.id === 'todos';
    modalHTML += `
      <div style="margin-bottom: 10px; padding: 8px; background: #f8f9fa; border-radius: 5px;">
        <input type="checkbox" id="relatorio-${opcao.id}" value="${opcao.id}" ${isTodos ? 'onchange="selecionarTodosAnalises(this)"' : ''}>
        <label for="relatorio-${opcao.id}" style="margin-left: 8px; cursor: pointer;">${opcao.nome}</label>
      </div>
    `;
  });
  
  modalHTML += `
        </div>
        <div style="display: flex; gap: 10px; margin-top: 20px;">
          <button class="modal-btn modal-btn-primary" onclick="confirmarGerarRelatorio()" style="flex: 1;">ğŸ“„ Gerar RelatÃ³rio</button>
          <button class="modal-btn modal-btn-secondary" onclick="fecharModalRelatorioAnalises()" style="flex: 1;">âŒ Cancelar</button>
        </div>
      </div>
    </div>
  `;
  
  // Remover modal existente se houver
  const modalExistente = document.getElementById('modalRelatorioAnalises');
  if (modalExistente) {
    modalExistente.remove();
  }
  
  // Adicionar o novo modal ao body
  document.body.insertAdjacentHTML('beforeend', modalHTML);
}

// FunÃ§Ã£o para selecionar/deselecionar todas as anÃ¡lises
function selecionarTodosAnalises(checkbox) {
  const selecionarTodos = checkbox.checked;
  const checkboxes = document.querySelectorAll('#modalRelatorioAnalises input[type="checkbox"]');
  
  checkboxes.forEach(cb => {
    if (cb.id !== 'relatorio-todos') {
      cb.checked = selecionarTodos;
    }
  });
}

// FunÃ§Ã£o para fechar o modal de relatÃ³rio
function fecharModalRelatorioAnalises() {
  const modal = document.getElementById('modalRelatorioAnalises');
  if (modal) {
    modal.remove();
  }
}

// FunÃ§Ã£o confirmar geraÃ§Ã£o do relatÃ³rio (jÃ¡ existe, mas vou garantir que estÃ¡ correta)
function confirmarGerarRelatorio() {
  const opcoesSelecionadas = [];
  const checkboxes = document.querySelectorAll('#modalRelatorioAnalises input[type="checkbox"]:checked');
  
  checkboxes.forEach(checkbox => {
    if (checkbox.value !== 'todos') {
      opcoesSelecionadas.push(checkbox.value);
    }
  });
  
  if (opcoesSelecionadas.length === 0) {
    alert('âš ï¸ Selecione pelo menos uma anÃ¡lise para gerar o relatÃ³rio!');
    return;
  }
  
  fecharModalRelatorioAnalises();
  gerarPDFRelatorio(opcoesSelecionadas);
}

function gerarPDFRelatorio(opcoesSelecionadas) {
      const dataAtual = new Date().toLocaleDateString('pt-BR');
      const tituloConselho = document.querySelector('.header h1')?.textContent || 'Conselho Consultivo';
      
      let conteudoHTML = `
        <!DOCTYPE html>
        <html>
        <head>
          <meta charset="UTF-8">
          <title>RelatÃ³rio de AnÃ¡lises</title>
          <style>
            body { font-family: Arial, sans-serif; margin: 0; padding: 20px; }
            .container { max-width: 100%; }
            .header { text-align: center; margin-bottom: 30px; border-bottom: 2px solid #333; padding-bottom: 20px; }
            .header h1 { margin-bottom: 5px; color: #2c3e50; }
            .header .info { color: #666; }
            .secao { margin-bottom: 30px; break-inside: avoid; }
            .secao h2 { background: #f8f9fa; padding: 10px; border-left: 4px solid #667eea; color: #2c3e50; }
            table { width: 100%; border-collapse: collapse; margin-bottom: 15px; }
            th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
            th { background-color: #f2f2f2; }
            .card { border: 1px solid #ddd; padding: 15px; margin-bottom: 10px; border-radius: 5px; }
            .ranking-item { display: flex; align-items: center; padding: 10px; margin-bottom: 5px; background: #f8f9fa; border-radius: 5px; }
            .footer { text-align: center; margin-top: 30px; color: #666; font-size: 0.9em; border-top: 1px solid #ddd; padding-top: 20px; }
          
    /* DOCUMENT MANAGEMENT STYLES */
    .documentos-container {
      background: white;
      border-radius: 10px;
      padding: 20px;
      max-width: 1200px;
      margin: 70px auto 20px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.2);
    }

    .documentos-header {
      text-align: center;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 3px solid #667eea;
    }

    .documentos-titulo {
      font-size: 2em;
      font-weight: bold;
      color: #2c3e50;
      margin-bottom: 10px;
    }

    .btn-criar-pasta-raiz {
      display: none;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin: 15px auto;
      box-shadow: 0 3px 12px rgba(102, 126, 234, 0.4);
      transition: all 0.3s;
    }

    .btn-criar-pasta-raiz:hover {
      transform: translateY(-2px);
    }

    .edit-mode .btn-criar-pasta-raiz {
      display: block;
    }

    .documentos-lista {
      margin-top: 20px;
    }

    /* Item de pasta */
    .pasta-item {
      border-left: 3px solid #667eea;
      padding-left: 15px;
      margin-bottom: 15px;
    }

    .pasta-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      background: rgba(102, 126, 234, 0.05);
    }

    .pasta-header:hover {
      background: rgba(102, 126, 234, 0.15);
    }

    .pasta-seta {
      font-size: 1.2em;
      transition: transform 0.3s;
      color: #667eea;
      min-width: 20px;
    }

    .pasta-header.active .pasta-seta {
      transform: rotate(90deg);
    }

    .pasta-nome {
      font-size: 1.1em;
      font-weight: bold;
      color: #2c3e50;
      flex: 1;
    }

    .pasta-acoes {
      display: none;
      gap: 5px;
    }

    .edit-mode .pasta-acoes {
      display: flex;
    }

    .btn-doc-action {
      padding: 5px 10px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.8em;
      transition: all 0.2s;
    }

    .btn-add-item {
      background: #51cf66;
      color: white;
    }

    .btn-add-item:hover {
      background: #40c057;
    }

    .btn-editar-doc {
      background: #ffa726;
      color: white;
    }

    .btn-editar-doc:hover {
      background: #ff9800;
    }

    .btn-remover-doc {
      background: #ff6b6b;
      color: white;
    }

    .btn-remover-doc:hover {
      background: #fa5252;
    }

    .pasta-conteudo {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease-out;
      padding-left: 20px;
    }

    .pasta-conteudo.active {
      max-height: 10000px;
      padding-top: 10px;
    }

    /* Item de documento */
    .documento-item {
      padding: 10px 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      background: white;
      border: 1px solid #e0e0e0;
    }

    .documento-item:hover {
      background: #f0f0f0;
      transform: translateX(5px);
      border-color: #667eea;
    }

    .documento-icone {
      font-size: 1.5em;
    }

    .documento-nome {
      flex: 1;
      font-size: 0.95em;
      color: #2c3e50;
    }

    .documento-acoes {
      display: none;
      gap: 5px;
    }

    .edit-mode .documento-acoes {
      display: flex;
    }

    /* Drag & Drop */
    .dragging {
      opacity: 0.5;
    }

  </style>
        </head>
        <body>
          <div class="container">
            <div class="header">
              <h1>${tituloConselho}</h1>
              <div class="info">RelatÃ³rio de AnÃ¡lises - ${dataAtual}</div>
            </div>
      `;
      
      if (opcoesSelecionadas.includes('presenca')) {
        conteudoHTML += gerarConteudoPresencaRelatorio();
      }
      
      if (opcoesSelecionadas.includes('composicao')) {
        conteudoHTML += gerarConteudoComposicaoRelatorio();
      }
      
      if (opcoesSelecionadas.includes('estados')) {
        conteudoHTML += gerarConteudoEstadosRelatorio();
      }
      
      if (opcoesSelecionadas.includes('atividades')) {
        conteudoHTML += gerarConteudoAtividadesRelatorio();
      }
      
      conteudoHTML += `
            <div class="footer">
              RelatÃ³rio gerado automaticamente pelo Sistema de GestÃ£o de Conselho Consultivo
            </div>
          </div>
        </body>
        </html>
      `;
      
      const janelaImpressao = window.open('', '_blank');
      janelaImpressao.document.write(conteudoHTML);
      janelaImpressao.document.close();
      janelaImpressao.print();
    }

    function gerarConteudoPresencaRelatorio() {
      const membros = [];
      
      document.querySelectorAll('.membro-linha:not(.vazio)').forEach(membro => {
        const nome = membro.querySelector('.nome-membro')?.textContent || '';
        const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
        const bolinhas = membro.querySelectorAll('.bolinha-presenca');
        
        let presencas = 0;
        let justificadas = 0;
        let faltas = 0;
        
        bolinhas.forEach(b => {
          if(b.classList.contains('verde')) presencas++;
          else if(b.classList.contains('amarelo')) justificadas++;
          else if(b.classList.contains('vermelho')) faltas++;
        });
        
        const score = (presencas * 10) + (justificadas * 5);
        
        if(nome && nome !== 'VAGA' && nome.trim() !== '' && nome !== '-') {
          membros.push({ nome, entidade, presencas, justificadas, faltas, score });
        }
      });
      
      membros.sort((a, b) => b.score - a.score);
      
      let conteudo = `
        <div class="secao">
          <h2>ğŸ“ˆ Ranking de Assiduidade</h2>
      `;
      
      if (membros.length === 0) {
        conteudo += '<p>Nenhum registro de presenÃ§a encontrado</p>';
      } else {
        conteudo += `
          <table>
            <thead>
              <tr>
                <th width="10%">PosiÃ§Ã£o</th>
                <th width="40%">Nome</th>
                <th width="30%">InstituiÃ§Ã£o</th>
                <th width="10%">PresenÃ§as</th>
                <th width="10%">PontuaÃ§Ã£o</th>
              </tr>
            </thead>
            <tbody>
              ${membros.map((m, index) => `
                <tr>
                  <td>${index + 1}Âº</td>
                  <td>${m.nome}</td>
                  <td>${m.entidade}</td>
                  <td>ğŸŸ¢ ${m.presencas} | ğŸŸ¡ ${m.justificadas} | ğŸ”´ ${m.faltas}</td>
                  <td><strong>${m.score} pts</strong></td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        `;
      }
      
      conteudo += '</div>';
      return conteudo;
    }

    function gerarConteudoComposicaoRelatorio() {
  let conteudo = `
    <div class="secao">
      <h2>ğŸ‘¥ ComposiÃ§Ã£o do Conselho</h2>
  `;
  
  const grupos = [
    { id: 'poder-publico', titulo: 'âš–ï¸ PODER PÃšBLICO' },
    { id: 'sociedade-civil', titulo: 'ğŸ¤ SOCIEDADE CIVIL' }
  ];
  
  let totalMembros = 0;
  
  grupos.forEach(grupoInfo => {
    const grupo = document.getElementById(grupoInfo.id);
    if(!grupo) return;
    
    const setores = grupo.querySelectorAll('.setor');
    
    setores.forEach(setor => {
      const tituloSetor = setor.querySelector('.titulo-setor .editable')?.textContent || 'Setor';
      
      conteudo += `
        <div style="margin-bottom: 25px;">
          <h3 style="color: #495057; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #dee2e6;">
            ${grupoInfo.titulo} - ${tituloSetor}
          </h3>
          <div class="card-grid">
      `;
      
      setor.querySelectorAll('.cadeira').forEach(cadeira => {
        const numeroCadeira = cadeira.querySelector('.numero-cadeira')?.textContent || '';
        
        cadeira.querySelectorAll('.membro-linha:not(.vazio)').forEach(membro => {
          totalMembros++;
          const nome = membro.querySelector('.nome-membro')?.textContent || '';
          const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
          const telefone = membro.dataset.telefone || 'NÃ£o informado';
          const boneco = membro.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
          const tipo = membro.classList.contains('titular') ? 'Titular' : 'Suplente';
          
          conteudo += `
            <div class="card">
              <div class="card-header">
                <div class="card-emoji">${boneco}</div>
                <div class="card-nome">${nome}</div>
              </div>
              <div class="card-instituicao">${entidade}</div>
              <div class="card-telefone">ğŸ“ ${telefone}</div>
              <div style="margin-top: 8px;">
                <span class="card-tipo">${tipo}</span>
              </div>
              <div style="font-size: 0.7em; color: #868e96; margin-top: 5px;">
                Cadeira: ${numeroCadeira}
              </div>
            </div>
          `;
        });
      });
      
      conteudo += `
          </div>
        </div>
      `;
    });
  });
  
  // Adicionar PresidÃªncia
  const presidenciaContainer = document.getElementById('presidenciaContainer');
  if (presidenciaContainer) {
    const membrosPresidencia = presidenciaContainer.querySelectorAll('.membro-linha:not(.vazio)');
    if (membrosPresidencia.length > 0) {
      conteudo += `
        <div style="margin-bottom: 25px;">
          <h3 style="color: #495057; margin-bottom: 15px; padding-bottom: 8px; border-bottom: 2px solid #dee2e6;">
            ğŸ›ï¸ PRESIDÃŠNCIA
          </h3>
          <div class="card-grid">
      `;
      
      membrosPresidencia.forEach(membro => {
        totalMembros++;
        const nome = membro.querySelector('.nome-membro')?.textContent || '';
        const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
        const telefone = membro.dataset.telefone || 'NÃ£o informado';
        const boneco = membro.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
        const tipo = 'Presidente';
        
        conteudo += `
          <div class="card">
            <div class="card-header">
              <div class="card-emoji">${boneco}</div>
              <div class="card-nome">${nome}</div>
            </div>
            <div class="card-instituicao">${entidade}</div>
            <div class="card-telefone">ğŸ“ ${telefone}</div>
            <div style="margin-top: 8px;">
              <span class="card-tipo" style="background: #ff6b6b;">${tipo}</span>
            </div>
          </div>
        `;
      });
      
      conteudo += `
          </div>
        </div>
      `;
    }
  }
  
  if (totalMembros === 0) {
    conteudo += '<p style="text-align: center; color: #6c757d; font-style: italic;">Nenhum conselheiro cadastrado</p>';
  } else {
    conteudo += `
      <div style="text-align: center; margin-top: 20px; padding: 15px; background: #e3f2fd; border-radius: 8px;">
        <strong>Total de Conselheiros: ${totalMembros}</strong>
      </div>
    `;
  }
  
  conteudo += '</div>';
  return conteudo;
}
    function gerarConteudoEstadosRelatorio() {
      const estados = {};
      
      document.querySelectorAll('.membro-linha:not(.vazio)').forEach(membro => {
        const nome = membro.querySelector('.nome-membro')?.textContent || '';
        const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
        const estado = membro.dataset.estado || '';
        
        if(nome && nome !== 'VAGA' && nome.trim() !== '' && estado) {
          if (!estados[estado]) {
            estados[estado] = [];
          }
          estados[estado].push({ nome, entidade });
        }
      });
      
      let conteudo = `
        <div class="secao">
          <h2>ğŸ—ºï¸ DistribuiÃ§Ã£o por Estados</h2>
      `;
      
      if (Object.keys(estados).length === 0) {
        conteudo += '<p>Nenhum conselheiro com estado definido</p>';
      } else {
        Object.keys(estados).forEach(sigla => {
          const estado = estados[sigla];
          const nomeEstado = obterNomeEstado(sigla);
          
          conteudo += `
            <div style="margin-bottom: 20px;">
              <h3 style="color: #495057; margin-bottom: 10px;">${nomeEstado} (${sigla}) - ${estado.length} membro${estado.length !== 1 ? 's' : ''}</h3>
              <table>
                <thead>
                  <tr>
                    <th width="50%">Nome</th>
                    <th width="50%">InstituiÃ§Ã£o</th>
                  </tr>
                </thead>
                <tbody>
                  ${estado.map(m => `
                    <tr>
                      <td>${m.nome}</td>
                      <td>${m.entidade}</td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
          `;
        });
      }
      
      conteudo += '</div>';
      return conteudo;
    }

    function obterNomeEstado(sigla) {
      const estados = {
        'AC': 'Acre', 'AL': 'Alagoas', 'AP': 'AmapÃ¡', 'AM': 'Amazonas',
        'BA': 'Bahia', 'CE': 'CearÃ¡', 'DF': 'Distrito Federal', 'ES': 'EspÃ­rito Santo',
        'GO': 'GoiÃ¡s', 'MA': 'MaranhÃ£o', 'MT': 'Mato Grosso', 'MS': 'Mato Grosso do Sul',
        'MG': 'Minas Gerais', 'PA': 'ParÃ¡', 'PB': 'ParaÃ­ba', 'PR': 'ParanÃ¡',
        'PE': 'Pernambuco', 'PI': 'PiauÃ­', 'RJ': 'Rio de Janeiro', 'RN': 'Rio Grande do Norte',
        'RS': 'Rio Grande do Sul', 'RO': 'RondÃ´nia', 'RR': 'Roraima', 'SC': 'Santa Catarina',
        'SP': 'SÃ£o Paulo', 'SE': 'Sergipe', 'TO': 'Tocantins'
      };
      
      return estados[sigla] || sigla;
    }

    function gerarConteudoAtividadesRelatorio() {
      const atividades = [];
      
      document.querySelectorAll('.atividade-card').forEach(ativ => {
        const titulo = ativ.querySelector('.atividade-titulo')?.textContent || '';
        const info = ativ.querySelector('.atividade-info')?.textContent || '';
        const resultado = ativ.querySelector('.atividade-resultado')?.textContent.replace('ğŸ“Œ ', '') || '';
        const concluida = ativ.dataset.concluida === 'true';
        const prazo = ativ.dataset.prazo || '';
        
        const camara = ativ.closest('.camara');
        const nomeCamara = camara ? camara.querySelector('.camara-nome')?.textContent : 'Geral';
        
        atividades.push({ titulo, info, resultado, concluida, prazo, nomeCamara });
      });
      
      let conteudo = `
        <div class="secao">
          <h2>âœ… Atividades Realizadas</h2>
      `;
      
      if (atividades.length === 0) {
        conteudo += '<p>Nenhuma atividade cadastrada</p>';
      } else {
        atividades.forEach(a => {
          const dataFormatada = a.prazo ? new Date(a.prazo).toLocaleDateString('pt-BR') : '';
          
          conteudo += `
            <div class="card">
              <strong>${a.titulo}</strong><br>
              <strong>CÃ¢mara:</strong> ${a.nomeCamara}<br>
              <strong>Prazo:</strong> ${dataFormatada}<br>
              <strong>Status:</strong> ${a.resultado ? (a.concluida ? 'âœ… CONCLUÃDA' : 'â³ NÃƒO CONCLUÃDA') : 'ğŸ”“ ABERTA'}<br>
              ${a.resultado ? `<strong>Resultado:</strong> ${a.resultado}<br>` : ''}
              ${a.info ? `<strong>InformaÃ§Ãµes:</strong> ${a.info}` : ''}
            </div>
          `;
        });
      }
      
      conteudo += '</div>';
      return conteudo;
    }

    // ============================================
    // SALVAR / CARREGAR JSON
    // ============================================
    function salvarJSON() {
      const dados = {
        versao: '2.2',
        dataExportacao: new Date().toISOString(),
        conselho: {
          titulo: document.querySelector('.header h1')?.textContent || '',
          subtitulo: document.querySelector('.header p')?.textContent || '',
          proximaReuniao: {
            data: document.getElementById('dataProximaReuniao')?.textContent || '',
            local: document.getElementById('localProximaReuniao')?.textContent || ''
          }
        },
        presidencia: extrairPresidencia(),
        grupos: extrairGrupos(),
        camaras: extrairCamaras(),
        documentos: salvarEstruturaDocumentos()
      };
      
      const json = JSON.stringify(dados, null, 2);
      const blob = new Blob([json], { type: 'application/json' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `conselho_${new Date().toISOString().slice(0,10)}.json`;
      link.click();
      
      alert('âœ… JSON exportado com sucesso!');
    }

    function extrairPresidencia() {
      const container = document.getElementById('presidenciaContainer');
      const membros = [];
      
      container.querySelectorAll('.membro-linha').forEach(m => {
        membros.push(extrairDadosMembro(m));
      });
      
      return membros;
    }

    function extrairGrupos() {
      const grupos = [];
      
      document.querySelectorAll('.grupo').forEach(grupo => {
        const id = grupo.id;
        const titulo = grupo.querySelector('.titulo-grupo')?.textContent || '';
        const setores = [];
        
        grupo.querySelectorAll('.setor').forEach(setor => {
          const nomeSetor = setor.querySelector('.titulo-setor .editable')?.textContent || '';
          const cadeiras = [];
          
          setor.querySelectorAll('.cadeira').forEach(cadeira => {
            const numero = cadeira.querySelector('.numero-cadeira')?.textContent || '';
            const membros = [];
            
            cadeira.querySelectorAll('.membro-linha').forEach(m => {
              membros.push(extrairDadosMembro(m));
            });
            
            cadeiras.push({ numero, membros });
          });
          
          setores.push({ nome: nomeSetor, cadeiras });
        });
        
        grupos.push({ id, titulo, setores });
      });
      
      return grupos;
    }

    function extrairDadosMembro(membro) {
      const nome = membro.querySelector('.nome-membro')?.textContent || '';
      const entidade = membro.querySelector('.entidade-membro')?.textContent || '';
      const municipio = membro.querySelector('.municipio-membro')?.textContent.replace('ğŸ“ ', '') || '';
      const boneco = membro.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
      const logo = membro.querySelector('.logo-instituicao')?.textContent || 'ğŸ›ï¸';
      const tipo = membro.classList.contains('titular') ? 'titular' : 'suplente';
      const estado = membro.dataset.estado || '';
      const curriculo = membro.dataset.curriculo || '';
      const telefone = membro.dataset.telefone || '';
      const email = membro.dataset.email || '';
      const dataPosse = membro.dataset.dataPosse || '';
      const dataMandato = membro.dataset.dataMandato || '';
      
      const bonecoPossuiImg = membro.querySelector('.bonequinho img');
      const logoPossuiImg = membro.querySelector('.logo-instituicao img');
      
      const presencas = [];
      membro.querySelectorAll('.bolinha-presenca').forEach(b => {
        presencas.push({
          data: b.dataset.data || '',
          dataFormatada: b.dataset.dataFormatada || '',
          local: b.dataset.local || '',
          status: b.dataset.status || 'nao-marcado',
          timestamp: b.dataset.timestamp || ''
        });
      });
      
      return {
        nome, entidade, municipio,
        boneco: bonecoPossuiImg ? bonecoPossuiImg.src : boneco,
        logo: logoPossuiImg ? logoPossuiImg.src : logo,
        tipo, estado, curriculo, telefone, email, dataPosse, dataMandato, presencas
      };
    }

    function extrairCamaras() {
      const camaras = [];
      
      document.querySelectorAll('.camara').forEach(camara => {
        const slug = camara.dataset.camara || '';
        const nome = camara.querySelector('.camara-nome')?.textContent || '';
        const membros = [];
        
        camara.querySelectorAll('.camara-membro').forEach(m => {
          const nomeMembro = m.querySelector('.nome-membro')?.textContent || '';
          const boneco = m.querySelector('.bonequinho')?.textContent || 'ğŸ‘¤';
          membros.push({ nome: nomeMembro, boneco });
        });
        
        const atividades = [];
        camara.querySelectorAll('.camara-atividades .atividade-card').forEach(a => {
          const titulo = a.querySelector('.atividade-titulo')?.textContent || '';
          const info = a.querySelector('.atividade-info')?.textContent || '';
          const resultado = a.querySelector('.atividade-resultado')?.textContent.replace('ğŸ“Œ ', '') || '';
          const prazo = a.dataset.prazo || '';
          const concluida = a.dataset.concluida || 'false';
          atividades.push({ titulo, info, resultado, prazo, concluida });
        });
        
        const gts = [];
        camara.querySelectorAll('.gt-card').forEach(gt => {
          const titulo = gt.querySelector('.gt-titulo')?.textContent || '';
          const responsavel = gt.querySelector('.gt-responsavel')?.textContent.replace('ğŸ‘¤ ', '') || '';
          const objetivo = gt.querySelector('.gt-objetivo')?.textContent.replace('ğŸ¯ ', '') || '';
          const componentes = gt.querySelector('.gt-componentes')?.textContent.replace('ğŸ‘¥ ', '') || '';
          const resultado = gt.querySelector('.gt-resultado')?.textContent.replace('ğŸ“Œ ', '') || '';
          
          const atividadesGT = [];
          gt.querySelectorAll('.gt-atividades-internas .atividade-card').forEach(a => {
            const tituloAtiv = a.querySelector('.atividade-titulo')?.textContent || '';
            const infoAtiv = a.querySelector('.atividade-info')?.textContent || '';
            const resultadoAtiv = a.querySelector('.atividade-resultado')?.textContent.replace('ğŸ“Œ ', '') || '';
            const prazoAtiv = a.dataset.prazo || '';
            const concluidaAtiv = a.dataset.concluida || 'false';
            atividadesGT.push({ titulo: tituloAtiv, info: infoAtiv, resultado: resultadoAtiv, prazo: prazoAtiv, concluida: concluidaAtiv });
          });
          
          gts.push({ titulo, responsavel, objetivo, componentes, resultado, atividades: atividadesGT });
        });
        
        camaras.push({ slug, nome, membros, atividades, gts });
      });
      
      return camaras;
    }

    function carregarJSON(input) {
      const file = input.files[0];
      if(!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const dados = JSON.parse(e.target.result);
          aplicarDadosJSON(dados);
          alert('âœ… JSON carregado com sucesso!');
        } catch(err) {
          alert('âŒ Erro ao carregar JSON: ' + err.message);
        }
      };
      reader.readAsText(file);
    }

    function aplicarDadosJSON(dados) {
      if(dados.conselho) {
        if(dados.conselho.titulo) document.querySelector('.header h1').textContent = dados.conselho.titulo;
        if(dados.conselho.subtitulo) document.querySelector('.header p').textContent = dados.conselho.subtitulo;
        if(dados.conselho.proximaReuniao) {
          document.getElementById('dataProximaReuniao').textContent = dados.conselho.proximaReuniao.data || '--/--/----';
          document.getElementById('localProximaReuniao').textContent = dados.conselho.proximaReuniao.local || '---';
        }
      }
      
      if(dados.documentos) {
        carregarEstruturaDocumentos(dados);
      }
      
      if(dados.presidencia) {
        const container = document.getElementById('presidenciaContainer');
        container.innerHTML = '';
        dados.presidencia.forEach(m => {
          container.appendChild(criarMembroHTML(m));
        });
      }
      
      if(dados.grupos) {
        dados.grupos.forEach(grupo => {
          const grupoEl = document.getElementById(grupo.id);
          if(!grupoEl) return;
          
          const conteudoGrupo = grupoEl.querySelector('.grupo-conteudo');
          conteudoGrupo.querySelectorAll('.setor').forEach(s => s.remove());
          
          grupo.setores.forEach(setor => {
            const setorEl = document.createElement('div');
            setorEl.className = 'setor';
            setorEl.innerHTML = `
              <div class="setor-header-wrapper" onclick="toggleSetor(this)">
                <div class="setor-seta">â–¼</div>
                <div class="titulo-setor">
                  <span class="editable" contenteditable="false">${setor.nome}</span>
                  <span class="contador-cadeiras">0 cadeiras</span>
                  <button class="btn-remove" onclick="event.stopPropagation(); removerSetor(this)">ğŸ—‘ï¸</button>
                </div>
              </div>
              <div class="setor-conteudo">
                <button class="btn-add-cadeira" onclick="adicionarCadeira(this)">â• Cadeira</button>
              </div>
            `;
            
            const btnAddSetor = conteudoGrupo.querySelector('.btn-add-setor');
            conteudoGrupo.insertBefore(setorEl, btnAddSetor);
            
            setor.cadeiras.forEach(cadeira => {
              const cadeiraEl = document.createElement('div');
              cadeiraEl.className = 'cadeira';
              cadeiraEl.innerHTML = `
                <div class="cadeira-header">
                  <span class="icone-cadeira">ğŸª‘</span>
                  <span class="numero-cadeira">${cadeira.numero}</span>
                  <button class="btn-remove" onclick="removerCadeira(this)">ğŸ—‘ï¸</button>
                </div>
                <div class="cadeira-membros-container"></div>
                <button class="btn-add-membro" onclick="abrirModalAdicionarMembro(this)">â• Adicionar Membro</button>
              `;
              
              const setorConteudo = setorEl.querySelector('.setor-conteudo');
              const btnAddCadeira = setorConteudo.querySelector('.btn-add-cadeira');
              setorConteudo.insertBefore(cadeiraEl, btnAddCadeira);
              
              const membroContainer = cadeiraEl.querySelector('.cadeira-membros-container');
              cadeira.membros.forEach(m => {
                membroContainer.appendChild(criarMembroHTML(m));
              });
            });
            
            atualizarContadorCadeiras(setorEl);
          });
          
          atualizarContadoresGrupo(grupo.id);
        });
      }
      
      if(dados.camaras) {
        const grid = document.getElementById('camarasGrid');
        grid.innerHTML = '';
        
        dados.camaras.forEach(camara => {
          const camaraEl = document.createElement('div');
          camaraEl.className = 'camara';
          camaraEl.dataset.camara = camara.slug;
          camaraEl.innerHTML = `
            <div class="camara-header">
              <div class="camara-nome">${camara.nome}</div>
              <div class="camara-contador">0 membros</div>
              <button class="btn-editar-nome-camara" onclick="editarNomeCamara(this)">âœï¸</button>
              <button class="btn-remover-camara" onclick="removerCamara(this)">ğŸ—‘ï¸</button>
            </div>
            <div class="camara-membros"></div>
            <div class="camara-atividades"></div>
            <div class="camara-gts"></div>
            <button class="btn-add-atividade" onclick="abrirModalAdicionarAtividade(this, false)">âœ… Atividade</button>
            <button class="btn-add-gt" onclick="abrirModalCriarGT(this)">ğŸ“‹ GT</button>
          `;
          
          grid.appendChild(camaraEl);
          
          const membrosContainer = camaraEl.querySelector('.camara-membros');
          camara.membros.forEach(m => {
            const membroEl = document.createElement('div');
            membroEl.className = 'camara-membro';
            membroEl.innerHTML = `
              <span class="bonequinho">${m.boneco}</span>
              <div class="nome-membro">${m.nome}</div>
              <button class="btn-remove" onclick="removerMembroCamara(this)">ğŸ—‘ï¸</button>
            `;
            membrosContainer.appendChild(membroEl);
          });
          
          const atividadesContainer = camaraEl.querySelector('.camara-atividades');
          camara.atividades.forEach(a => {
            const ativEl = document.createElement('div');
            ativEl.className = 'atividade-card';
            ativEl.dataset.prazo = a.prazo;
            ativEl.dataset.concluida = a.concluida;
            ativEl.innerHTML = `
              <div class="atividade-titulo">${a.titulo}</div>
              <div class="atividade-info">${a.info}</div>
              ${a.resultado ? `<div class="atividade-resultado">ğŸ“Œ ${a.resultado}</div>` : ''}
              ${a.resultado ? `<div class="atividade-status ${a.concluida === 'true' ? 'concluida' : 'nao-concluida'}">${a.concluida === 'true' ? 'âœ… CONCLUÃDA' : 'â³ NÃƒO CONCLUÃDA'}</div>` : ''}
              <button class="btn-edit-atividade" onclick="editarAtividade(this)">âœï¸</button>
              <button class="btn-remove" onclick="removerAtividade(this)">ğŸ—‘ï¸</button>
            `;
            atividadesContainer.appendChild(ativEl);
          });
          
          const gtsContainer = camaraEl.querySelector('.camara-gts');
          camara.gts.forEach(gt => {
            const gtEl = document.createElement('div');
            gtEl.className = 'gt-card';
            gtEl.innerHTML = `
              <div class="gt-titulo editable" contenteditable="false">${gt.titulo}</div>
              <div class="gt-responsavel editable" contenteditable="false">ğŸ‘¤ ${gt.responsavel}</div>
              <div class="gt-objetivo editable" contenteditable="false">ğŸ¯ ${gt.objetivo}</div>
              ${gt.componentes ? `<div class="gt-componentes editable" contenteditable="false">ğŸ‘¥ ${gt.componentes}</div>` : ''}
              ${gt.componentes ? `<button class="btn-ver-componentes" onclick="toggleComponentes(this)">ğŸ‘¥ Ver Componentes</button>` : ''}
              ${gt.resultado ? `<div class="gt-resultado">ğŸ“Œ ${gt.resultado}</div>` : ''}
              <div class="gt-atividades-internas"></div>
              <button class="btn-edit-gt" onclick="editarGT(this)">âœï¸ Editar</button>
              <button class="btn-add-atividade" onclick="abrirModalAdicionarAtividade(this, true)">âœ… Atividade GT</button>
              <button class="btn-remove" onclick="removerGT(this)">ğŸ—‘ï¸</button>
            `;
            
            gtsContainer.appendChild(gtEl);
            
            const atividadesGT = gtEl.querySelector('.gt-atividades-internas');
            if(gt.atividades) {
              gt.atividades.forEach(a => {
                const ativEl = document.createElement('div');
                ativEl.className = 'atividade-card';
                ativEl.dataset.prazo = a.prazo;
                ativEl.dataset.concluida = a.concluida;
                ativEl.innerHTML = `
                  <div class="atividade-titulo">${a.titulo}</div>
                  <div class="atividade-info">${a.info}</div>
                  ${a.resultado ? `<div class="atividade-resultado">ğŸ“Œ ${a.resultado}</div>` : ''}
                  ${a.resultado ? `<div class="atividade-status ${a.concluida === 'true' ? 'concluida' : 'nao-concluida'}">${a.concluida === 'true' ? 'âœ… CONCLUÃDA' : 'â³ NÃƒO CONCLUÃDA'}</div>` : ''}
                  <button class="btn-edit-atividade" onclick="editarAtividade(this)">âœï¸</button>
                  <button class="btn-remove" onclick="removerAtividade(this)">ğŸ—‘ï¸</button>
                `;
                atividadesGT.appendChild(ativEl);
              });
            }
          });
          
          atualizarContadorCamara(camaraEl);
        });
      }
      
      configurarDragAndDrop();
    }

    function criarMembroHTML(m) {
      const membro = document.createElement('div');
      membro.className = `membro-linha ${m.tipo}`;
      membro.draggable = true;
      membro.dataset.id = `membro-${Date.now()}-${Math.random()}`;
      membro.dataset.estado = m.estado || '';
      membro.dataset.curriculo = m.curriculo || '';
      membro.dataset.telefone = m.telefone || '';
      membro.dataset.email = m.email || '';
      membro.dataset.dataPosse = m.dataPosse || '';
      membro.dataset.dataMandato = m.dataMandato || '';
      
      const boneco = m.boneco && m.boneco.startsWith('data:') ? `<img src="${m.boneco}" alt="foto">` : m.boneco;
      const logo = m.logo && m.logo.startsWith('data:') ? `<img src="${m.logo}" alt="logo">` : m.logo;
      
      membro.innerHTML = `
        <div class="membro-linha-top" onclick="editarMembroCompleto(this)">
          <div class="avatar-container">
            <span class="bonequinho" onclick="event.stopPropagation(); abrirEscolherEmoji(this, 'pessoa')">${boneco}</span>
            <span class="logo-instituicao" onclick="event.stopPropagation(); abrirEscolherEmoji(this, 'logo')">${logo}</span>
          </div>
          <span class="etiqueta-cargo ${m.tipo}">${m.tipo === 'titular' ? 'Titular' : 'Suplente'}</span>
          <div class="info-membro">
            <div class="nome-membro">${m.nome}</div>
            <div class="entidade-membro">${m.entidade || '-'}</div>
            <div class="municipio-membro">ğŸ“ ${m.municipio || '-'}</div>
            <button class="btn-ver-curriculo" onclick="event.stopPropagation(); verEditarCurriculo(this)"></button>
          </div>
        </div>
        <div class="presenca-container">
          <span class="presenca-label">PresenÃ§as:</span>
        </div>
        <button class="btn-remove" onclick="removerMembro(this)" style="margin-top:5px;">ğŸ—‘ï¸ Remover</button>
      `;
      
      const presencaContainer = membro.querySelector('.presenca-container');
      if(m.presencas) {
        const presencasOrdenadas = m.presencas.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
        const presencasRecentes = presencasOrdenadas.slice(0, 5);
        
        presencasRecentes.forEach(p => {
          const bolinha = document.createElement('div');
          bolinha.className = 'bolinha-presenca';
          bolinha.dataset.data = p.data;
          bolinha.dataset.dataFormatada = p.dataFormatada;
          bolinha.dataset.local = p.local;
          bolinha.dataset.timestamp = p.timestamp;
          bolinha.dataset.status = p.status;
          bolinha.title = `${p.dataFormatada} - ${p.local}`;
          
          if(p.status === 'presente') bolinha.classList.add('verde');
          else if(p.status === 'justificado') bolinha.classList.add('amarelo');
          else if(p.status === 'faltou') bolinha.classList.add('vermelho');
          
          if(modoEdicao) {
            bolinha.onclick = function() { editarBolinhaPresenca(this); };
          }
          
          presencaContainer.appendChild(bolinha);
        });
      }
      
      return membro;
    }

    function limparConselho() {
      if(!confirm('âš ï¸ ATENÃ‡ÃƒO!\n\nIsso irÃ¡ APAGAR TODOS OS DADOS do conselho!\n\nDeseja continuar?')) {
        return;
      }
      
      if(!confirm('ğŸš¨ ÃšLTIMA CONFIRMAÃ‡ÃƒO!\n\nTodos os membros, setores, cadeiras e cÃ¢maras serÃ£o PERMANENTEMENTE APAGADOS!\n\nTem certeza absoluta?')) {
        return;
      }
      
      document.getElementById('presidenciaContainer').innerHTML = '';
      
      document.querySelectorAll('.grupo').forEach(grupo => {
        const conteudoGrupo = grupo.querySelector('.grupo-conteudo');
        conteudoGrupo.querySelectorAll('.setor').forEach(s => s.remove());
        atualizarContadoresGrupo(grupo.id);
      });
      
      document.getElementById('camarasGrid').innerHTML = '';
      
      document.getElementById('dataProximaReuniao').textContent = '--/--/----';
      document.getElementById('localProximaReuniao').textContent = '---';
      
      toggleMenu();
      alert('âœ… Conselho limpo com sucesso!\n\nAgora vocÃª tem um sistema vazio pronto para cadastrar novos dados.');
    }

    // ============================================
    // SALVAR HTML
    // ============================================
    function salvarHTML() {
        const htmlContent = document.documentElement.outerHTML;
        
        const blob = new Blob([htmlContent], { type: 'text/html' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        
        const dataAtual = new Date().toISOString().slice(0, 10);
        link.download = `conselho_completo_${dataAtual}.html`;
        
        link.click();
        
        alert('âœ… HTML completo exportado com sucesso!\n\nğŸ“ Arquivo: ' + link.download + 
              '\n\nğŸ’¡ VocÃª pode:' +
              '\nâ€¢ Publicar este arquivo na web' +
              '\nâ€¢ Continuar editando normalmente' +
              '\nâ€¢ Carregar JSON posteriormente para atualizar os dados' +
              '\nâ€¢ Todas as funÃ§Ãµes de ediÃ§Ã£o permanecem disponÃ­veis');
    }

    function carregarJSONExemplo() {
      const dadosExemplo = {
        versao: '2.2',
        dataExportacao: new Date().toISOString(),
        conselho: {
          titulo: 'Conselho Consultivo do Delta do ParnaÃ­ba',
          subtitulo: 'GestÃ£o Participativa para o Desenvolvimento SustentÃ¡vel',
          proximaReuniao: {
            data: '15/03/2024',
            local: 'ParnaÃ­ba/PI'
          }
        },
        presidencia: [
          {
            nome: 'Dr. Carlos Silva',
            entidade: 'Universidade Federal do Delta',
            municipio: 'ParnaÃ­ba/PI',
            boneco: 'ğŸ‘¨â€ğŸ«',
            logo: 'ğŸ›ï¸',
            tipo: 'titular',
            estado: 'PI',
            curriculo: 'Doutor em GestÃ£o Ambiental, professor universitÃ¡rio com 15 anos de experiÃªncia.',
            telefone: '(86) 99999-9999',
            email: 'carlos.silva@ufd.edu.br',
            dataPosse: '2023-01-15',
            dataMandato: '2025-01-15',
            presencas: []
          }
        ],
        grupos: [
          {
            id: 'poder-publico',
            titulo: 'âš–ï¸ PODER PÃšBLICO',
            setores: [
              {
                nome: 'Governo Federal',
                cadeiras: [
                  {
                    numero: 'Cadeira 1',
                    membros: [
                      {
                        nome: 'Maria Santos',
                        entidade: 'MMA - MinistÃ©rio do Meio Ambiente',
                        municipio: 'BrasÃ­lia/DF',
                        boneco: 'ğŸ‘©â€ğŸ’¼',
                        logo: 'ğŸ›ï¸',
                        tipo: 'titular',
                        estado: 'DF',
                        curriculo: 'Engenheira ambiental, servidora pÃºblica federal hÃ¡ 8 anos.',
                        telefone: '(61) 88888-8888',
                        email: 'maria.santos@mma.gov.br',
                        dataPosse: '2023-02-01',
                        dataMandato: '2025-02-01',
                        presencas: []
                      }
                    ]
                  }
                ]
              }
            ]
          }
        ],
        camaras: [
          {
            slug: 'educacao-ambiental',
            nome: 'ğŸ“š EducaÃ§Ã£o Ambiental',
            membros: [],
            atividades: [],
            gts: []
          }
        ]
      };
      
      aplicarDadosJSON(dadosExemplo);
      toggleMenu();
      alert('âœ… Dados de exemplo carregados com sucesso!');
    }

    // ============================================
    // PALETA DE CORES
    // ============================================
    function abrirPaletaCores() {
      toggleMenu();
      document.getElementById('modalPaletaCores').classList.add('active');
    }

    function mudarCorFundo(gradiente) {
      document.body.style.background = gradiente;
      fecharModal('modalPaletaCores');
    }

    // ============================================
    // INICIALIZAÃ‡ÃƒO
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      configurarDragAndDrop();
      colapsarTudo();
      
      const style = document.createElement('style');
      style.textContent = `
        .bolinha-grande.selecionado {
          transform: scale(1.3);
          box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
      `;
      document.head.appendChild(style);
      
      document.getElementById('inputSenha').addEventListener('keypress', function(e) {
        if(e.key === 'Enter') verificarSenha();
      });
      
      console.log('âœ… Sistema de GestÃ£o de Conselho Consultivo v2.2 - Carregado com sucesso!');
    });
  
    // ==========================================
    // DOCUMENT MANAGEMENT FUNCTIONS
    // ==========================================

    function carregarDocumentosIniciais() {
      documentosData.estrutura = [
        {
          id: 'pasta-1',
          tipo: 'pasta',
          nome: 'LegislaÃ§Ã£o',
          ordem: 1,
          filhos: [
            {
              id: 'doc-1',
              tipo: 'documento',
              nome: 'Decreto de CriaÃ§Ã£o da APA',
              link: 'https://example.com/decreto.pdf',
              ordem: 1
            }
          ]
        }
      ];
    }

    function renderizarDocumentos() {
      const container = document.getElementById('documentosLista');
      
      if(!documentosData.estrutura || documentosData.estrutura.length === 0) {
        container.innerHTML = '<div class="mensagem-vazio-docs">ğŸ“­ Nenhum documento cadastrado</div>';
        return;
      }
      
      container.innerHTML = '';
      documentosData.estrutura.forEach(item => {
        container.appendChild(criarElementoItem(item, null));
      });
    }

    function criarElementoItem(item, pastaParenteId) {
      if(!item) return null; // Safety check
      
      if(item.tipo === 'pasta') {
        return criarElementoPasta(item, pastaParenteId);
      } else {
        return criarElementoDocumento(item, pastaParenteId);
      }
    }

    function criarElementoPasta(pasta, pastaParenteId) {
      const pastaDiv = document.createElement('div');
      pastaDiv.className = 'pasta-item';
      pastaDiv.dataset.id = pasta.id;
      pastaDiv.dataset.tipo = 'pasta';
      
      // Header da pasta
      const headerDiv = document.createElement('div');
      headerDiv.className = 'pasta-header';
      headerDiv.onclick = () => togglePasta(pasta.id);
      
      const seta = document.createElement('span');
      seta.className = 'pasta-seta';
      seta.textContent = 'â–¶';
      
      const nome = document.createElement('span');
      nome.className = 'pasta-nome';
      nome.textContent = 'ğŸ“‚ ' + pasta.nome;
      
      const acoes = document.createElement('div');
      acoes.className = 'pasta-acoes';
      acoes.innerHTML = `
        <button class="btn-doc-action btn-add-item" onclick="event.stopPropagation(); abrirModalAdicionarItem('${pasta.id}')">â• Adicionar</button>
        <button class="btn-doc-action btn-editar-doc" onclick="event.stopPropagation(); editarPasta('${pasta.id}')">âœï¸</button>
        <button class="btn-doc-action btn-remover-doc" onclick="event.stopPropagation(); removerItem('${pasta.id}')">ğŸ—‘ï¸</button>
      `;
      
      headerDiv.appendChild(seta);
      headerDiv.appendChild(nome);
      headerDiv.appendChild(acoes);
      
      // ConteÃºdo da pasta
      const conteudoDiv = document.createElement('div');
      conteudoDiv.className = 'pasta-conteudo';
      conteudoDiv.dataset.id = pasta.id;
      
      if(pasta.filhos && pasta.filhos.length > 0) {
        pasta.filhos.forEach(filho => {
          conteudoDiv.appendChild(criarElementoItem(filho, pasta.id));
        });
      }
      
      pastaDiv.appendChild(headerDiv);
      pastaDiv.appendChild(conteudoDiv);
      
      return pastaDiv;
    }

    function criarElementoDocumento(doc, pastaParenteId) {
      const docDiv = document.createElement('div');
      docDiv.className = 'documento-item';
      docDiv.dataset.id = doc.id;
      docDiv.dataset.tipo = 'documento';
      docDiv.onclick = () => abrirDocumento(doc.link);
      
      const icone = document.createElement('span');
      icone.className = 'documento-icone';
      icone.textContent = 'ğŸ“„';
      
      const nome = document.createElement('span');
      nome.className = 'documento-nome';
      nome.textContent = doc.nome;
      
      const acoes = document.createElement('div');
      acoes.className = 'documento-acoes';
      acoes.innerHTML = `
        <button class="btn-doc-action btn-editar-doc" onclick="event.stopPropagation(); editarDocumento('${doc.id}', '${pastaParenteId || ''}')">âœï¸</button>
        <button class="btn-doc-action btn-remover-doc" onclick="event.stopPropagation(); removerItem('${doc.id}', '${pastaParenteId || ''}')">ğŸ—‘ï¸</button>
      `;
      
      docDiv.appendChild(icone);
      docDiv.appendChild(nome);
      docDiv.appendChild(acoes);
      
      return docDiv;
    }

    function togglePasta(pastaId) {
      const pasta = document.querySelector(`.pasta-item[data-id="${pastaId}"]`);
      if(!pasta) return;
      
      const header = pasta.querySelector('.pasta-header');
      const conteudo = pasta.querySelector('.pasta-conteudo');
      
      header.classList.toggle('active');
      conteudo.classList.toggle('active');
    }

    function abrirDocumento(link) {
      if(!link) return;
      window.open(link, '_blank', 'noopener,noreferrer');
    }

    function abrirModalCriarPasta(pastaParenteId = null) {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }
      
      pastaAtualEdicao = null;
      pastaParenteAtual = pastaParenteId;
      document.getElementById('tituloCriarPasta').textContent = 'Criar Nova Pasta';
      document.getElementById('inputNomePasta').value = '';
      document.getElementById('modalCriarPasta').classList.add('active');
    }

    function abrirModalAdicionarItem(pastaId) {
      if(!modoEdicao) return;
      
      pastaParenteAtual = pastaId;
      document.getElementById('modalEscolherTipoItem').classList.add('active');
    }

    function abrirModalAdicionarDocumento(pastaId) {
      if(!modoEdicao) {
        alert('âš ï¸ Ative o modo de ediÃ§Ã£o primeiro!');
        return;
      }
      
      itemAtualEdicao = null;
      pastaParenteAtual = pastaId;
      document.getElementById('tituloAdicionarDoc').textContent = 'Adicionar Documento';
      document.getElementById('inputNomeDocumento').value = '';
      document.getElementById('inputLinkDocumento').value = '';
      document.getElementById('modalAdicionarDocumento').classList.add('active');
    }

    function escolherTipoItem(tipo) {
      fecharModal('modalEscolherTipoItem');
      
      if(tipo === 'pasta') {
        abrirModalCriarPasta(pastaParenteAtual);
      } else if(tipo === 'documento') {
        abrirModalAdicionarDocumento(pastaParenteAtual);
      }
    }

    function editarPasta(pastaId) {
      if(!modoEdicao) return;
      
      const pasta = encontrarItemPorId(documentosData.estrutura, pastaId);
      if(!pasta) return;
      
      pastaAtualEdicao = pasta;
      document.getElementById('tituloCriarPasta').textContent = 'Editar Pasta';
      document.getElementById('inputNomePasta').value = pasta.nome;
      document.getElementById('modalCriarPasta').classList.add('active');
    }

    function editarDocumento(docId, pastaParenteId) {
      if(!modoEdicao) return;
      
      const doc = encontrarItemPorId(documentosData.estrutura, docId);
      if(!doc) return;
      
      itemAtualEdicao = doc;
      pastaParenteAtual = pastaParenteId;
      document.getElementById('tituloAdicionarDoc').textContent = 'Editar Documento';
      document.getElementById('inputNomeDocumento').value = doc.nome;
      document.getElementById('inputLinkDocumento').value = doc.link;
      document.getElementById('modalAdicionarDocumento').classList.add('active');
    }

    function confirmarCriarPasta() {
      const nome = document.getElementById('inputNomePasta').value.trim();
      
      if(!nome) {
        alert('âš ï¸ Digite um nome para a pasta!');
        return;
      }
      
      if(pastaAtualEdicao) {
        // Editando pasta existente
        pastaAtualEdicao.nome = nome;
        alert('âœ… Pasta atualizada!');
      } else {
        // Criando nova pasta
        const novaPasta = {
          id: 'pasta-' + Date.now(),
          tipo: 'pasta',
          nome: nome,
          ordem: 999,
          filhos: []
        };
        
        if(pastaParenteAtual) {
          // Adicionar como subpasta
          const pastaParente = encontrarItemPorId(documentosData.estrutura, pastaParenteAtual);
          if(pastaParente) {
            pastaParente.filhos.push(novaPasta);
          }
        } else {
          // Adicionar na raiz
          documentosData.estrutura.push(novaPasta);
        }
        
        alert('âœ… Pasta criada!');
      }
      
      fecharModal('modalCriarPasta');
      renderizarDocumentos();
    }

    function confirmarAdicionarDocumento() {
      const nome = document.getElementById('inputNomeDocumento').value.trim();
      const link = document.getElementById('inputLinkDocumento').value.trim();
      
      if(!nome) {
        alert('âš ï¸ Digite um nome para o documento!');
        return;
      }
      
      if(!link) {
        alert('âš ï¸ Digite a URL do documento!');
        return;
      }
      
      // Validar URL bÃ¡sica
      if(!link.startsWith('http://') && !link.startsWith('https://')) {
        alert('âš ï¸ URL invÃ¡lida! Deve comeÃ§ar com http:// ou https://');
        return;
      }
      
      if(itemAtualEdicao) {
        // Editando documento existente
        itemAtualEdicao.nome = nome;
        itemAtualEdicao.link = link;
        alert('âœ… Documento atualizado!');
      } else {
        // Criando novo documento
        const novoDoc = {
          id: 'doc-' + Date.now(),
          tipo: 'documento',
          nome: nome,
          link: link,
          ordem: 999
        };
        
        if(pastaParenteAtual) {
          // Adicionar em pasta especÃ­fica
          const pastaParente = encontrarItemPorId(documentosData.estrutura, pastaParenteAtual);
          if(pastaParente) {
            pastaParente.filhos.push(novoDoc);
          }
        } else {
          // Adicionar na raiz
          documentosData.estrutura.push(novoDoc);
        }
        
        alert('âœ… Documento criado!');
      }
      
      fecharModal('modalAdicionarDocumento');
      renderizarDocumentos();
    }

    function encontrarItemPorId(estrutura, id) {
      for(let item of estrutura) {
        if(item.id === id) return item;
        
        if(item.filhos && item.filhos.length > 0) {
          const encontrado = encontrarItemPorId(item.filhos, id);
          if(encontrado) return encontrado;
        }
      }
      return null;
    }

    function removerItem(itemId, pastaParenteId = null) {
      if(!modoEdicao) return;
      
      const item = encontrarItemPorId(documentosData.estrutura, itemId);
      if(!item) return;
      
      let mensagem = 'â“ Remover este ';
      mensagem += item.tipo === 'pasta' ? 'pasta' : 'documento';
      mensagem += '?';
      
      if(item.tipo === 'pasta' && item.filhos && item.filhos.length > 0) {
        mensagem = 'âš ï¸ Esta pasta contÃ©m ' + item.filhos.length + ' item(ns).\n\nDeseja realmente remover?';
      }
      
      if(!confirm(mensagem)) return;
      
      // FunÃ§Ã£o auxiliar para remover recursivamente
      function removerDaEstrutura(estrutura, id) {
        for(let i = 0; i < estrutura.length; i++) {
          if(estrutura[i].id === id) {
            estrutura.splice(i, 1);
            return true;
          }
          if(estrutura[i].filhos && estrutura[i].filhos.length > 0) {
            if(removerDaEstrutura(estrutura[i].filhos, id)) {
              return true;
            }
          }
        }
        return false;
      }
      
      removerDaEstrutura(documentosData.estrutura, itemId);
      alert('âœ… Item removido!');
      renderizarDocumentos();
    }

    function salvarEstruturaDocumentos() {
      return documentosData;
    }

    function carregarEstruturaDocumentos(dados) {
      if(dados && dados.documentos) {
        documentosData = dados.documentos;
        renderizarDocumentos();
      }
    }

  
  </script>

    


</body>
</html>